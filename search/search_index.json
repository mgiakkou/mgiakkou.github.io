{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>Home</p>"},{"location":"#welcome-to-the-eudi-wallet-dev-hub","title":"Welcome to the EUDI Wallet Dev Hub!","text":"<p>EU Digital Identity Wallets will enable users to access online services, store and share digital documents, and create binding signatures.</p> <p>Learn more about the EUDI Wallet project</p> <p>This is the developer's hub for the European Digital Identity Wallet\u2014a key reference point for those building and testing EUDI Wallet solutions, whether for Wallet Providers, Issuers, or Relying Parties.</p> <p>Everything you need to start your development project is gathered here. You will find technical guidelines and tools as well as directions for how to get started defining, designing and building an EUDI Wallet project.</p>"},{"location":"#eudi-wallet-reference-implementation-overview","title":"EUDI Wallet Reference Implementation Overview","text":"<p>The EUDI Wallet Reference Implementation aims at showcasing a robust and interoperable platform for digital identification, authentication and electronic signatures based on common standards across the European Union.</p> <p>EUDI Wallet open source code is available online!</p> <p>Embark on the journey by exploring more about the EUDI Wallet Reference Implementation.</p>"},{"location":"#build","title":"Build","text":"<p>Access comprehensive guidance on how to leverage the EUDI Wallet Reference Implementation to build your own EUDI Wallet, Issuer, or Verifier. The Reference Implementation provides open-source code libraries, tools, and sample applications to help you get started quickly and efficiently.</p> <p>Get ready to build your solution</p>"},{"location":"#test","title":"Test","text":"<p>Validate your solution with the EUDI Wallet testing toolkit. This includes pre-built testing tools designed to ensure your solution meets all specified functional requirements, guaranteeing quality and compliance.</p> <p>Get ready to test your solution</p>"},{"location":"#resources","title":"Resources","text":"<p>Compliance with the established set of technical specifications is essential for the security, interoperability and reliability of the EUDI Wallet.</p> <p>Discover essential resources</p>"},{"location":"Build/","title":"Build","text":"<p>Home / Build</p>"},{"location":"Build/#build-your-solution","title":"Build your Solution","text":"<p>In this section, you'll find comprehensive guidance on how to leverage the EUDI Wallet Reference Implementation to build your own EUDI Wallet, Issuer, or Verifier. The reference implementation provides open-source code libraries, tools, and sample applications to help you get started quickly and efficiently.</p> <p>Whether you are a Wallet Provider, an Issuer, or a Relying Party, the guide provides clear, step-by-step instructions and examples to help you get started. It also assists you in evaluating how you can leverage the EUDI Wallet reference implementation in your development project and how to make the most of it.</p> <p>Let\u2019s get started with building your secure and interoperable EUDI solutions!</p> Role Description Get Started Wallet Provider A Wallet Provider is responsible for developing, maintaining, and operating a secure and interoperable wallet application. EUDI Wallet Providers are Member States or organisations either mandated or recognized by Member States making the EUDI Wallet available for end users. The Wallet Provider ensures compliance with EU regulations while delivering an intuitive, user-friendly, and accessible solution for all users, including those with disabilities or varying levels of digital literacy. Build your Wallet Issuer An issuer is a PID Provider or a Qualified or Non-Qualified Electronic Attestation of Attributes Provider. They are responsible for issuing the PID or the Electronic Attestation to the Wallet and providing information that can be used to enquire about the validity status of the PID or Attestation. Build your Issuer Relying Party A relying party requires a verifier to accept and verify Attestations presented by wallet user. Verifiers can be used in both remote and proximity use cases. Build your Remote Verifier  Build your Proximity Verifier](./Build your Proximity Verifier/)"},{"location":"Build/#test-your-solution","title":"Test your Solution","text":"<p>Congratulations on building your solution. Time to test it!</p> <ul> <li>Test your Solution</li> </ul>"},{"location":"Build/Build%20your%20Issuer/","title":"Build your Issuer","text":"<p>Home / Build / Build your Issuer</p>"},{"location":"Build/Build%20your%20Issuer/#build-your-issuer","title":"Build your Issuer","text":""},{"location":"Build/Build%20your%20Issuer/#overview","title":"Overview","text":"<p>The Issuer is an implementation of  the PID and (Q)EAA Provider service, supporting the OpenID4VCI (draft 13) protocol.</p> <p>The service provides, by default, support for <code>mso_mdoc</code> and <code>SD-JWT-VC</code>formats, for the following credentials:</p> Credential/Attestation Format PID mso_mdoc PID(sample) SD-JWT-VC mDL mso_mdoc mDL SD-JWT-VC <p>For authenticating the user, it requires the use of an eIDAS node, an OAUTH2 server or a simple form (for testing purposes).</p>"},{"location":"Build/Build%20your%20Issuer/#openid4vci-coverage","title":"OpenId4VCI Coverage","text":"<p>This version of the Issuer supports the OpenId for Verifiable Credential Issuance (draft 13) protocol with the following coverage:</p> Feature Coverage Authorization Code flow draft \u2705 Support for credential configuration id, scope, (draft 13) Pre-authorized code flow \u2705 (draft 13) Credential Offer \u2705 <code>authorization_code</code> , \u2705 <code>pre-authorized_code</code>    (draft 13) Dynamic Credential Request \u2705 (draft 13) mso_mdoc format \u2705 SD-JWT-VC format \u2705 W3C VC DM \u274c Token Endpoint \u2705 (draft 13) Credential Endpoint \u2705 Including proofs and repeatable invocations, (draft 15) Credential Issuer MetaData \u2705 Unsigned metadata, (draft 15) Nonce endpoint \u2705 (draft 15) Deferred Endpoint \u2705 (draft 15) Proof \u2705 JWT Credential response encryption \u2705 (draft 15) Notification Endpoint \u2705 Pushed authorization request \u2705 Wallet authentication \u2705 public client Demonstrating Proof of Possession (DPoP) \u274c PKCE \u2705 <p>You can use the Issuer at https://issuer.eudiw.dev/, or install it locally.</p>"},{"location":"Build/Build%20your%20Issuer/Configure/","title":"Configure your Issuer","text":"<p>Home / Build / Build your Issuer</p>"},{"location":"Build/Build%20your%20Issuer/Configure/#configure-your-issuer","title":"Configure your Issuer","text":"<p>For configuring your locally installed version of the Issuer, you need to change the following configurations.</p>"},{"location":"Build/Build%20your%20Issuer/Configure/#1-service-configuration","title":"1. Service Configuration","text":"<p>Base configuration for the Issuer is located in <code>app/app_config/config_service.py</code>.</p> <p>Parameters that should be changed:</p> <ul> <li><code>service_url</code> (Base url of the service)</li> <li><code>trusted_CAs_path</code> (Path to a folder with trusted IACA certificates)</li> <li><code>eidasnode_url</code> (eIDAS Node base URL. Only needs to be changed if you're configuring the eIDAS Node)</li> <li><code>eidasnode_lightToken_connectorEndpoint</code> (eIDAS node connector endpoint for lightrequest. Only needs to be changed if you're configuring the eIDAS Node)</li> </ul> <p>You must copy your IACA trusted certificate(s) (in PEM format) to the <code>trusted_CAs_path</code> folder - you can find an example test IACA certificate for country Utopia (UT) here.</p>"},{"location":"Build/Build%20your%20Issuer/Configure/#2-configuration-of-countries","title":"2. Configuration of Countries","text":"<p>The supported countries configuration of the Issuer is located in <code>/app/app_config/config_countries.py</code>.</p> <p>Parameters that should be changed for each country:</p> <ul> <li><code>name</code> - name of the country</li> <li><code>connection_type</code>- options are eidasnode, oauth, and openid.</li> <li><code>pid_mdoc_privkey</code>- Document/Credential signer (DS) private key file location.</li> <li><code>pid_mdoc_privkey_passwd</code> - Document/Credential signer (DS) private key password.( Can be None or bytes. Example: b\"password\")</li> <li><code>pid_mdoc_cert</code> - Document/Credential signer (DS) certificate file location.</li> </ul> <p>You must copy your DS private key (in PEM format) to <code>pid_mdoc_privkey</code> file (the password must be defined in <code>pid_mdoc_privkey_passwd</code>), and the certificate (in DER format) to <code>pid_mdoc_cert</code> file.</p> <p>You can find example test private DS keys and certificates, for country Utopia (UT) here - the password of the example test private DS keys is b\"pid-ds-0002\". To decrypt the private key you can run the following command <code>openssl ec -in PID-DS-0002.pid-ds-0002.key.pem -out PID-DS-0002-decrypted.key.pem</code>.</p>"},{"location":"Build/Build%20your%20Issuer/Configure/#3-oid4vci-configuration","title":"3. OID4VCI Configuration","text":"<p>For configuring the installed idpy-oidc and openid4v libraries, you need to change the following parameters in the <code>app/app_config/oid_config.py</code> configuration file:</p> <ul> <li>port</li> </ul>"},{"location":"Build/Build%20your%20Issuer/Configure/#4-metadata-configuration","title":"4. Metadata Configuration","text":"<p>The Issuer OAuth2 metadata configuration files are located in <code>app/metadata_config/metadata_config.json</code> and <code>app/metadata_config/openid-configuration.json</code></p> <p>You must change the base URL of the endpoints from <code>https://issuer.eudiw.dev</code> to a custom one or <code>https://localhost</code> if installed locally</p> <p>Example: <pre><code>\"credential_issuer\": \"{base_url}\",\n\"credential_endpoint\": \"{base_url}/credential\",\n\"batch_credential_endpoint\": \"{base_url}/batch_credential\",\n\"notification_endpoint\": \"{base_url}/notification\",\n\"deferred_credential_endpoint\": \"{base_url}/deferred_credential\",\n</code></pre></p>"},{"location":"Build/Build%20your%20Issuer/New%20Attestation/","title":"Add Attestations","text":"<p>Home / Build / Build your Issuer</p>"},{"location":"Build/Build%20your%20Issuer/New%20Attestation/#add-attestations","title":"Add Attestations","text":"<p>This document specifies the changes needed to add a new attestation/credential to the EUDI Wallet Issuer. We will use a generic loyalty card credential as an example for this configuration.</p>"},{"location":"Build/Build%20your%20Issuer/New%20Attestation/#1-metadata-configuration","title":"1. Metadata Configuration","text":"<p>Add a new json file with the credential metadata to <code>app/metadata_config/credentials_supported</code></p> <p>For this example we will use <code>app/metadata_config/credentials_supported/loyalty_mdoc.json</code></p> <p>Example loyalty card metadata for mso_mdoc format (ISO 18013-5), with namespace <code>eu.europa.ec.eudi.loyalty_mdoc</code>:</p> <pre><code>{\n  \"eu.europa.ec.eudi.loyalty_mdoc\": {\n      \"format\": \"mso_mdoc\",\n      \"doctype\": \"eu.europa.ec.eudi.loyalty.1\",\n      \"scope\": \"eu.europa.ec.eudi.loyalty.1\",\n      \"cryptographic_binding_methods_supported\": [\n        \"jwk\", \"cose_key\"\n      ],\n      \"credential_signing_alg_values_supported\": [\n        \"ES256\"\n      ],\n      \"proof_types_supported\": {\n        \"jwt\": {\n          \"proof_signing_alg_values_supported\": [\n            \"ES256\"\n          ]\n        },\n        \"cwt\": {\n          \"proof_signing_alg_values_supported\": [\n            \"ES256\"\n          ],\n          \"proof_alg_values_supported\": [\n            -7\n          ],\n          \"proof_crv_values_supported\": [\n            1\n          ]\n        }\n      },\n      \"display\": [\n        {\n          \"name\": \"Loyalty\",\n          \"locale\": \"en\",\n          \"logo\": {\n            \"url\": \"https://examplestate.com/public/pid.png\",\n            \"alt_text\": \"A square figure of a PID\"\n          }\n        }\n      ],\n      \"claims\": {\n        \"eu.europa.ec.eudi.loyalty.1\": {\n          \"given_name\": {\n            \"mandatory\": true,\n            \"value_type\":\"string\",\n            \"source\":\"user\",\n            \"display\": [\n              {\n                \"name\": \"Given Name\",\n                \"locale\": \"en\"\n              }\n            ]\n          },\n          \"family_name\": {\n            \"mandatory\": true,\n            \"value_type\":\"string\",\n            \"source\":\"user\",\n            \"display\": [\n              {\n                \"name\": \"Family Name\",\n                \"locale\": \"en\"              }\n            ]\n          },\n          \"company\": {\n            \"mandatory\": true,\n            \"value_type\":\"string\",\n            \"source\":\"user\",\n            \"display\": [\n              {\n                \"name\": \"Loyalty Card Company\",\n                \"locale\": \"en\"              }\n            ]\n          },\n          \"client_id\": {\n            \"mandatory\": true,\n            \"value_type\":\"string\",\n            \"source\":\"user\",\n            \"display\": [\n              {\n                \"name\": \"Client ID\",\n                \"locale\": \"en\"              }\n            ]\n          },\n          \"issuance_date\": {\n            \"mandatory\": true,\n            \"source\":\"issuer\",\n            \"display\": [\n              {\n                \"name\": \"Issuance Date\",\n                \"locale\": \"en\"\n              }\n            ]\n          },\n          \"expiry_date\": {\n            \"mandatory\": true,\n            \"source\":\"issuer\",\n            \"display\": [\n              {\n                \"name\": \"Expiry Date\",\n                \"locale\": \"en\"\n              }\n            ]\n          }\n        }\n      }\n    }\n  }\n</code></pre> <p>If you want to issue a different attestation/credential using this example as a template, choose a different namespace, doctype, and scope, and modify the claims to include the required attributes.</p> <p>For more information on the metadata parameters, refer to https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0.html#name-metadata.</p> <p>Extra Parameters  - source: Where the attribute is sourced from. Either the user or issuer (Example: Issuance Date is filled in by the issuer while given_name is filled in by the user on the form) - value_type: Type of the value expected. This will add the attribute to the forms. (Can be string, full-date, jpeg, driving_privileges, uint, bool)</p>"},{"location":"Build/Build%20your%20Issuer/New%20Attestation/#2-service-configuration","title":"2. Service Configuration","text":"<p>In the service configuration file (<code>app/app_config/config_service.py</code>), you need to configure the issuing authority, organization and validity of the credential.</p> <ul> <li>Add a new entry to config_doctype (using the doctype of the credential as key)</li> </ul> <pre><code>\"eu.europa.ec.eudi.loyalty.1\": {\n    \"issuing_authority\": \"Test QEAA issuer\",\n    \"organization_id\": pid_organization_id,\n    \"validity\": qeaa_validity,\n    \"organization_name\": \"Test QEAA issuer\",\n    \"namespace\": \"eu.europa.ec.eudi.loyalty.1\",\n}\n</code></pre> <ul> <li> <p>Add a new entry to auth_method_supported_credencials (using the credential identifier specified in the metadata)</p> <p>This configures the type of user authentication allowed for the credential. You may choose authentication through a PID using OpenId4VP, or through a country selection (options are: IDP, eidas node or a simple form).</p> <p>In the following examples the authentication allowed for the loyalty credential is through country selection.</p> </li> </ul> <pre><code>auth_method_supported_credencials = {\n    \"PID_login\": [\n    ],\n    \"country_selection\": [\n        \"eu.europa.ec.eudi.loyalty_mdoc\",\n    ],\n}\n</code></pre> <ul> <li>If this credential supports Dynamic Credential Request, add a new entry to dynamic_issuing</li> </ul> <p>This configures which attestation and attributes are asked for in the OID4VP Request When using Dynamic credential request to issue this credential.</p> <p>Follows the format: <pre><code>dynamic_issuing = {\n      \"credential_configuration_id\":{\n          \"DocType\":{\"Namespace\":[\"attribute\",...,\"attribute\"]}\n      }\n}\n</code></pre></p> <p>Example from age over 18 pseudonym: <pre><code>dynamic_issuing = {\n      \"eu.europa.ec.eudi.pseudonym_over18_mdoc\":{\n          \"eu.europa.ec.eudi.pid.1\":{\"eu.europa.ec.eudi.pid.1\":[\"age_over_18\"]}\n      }\n}\n</code></pre></p>"},{"location":"Build/Build%20your%20Issuer/New%20Attestation/#3-configuration-of-countries","title":"3. Configuration of Countries","text":"<p>Located in <code>app/app_config/config_countries.py</code>, this configuration file contains configuration data related to the countries supported by the PID Issuer, and the credentials supported by each country.</p> <p>For example, to add the loyalty credential to the <code>formCountry</code>, you need to add the loyalty credential id (defined in the metadata) to the <code>supported_credentials</code> of the <code>formCountry</code>.</p> <pre><code>\"supported_credentials\": [\n  \"eu.europa.ec.eudi.loyalty_mdoc\"\n]\n</code></pre>"},{"location":"Build/Build%20your%20Issuer/Steps%20to%20Build/","title":"Steps to Build","text":"<p>Home / Build / Build your Issuer</p>"},{"location":"Build/Build%20your%20Issuer/Steps%20to%20Build/#steps-to-build-your-issuer","title":"Steps to Build your Issuer","text":"<p>This section includes a thorough description of the steps to build your own Issuer.</p>"},{"location":"Build/Build%20your%20Issuer/Steps%20to%20Build/#1-python","title":"1. Python","text":"<p>The Issuer was tested with</p> <ul> <li>Python v. 3.9.2</li> </ul> <p>and should only be used with Python 3.9 or 3.10.</p> <p>If you don't have it installed, download it from here and follow the Python Developer's Guide.</p>"},{"location":"Build/Build%20your%20Issuer/Steps%20to%20Build/#2-flask","title":"2. Flask","text":"<p>The Issuer was tested with</p> <ul> <li>Flask v. 2.3</li> </ul> <p>and should only be used with Flask v. 2.3 or higher.</p> <p>To install Flask, follow the Installation Guide.</p>"},{"location":"Build/Build%20your%20Issuer/Steps%20to%20Build/#3-run-your-issuer","title":"3. Run your Issuer","text":"<p>To run the Issuer, follow these simple steps (some of which may have already been completed when installing Flask) for Linux/macOS or Windows.</p> <ol> <li> <p>Clone the Issuer repository:</p> <pre><code>git clone git@github.com:eu-digital-identity-wallet/eudi-srv-web-issuing-eudiw-py.git\n</code></pre> </li> <li> <p>Create a <code>.venv</code> folder within the cloned repository:</p> <pre><code>cd eudi-srv-web-issuing-eudiw-py\npython3 -m venv .venv\n</code></pre> </li> <li> <p>Activate the environment:</p> <p>Linux/macOS</p> <pre><code>. .venv/bin/activate\n</code></pre> <p>Windows</p> <pre><code>. .venv\\Scripts\\Activate\n</code></pre> </li> <li> <p>Install or upgrade pip</p> <pre><code>python -m pip install --upgrade pip\n</code></pre> </li> <li> <p>Install Flask, gunicorn and other dependencies in virtual environment</p> <pre><code>pip install -r app/requirements.txt\n</code></pre> </li> <li> <p>Setup secrets</p> </li> <li> <p>Copy <code>app/app_config/__config_secrets.py</code> to <code>app/app_config/config_secrets.py</code> and modify secrets.</p> </li> <li> <p>Service Configuration</p> </li> <li> <p>Configure the service according to documentation</p> </li> <li> <p>Run the Issuer </p> <p>In the root directory of the clone repository, insert one of the following command lines to run the Issuer.</p> <ul> <li>Linux/macOS/Windows (on <code>http://127.0.0.1:5000</code> or <code>http://localhost:5000</code>)</li> </ul> <pre><code>flask --app app run\n</code></pre> <ul> <li>Linux/macOS/Windows (on <code>http://127.0.0.1:5000</code> or <code>http://localhost:5000</code> with flag debug)</li> </ul> <pre><code>flask --app app run --debug\n</code></pre> </li> </ol>"},{"location":"Build/Build%20your%20Issuer/Steps%20to%20Build/#4-run-your-local-issuer-over-https","title":"4. Run your local Issuer over HTTPS","text":"<ol> <li>Generate a self signed certificate and a private key</li> <li> <p>Linux/macOS</p> <p>Example:      <code>openssl req -x509 -out localhost.crt -keyout localhost.key -newkey rsa:2048 -nodes -sha256 -subj '/CN=localhost' -extensions EXT -config &lt;( \\    printf \"[dn]\\nCN=localhost\\n[req]\\ndistinguished_name = dn\\n[EXT]\\nsubjectAltName=IP.1:127.0.0.1\\nkeyUsage=digitalSignature\\nextendedKeyUsage=serverAuth\")</code></p> <ul> <li> <p>Windows</p> <p>Create the file localhost.conf using the following as an example: <pre><code>[req]\ndefault_bits  = 2048\ndistinguished_name = req_distinguished_name\nreq_extensions = req_ext\nx509_extensions = v3_req\nprompt = no\n[req_distinguished_name]\ncountryName = XX\nstateOrProvinceName = N/A\nlocalityName = N/A\norganizationName = Self-signed certificate\ncommonName = 120.0.0.1: Self-signed certificate\n[req_ext]\nsubjectAltName = @alt_names\n[v3_req]\nsubjectAltName = @alt_names\n[alt_names]\nIP.1 = 127.0.0.1\n</code></pre></p> <p>Use the configuration file above to generate the certificate and key <pre><code>openssl req -x509 -nodes -days 730 -newkey rsa:2048 -keyout key.pem -out cert.pem -config localhost.conf \n</code></pre></p> </li> </ul> </li> <li> <p>Add certificate to environment variables</p> </li> <li> <p>Linux/macOS        <pre><code> export REQUESTS_CA_BUNDLE=\"/path/to/certificate\"\n</code></pre></p> </li> <li> <p>Windows         <pre><code>set REQUESTS_CA_BUNDLE=\"\\path\\to\\certificate\"\n</code></pre></p> </li> <li> <p>Run the Issuer with certificate and key     <pre><code>flask --app app run --cert=cert.pem --key=key.pem\n</code></pre></p> </li> </ol>"},{"location":"Build/Build%20your%20Issuer/Steps%20to%20Build/#5-make-your-local-issuer-available-on-the-internet-optional","title":"5. Make your local Issuer available on the Internet (optional)","text":"<p>If you want to make your local Issuer available on the Internet, we recommend to use NGINX reverse proxy and certbot (to generate an HTTPS certificate).</p>"},{"location":"Build/Build%20your%20Issuer/Steps%20to%20Build/#51-install-and-configure-nginx","title":"5.1 Install and configure NGINX","text":"<ol> <li> <p>Follow the installation guide</p> </li> <li> <p>Configure your local Issuer. For example, use the following Nginx configuration file (for a Linux installation):</p> <pre><code>server {\n    server_name FQDN; # Change to the FQDN you want to use\n\n    listen 80;\n    access_log /var/log/nginx/issuer.eudiw.access.log;\n    error_log /var/log/nginx/issuer.eudiw.error.log;\n    root /var/www/html;\n\n# Recommended\n    proxy_busy_buffers_size   512k;\n    proxy_buffers   4 512k;\n    proxy_buffer_size   256k;\n\n# Provider backend\n    location / {\n        # The proxy_pass directive assumes that your local Issuer is running at http://127.0.0.1:5000/. \n        # If not, adjust it accordingly.\n        proxy_pass                              http://127.0.0.1:5000/;\n        proxy_set_header Host                   $http_host;\n        proxy_set_header X-Real-IP              $remote_addr;\n        proxy_set_header X-Forwarded-For        $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto      $scheme;\n    }\n}\n</code></pre> </li> <li> <p>Restart the Nginx server</p> </li> </ol>"},{"location":"Build/Build%20your%20Issuer/Steps%20to%20Build/#52-install-and-run-certbot-to-get-a-free-https-certificate","title":"5.2 Install and run certbot to get a free HTTPS certificate","text":"<ol> <li> <p>Follow the installation guide</p> </li> <li> <p>Run <code>certbot</code> to get a free HTTPS certificate. The <code>certbot</code> will also configure the Issuer Nginx configuration file with the HTTPS certificate</p> </li> <li> <p>Restart the Nginx server and goto <code>https:\\\\FQDN\\</code> (FQDN configured in the Nginx configuration file)</p> </li> </ol>"},{"location":"Build/Build%20your%20Issuer/Steps%20to%20Build/#6-docker","title":"6. Docker","text":"<p>To run the Issuer in Docker, follow these steps:</p> <ol> <li> <p>Install Docker following the official instructions for your operating system</p> </li> <li> <p>Download the Dockerfile</p> </li> <li> <p>Build the Docker: <code>sudo docker build -t eudiw-issuer .</code></p> </li> <li> <p>Create 2 directories to be mounted:</p> <ol> <li> <p>First directory named <code>config_secrets</code></p> <p>This directory will have the cert.pem and key.pem generated in Section 4 above</p> <p>As well as the config_secrets.py based on this example</p> </li> <li> <p>Second directory named <code>pid-issuer</code>, inside will be a directory <code>cert</code> and <code>privKey</code></p> <p>The <code>cert</code> directory has the certificates of the trusted CAs in PEM format as well as the Document/Credential signer (DS) certificates in DER format</p> <p>The <code>privKey</code> directory has the Document/Credential signer (DS) private keys</p> <p>Example:</p> <pre><code>docker-issuer\n\u251c\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 config_secrets\n\u2502   \u251c\u2500\u2500 config_secrets.py\n\u2502   \u251c\u2500\u2500 cert.pem\n\u2502   \u2514\u2500\u2500 key.pem\n\u2514\u2500\u2500 pid-issuer\n    \u251c\u2500\u2500 cert\n    \u2502   \u251c\u2500\u2500 PID-DS-0001_UT_cert.der\n    \u2502   \u2514\u2500\u2500 PIDIssuerCAUT01.pem\n    \u2514\u2500\u2500 privKey\n        \u2514\u2500\u2500 PID-DS-0001_UT.pem\n</code></pre> </li> </ol> </li> <li> <p>Run Docker</p> <p>If running a basic configuration without EIDAS node or Dynamic presentation, their respective variables can be removed from the run command below.</p> <pre><code>sudo docker run -d \\\n--name eudiw-issuer \\\n-e SERVICE_URL=\"https://your.service.url/\" \\\n-e EIDAS_NODE_URL=\"https://your.eidas.node.url/\" \\\n-e DYNAMIC_PRESENTATION_URL=\"https://your.dynamic.presentation.url/\" \\\n-v ./config_secrets:/root/secrets \\\n-v ./pid-issuer:/etc/eudiw/pid-issuer \\\n-p 5000:5000 \\\neudiw-issuer\n</code></pre> </li> <li> <p>Docker logs</p> <p>Issuer logs in real time: <code>sudo docker logs -f eudiw-issuer</code> All logs: <code>sudo docker logs eudiw-issuer</code></p> </li> <li> <p>Stop Docker Issuer    <code>sudo docker stop eudiw-issuer</code></p> </li> </ol>"},{"location":"Build/Build%20your%20Proximity%20Verifier/","title":"Build your Proximity Verifier App","text":"<p>Home / Build / Build your Proximity Verifier</p>"},{"location":"Build/Build%20your%20Proximity%20Verifier/#build-your-proximity-verifier","title":"Build your Proximity Verifier","text":""},{"location":"Build/Build%20your%20Proximity%20Verifier/#overview","title":"Overview","text":""},{"location":"Build/Build%20your%20Proximity%20Verifier/Build%20your%20Proximity%20Verifier%20App%20for%20Android/","title":"Build your Proximity Verifier App for Android","text":"<p>Home / Build / Build your Proximity Verifier</p>"},{"location":"Build/Build%20your%20Proximity%20Verifier/Build%20your%20Proximity%20Verifier%20App%20for%20Android/#build-your-proximity-verifier-app-for-android","title":"Build your Proximity Verifier App for Android","text":"<p>The EUDI Verifier App is a cross-platform reference implementation for ISO 18013-5 proximity-based credential verification.  Built with Kotlin Multiplatform (KMP/CMP), the app provides a unified codebase for business logic,  leveraging platform-native libraries to ensure compliance with the latest standards and security requirements.</p> <p>This guide explains how to set up, build, and run the project on Android.</p>"},{"location":"Build/Build%20your%20Proximity%20Verifier/Build%20your%20Proximity%20Verifier%20App%20for%20Android/#platform-and-feature-support","title":"Platform and Feature Support","text":"<p>You can use emulators or simulators for UI and navigation testing, but completing a full verification flow requires a physical device.</p> Platform BLE NFC Status Android Supported Not implemented Fully operational with BLE verification <p>Features that are not yet implemented are planned for future releases.</p>"},{"location":"Build/Build%20your%20Proximity%20Verifier/Build%20your%20Proximity%20Verifier%20App%20for%20Android/#project-setup","title":"Project Setup","text":"<p>To get started:</p> <ol> <li>Clone the repository: <pre><code>git clone https://github.com/eu-digital-identity-wallet/eudi-app-multiplatform-verifier-ui.git\n</code></pre></li> <li>Open the project in Android Studio.</li> <li>Allow Gradle to sync and download all required dependencies.    The first sync may take a few minutes.</li> </ol>"},{"location":"Build/Build%20your%20Proximity%20Verifier/Build%20your%20Proximity%20Verifier%20App%20for%20Android/#building-the-app","title":"Building the App","text":""},{"location":"Build/Build%20your%20Proximity%20Verifier/Build%20your%20Proximity%20Verifier%20App%20for%20Android/#requirements","title":"Requirements","text":"<ul> <li>JDK 17 or newer</li> <li>Android SDK 36 installed</li> <li>Device or emulator running Android 10 (API 29) or higher (verification flow requires a physical device)</li> </ul>"},{"location":"Build/Build%20your%20Proximity%20Verifier/Build%20your%20Proximity%20Verifier%20App%20for%20Android/#build-run","title":"Build &amp; Run","text":"<ol> <li>Open the project in Android Studio and wait for Gradle sync to complete.</li> <li>In Build Variants (<code>Build \u2192 Select Build Variant</code>), choose one of:<ul> <li>DevDebug (default)</li> <li>DevRelease</li> <li>PublicDebug</li> <li>PublicRelease (All variants are currently functionally equivalent. Use DevDebug unless you have a specific reason to choose another.)</li> </ul> </li> <li>Select a deployment target:<ul> <li>Emulator for UI-only checks, or</li> <li>Physical device (Android 10 or higher) to test the complete verification flow.</li> </ul> </li> <li>Run the app (<code>Run \u2192 Run 'verifierApp'</code>) to build, install, and launch it.</li> </ol>"},{"location":"Build/Build%20your%20Proximity%20Verifier/Build%20your%20Proximity%20Verifier%20App%20for%20Android/#notes","title":"Notes","text":"<ul> <li>The shared Kotlin code and UI (Compose Multiplatform) are located under <code>verifierApp/commonMain</code>.</li> <li>You can test the UI and navigation flows on emulators.   For actual proximity verification, use physical hardware.</li> </ul> <p>For a complete list of the configuration options, see the main project README.</p>"},{"location":"Build/Build%20your%20Proximity%20Verifier/Build%20your%20Proximity%20Verifier%20Core%20for%20Android/","title":"Build your Proximity Verifier Core for Android","text":"<p>Home / Build / Build your Proximity Verifier</p>"},{"location":"Build/Build%20your%20Proximity%20Verifier/Build%20your%20Proximity%20Verifier%20Core%20for%20Android/#build-your-proximity-verifier-core-for-android","title":"Build your Proximity Verifier Core for Android","text":"<p>The EUDI Verifier Core Library for Android is designed to enable Android applications to act as conformant verifiers of mobile identity documents (mDocs), in alignment with the ISO 18013\u20115 specification. It provides a streamlined API to orchestrate device engagement, transfer management and document status resolution, making it possible for developers to integrate proximity and remote-based verification workflows within their Android apps.</p> <p>This guide walks you through the essential steps to configure and integrate the library into your development environment.</p>"},{"location":"Build/Build%20your%20Proximity%20Verifier/Build%20your%20Proximity%20Verifier%20Core%20for%20Android/#prerequisites","title":"Prerequisites","text":"<ul> <li>Android version 8 or higher (API level 26+).</li> </ul>"},{"location":"Build/Build%20your%20Proximity%20Verifier/Build%20your%20Proximity%20Verifier%20Core%20for%20Android/#permissions","title":"Permissions","text":"<p>The following permissions must be declared in the AndroidManifest file and requested at runtime:</p> <pre><code>&lt;uses-permission android:name=\"android.permission.CAMERA\" /&gt;\n&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n&lt;uses-permission android:name=\"android.permission.BLUETOOTH_CONNECT\" /&gt;\n&lt;uses-permission android:name=\"android.permission.BLUETOOTH_SCAN\" /&gt;\n&lt;uses-permission android:name=\"android.permission.BLUETOOTH_ADVERTISE\" /&gt;\n</code></pre>"},{"location":"Build/Build%20your%20Proximity%20Verifier/Build%20your%20Proximity%20Verifier%20Core%20for%20Android/#dependencies","title":"Dependencies","text":"<p>To utilize snapshot versions, include the Sonatype Snapshots repository in the <code>settings.gradle</code> file as follows:</p> <pre><code>dependencyResolutionManagement {\n  repositories {\n    maven {\n      url = uri(\"https://central.sonatype.com/repository/maven-snapshots/\")\n      mavenContent { snapshotsOnly() }\n    }\n  }\n}\n</code></pre> <p>Subsequently, add the library dependency to the application module:</p> <pre><code>dependencies {\n  implementation(\"eu.europa.ec.eudi:eudi-lib-android-verifier-core:0.1.0\")\n}\n</code></pre>"},{"location":"Build/Build%20your%20Proximity%20Verifier/Build%20your%20Proximity%20Verifier%20Core%20for%20Android/#setup","title":"Setup","text":""},{"location":"Build/Build%20your%20Proximity%20Verifier/Build%20your%20Proximity%20Verifier%20Core%20for%20Android/#library-initialization","title":"Library Initialization","text":"<p>To create an instance of <code>EudiVerifier</code>, use the <code>EudiVerifier.Builder</code> class or invoke the <code>EudiVerifier.invoke</code> method from the companion object. This requires providing an <code>EudiVerifierConfig</code> object that specifies the verifier\u2019s configuration.</p>"},{"location":"Build/Build%20your%20Proximity%20Verifier/Build%20your%20Proximity%20Verifier%20Core%20for%20Android/#document-transfer","title":"Document Transfer","text":"<p>Currently, the library supports document transfer via:</p> <ul> <li>Offline transfer between devices over Bluetooth Low Energy (BLE), compliant with ISO 18013-5.</li> <li>Device engagement through QR code scanning.</li> </ul> <p>To instantiate a <code>TransferManager</code>, use the method <code>EudiVerifier.createTransferManager</code>.</p>"},{"location":"Build/Build%20your%20Proximity%20Verifier/Build%20your%20Proximity%20Verifier%20Core%20for%20Android/#event-handling","title":"Event Handling","text":"<p>The transfer process operates asynchronously, emitting events that reflect the current state of the transfer. These events are encapsulated in the sealed class <code>TransferEvent</code>. To receive these events, a <code>TransferEvent.Listener</code> must be attached to the <code>TransferManager</code>, with appropriate handling implemented.</p> <p>The available events include:</p> <ol> <li><code>TransferEvent.DeviceEngagementCompleted</code>: Signifies successful device engagement.</li> <li><code>TransferEvent.Connecting</code>: Indicates an ongoing connection attempt.</li> <li><code>TransferEvent.Connected</code>: Confirms that a connection has been established; this is when <code>transferManager.sendRequest(DeviceRequest)</code> should be called.</li> <li><code>TransferEvent.RequestSent</code>: A request has been dispatched to the holder device.</li> <li><code>TransferEvent.ResponseReceived</code>: A response has been received from the holder device, accessible via <code>transferEvent.response</code>.</li> <li><code>TransferEvent.Disconnected</code>: Denotes that the devices have been disconnected.</li> <li><code>TransferEvent.Error</code>: An error has occurred; the associated <code>Throwable</code> can be retrieved from <code>transferEvent.error</code>.</li> </ol>"},{"location":"Build/Build%20your%20Remote%20Verifier/","title":"Build your Remote Verifier","text":"<p>Home / Build / Build your Remote Verifier</p>"},{"location":"Build/Build%20your%20Remote%20Verifier/#build-your-remote-verifier","title":"Build your Remote Verifier","text":""},{"location":"Build/Build%20your%20Remote%20Verifier/#overview","title":"Overview","text":"<p>This is a web UI that provides functionality to interact with the Verifier/RP trusted endpoint implemented in this repository. Another way to think of this application is that it represents an arbitrary application that wants to delegate to the trusted endpoint the burden of interacting with a wallet using OpenId4VP. The project was generated with Angular CLI version 19.1.4.</p>"},{"location":"Build/Build%20your%20Remote%20Verifier/Configure/","title":"Configure your Verifier","text":"<p>Home / Build / Build your Remote Verifier</p>"},{"location":"Build/Build%20your%20Remote%20Verifier/Configure/#configure-your-verifier","title":"Configure your Verifier","text":""},{"location":"Build/Build%20your%20Remote%20Verifier/Configure/#use-your-custom-relying-party-certificate-with-the-verifier","title":"Use your custom relying party certificate with the verifier","text":"<p>In order to use your own certificate with the verifier, the <code>VERIFIER_JAR_SIGNING_KEY</code> needs to be set to <code>LoadFromKeystore</code>. Moreover, the following environment variables must also be configured accordingly.</p> <p>Variable: <code>VERIFIER_JAR_SIGNING_ALGORITHM</code> Description: Algorithm used to sign Authorization Request  Possible values: Any <code>Algorithm Name</code> of an IANA registered asymmetric signature algorithm (i.e. Usage is <code>alg</code>): Signature Encryption Algorithm Note: The configured signing algorithm must be compatible with the configured signing key Default value: <code>ES256</code></p> <p>Variable: <code>VERIFIER_JAR_SIGNING_KEY</code> Description: Key to use for Authorization Request signing Possible values: <code>GenerateRandom</code>, <code>LoadFromKeystore</code> Setting this value to <code>GenerateRandom</code> will result in the generation of a random <code>EC</code> key using the curve <code>P-256</code>  Note: The configured signing key must be compatible with the configured signing algorithm Default value: <code>GenerateRandom</code></p> <p>Variable: <code>VERIFIER_JAR_SIGNING_KEY_KEYSTORE</code> Description: URL of the Keystore from which to load the Key to use for JAR signing Examples: <code>classpath:keystore.jks</code>, <code>file:///keystore.jks</code></p> <p>Variable: <code>VERIFIER_JAR_SIGNING_KEY_KEYSTORE_TYPE</code> Description: Type of the Keystore from which to load the Key to use for JAR signing Examples: <code>jks</code>, <code>pkcs12</code></p> <p>Variable: <code>VERIFIER_JAR_SIGNING_KEY_KEYSTORE_PASSWORD</code> Description: Password of the Keystore from which to load the Key to use for JAR signing</p> <p>Variable: <code>VERIFIER_JAR_SIGNING_KEY_ALIAS</code> Description: Alias of the Key to use for JAR signing, in the configured Keystore</p> <p>Variable: <code>VERIFIER_JAR_SIGNING_KEY_PASSWORD</code> Description: Password of the Key to use for JAR signing, in the configured Keystore</p>"},{"location":"Build/Build%20your%20Remote%20Verifier/Steps%20to%20Build/","title":"Steps to Build","text":"<p>Home / Build / Build your Remote Verifier</p>"},{"location":"Build/Build%20your%20Remote%20Verifier/Steps%20to%20Build/#steps-to-build-your-verifier","title":"Steps to Build your Verifier","text":""},{"location":"Build/Build%20your%20Remote%20Verifier/Steps%20to%20Build/#development-server","title":"Development Server","text":"<p>Run <code>ng serve</code> for a dev server. Navigate to <code>http://localhost:4200/</code>. The application will automatically reload if you change any of the source files.</p>"},{"location":"Build/Build%20your%20Remote%20Verifier/Steps%20to%20Build/#code-scaffolding","title":"Code Scaffolding","text":"<p>Run <code>ng generate component component-name</code> to generate a new component. You can also use <code>ng generate directive|pipe|service|class|guard|interface|enum|module</code>.</p>"},{"location":"Build/Build%20your%20Remote%20Verifier/Steps%20to%20Build/#build","title":"Build","text":"<p>Run <code>ng build</code> to build the project. The build artifacts will be stored in the <code>dist/</code> directory.</p>"},{"location":"Build/Build%20your%20Remote%20Verifier/Steps%20to%20Build/#run-your-verifier","title":"Run your Verifier","text":"<p>You need npm (node version 18.15.0) and Angular CLI installed on your machine.</p> <p>To run Verifier UI run the following commands:</p> <p><pre><code>npm install\nng serve --proxy-config src/proxy.conf.json\n</code></pre> The above command utilizes proxy.conf.json that proxies the calls to the expected verifier backend service. Update this file if you want your Verifier UI to point to a locally running verifier backend service.</p> <p>You can access the application at <code>http://localhost:4200</code>. </p>"},{"location":"Build/Build%20your%20Remote%20Verifier/Steps%20to%20Build/#run-tests","title":"Run Tests","text":"<p>Run <code>ng test</code> to execute the unit tests via Karma.</p> <p>Run <code>ng e2e</code> to execute the end-to-end tests via a platform of your choice. To use this command, you need to first add a package that implements end-to-end testing capabilities.</p> <p>To get more help on the Angular CLI use <code>ng help</code> or go check out the Angular CLI Overview and Command Reference page.</p>"},{"location":"Build/Build%20your%20Revocation%20Service/","title":"Index","text":"<p>Home</p>"},{"location":"Build/Build%20your%20Revocation%20Service/#index-of-buildbuild-your-revocation-service","title":"Index of Build/Build your Revocation Service","text":""},{"location":"Build/Build%20your%20Wallet/","title":"Build your Wallet","text":"<p>Home / Build / Build your Wallet</p>"},{"location":"Build/Build%20your%20Wallet/#build-your-wallet","title":"Build your Wallet","text":"<p>In this section, you will find all the resources you need to build your own Wallet application using the tools and libraries provided by the EUDI Wallet Reference Implementation. These resources include the Wallet application for Android/iOS, the Wallet Core for Android and Wallet Kit for iOS that serve as a coordinator layer between the Wallet application and the Wallet libraries, all designed to help you create a secure, user-friendly, and interoperable digital wallet solution.</p> <p>Let's start with your implementation!</p> Operating System Description Get Started Android Reference Implementation Wallet Application Android Wallet Android Reference Implementation Core Android Core iOS Reference Implementation Wallet Application iOS Wallet iOS Reference Implementation Core iOS Core"},{"location":"Build/Build%20your%20Wallet/Android/","title":"Index","text":"<p>Home </p>"},{"location":"Build/Build%20your%20Wallet/Android/Library%20Level/","title":"Library Level","text":"<p>Home / Build / Build your Wallet / Android / Library Level</p>"},{"location":"Build/Build%20your%20Wallet/Android/Library%20Level/#eudi-wallet-core-library-for-android","title":"EUDI Wallet Core library for Android","text":""},{"location":"Build/Build%20your%20Wallet/Android/Library%20Level/#overview","title":"Overview","text":"<p>This repository contains the EUDI Wallet Core library for Android. The library is part of the EUDI Wallet Reference Implementation project.</p> <p>This library acts as a coordinator, orchestrating the various components that are required to implement the EUDI Wallet functionality. Additionally, it provides a simplified API that can be used by the application to implement the EUDI Wallet functionality.</p> <p>The library provides the following functionality:</p> <ul> <li>Document management<ul> <li> Document Key creation and management with Android Keystore by default</li> <li> Support for custom SecureArea implementations</li> <li> Support for multiple SecureArea implementations</li> </ul> </li> <li>Document issuance<ul> <li> Support for OpenId4VCI Draft 14 document issuance<ul> <li> Authorization Code Flow</li> <li> Pre-authorization Code Flow</li> <li> Support for mso_mdoc format</li> </ul> </li> <li> Support for sd-jwt-vc format<ul> <li> Support for credential offers</li> <li> Support for DPoP JWT in authorization</li> </ul> </li> <li> Support for JWT proof types</li> <li> Support for deferred issuance</li> </ul> </li> <li>Proximity document presentation<ul> <li> Support for ISO-18013-5 device retrieval<ul> <li> QR device engagement</li> <li> NFC device engagement</li> <li> BLE data transfer</li> <li> NFC data transfer</li> <li> Wifi-Aware data transfer</li> </ul> </li> </ul> </li> <li>Remote document presentation<ul> <li> OpenId4VP document transfer<ul> <li> For pre-registered verifiers</li> <li> Dynamic registration of verifiers</li> </ul> </li> </ul> </li> </ul> <p>The library is written in Kotlin and is compatible with Java. It is distributed as a Maven package and can be included in any Android project that uses Android 8 (API level 26) or higher.</p>"},{"location":"Build/Build%20your%20Wallet/Android/Library%20Level/Build%20the%20Core/","title":"Build the Core","text":"<p>Home / Build / Build your Wallet / Android / Library Level</p>"},{"location":"Build/Build%20your%20Wallet/Android/Library%20Level/Build%20the%20Core/#build-the-core","title":"Build the Core","text":""},{"location":"Build/Build%20your%20Wallet/Android/Library%20Level/Build%20the%20Core/#requirements","title":"Requirements","text":"<ul> <li>Android 8 (API level 26) or higher</li> </ul>"},{"location":"Build/Build%20your%20Wallet/Android/Library%20Level/Build%20the%20Core/#dependencies","title":"Dependencies","text":"<p>To use snapshot versions add the following to your project's settings.gradle file:</p> <pre><code>dependencyResolutionManagement {\n    repositories {\n        // ...\n        maven {\n            url = uri(\"https://s01.oss.sonatype.org/content/repositories/snapshots/\")\n            mavenContent { snapshotsOnly() }\n        }\n        // ...\n    }\n}\n</code></pre> <p>To include the library in your project, add the following dependencies to your app's build.gradle file.</p> <pre><code>dependencies {\n    implementation \"eu.europa.ec.eudi:eudi-lib-android-wallet-core:0.14.0\"\n    // required when using the built-in AndroidKeystoreSecureArea implementation provided by the library\n    // for user authentication with biometrics\n    implementation \"androidx.biometric:biometric-ktx:1.2.0-alpha05\"\n}\n</code></pre>"},{"location":"Build/Build%20your%20Wallet/Android/Library%20Level/Build%20the%20Core/#how-to-use","title":"How to use","text":""},{"location":"Build/Build%20your%20Wallet/Android/Library%20Level/Build%20the%20Core/#initialize-the-library","title":"Initialize the library","text":"<p>To instantiate a <code>EudiWallet</code> use the <code>EudiWallet.Builder</code> class or the <code>EudiWallet.invoke</code> method, from the EudiWallet companion object.</p> <p>The minimum requirements to initialize the library are to provide a <code>EudiWalletConfit</code> object that will be used to configure the library's built-in components.</p> <p>The built-in components are:</p> <ul> <li><code>AndroidKeystoreSecureArea</code> for storing and managing the documents' keys</li> <li><code>AndroidStorageEngine</code> for storing the documents' data</li> <li><code>ReaderTrustStore</code> implementation for validating the reader's certificates</li> <li><code>PresentationManager</code> implementation for managing both proximity and remote presentation of   documents</li> <li><code>Logger</code> implementation for logging</li> </ul> <p>The following example demonstrates how to initialize the library for using the built-in components:</p> <pre><code>// configuring the wallet\nval config = EudiWalletConfig()\n    // configure the document storage\n    // the noBackupFilesDir is used to store the documents by default\n    .configureDocumentManager(context.noBackupFilesDir)\n    // configure the built-in logger\n    .configureLogging(\n        // set log level to info\n        level = Logger.LEVEL_INFO\n    )\n    // configure the built-in key creation settings\n    .configureDocumentKeyCreation(\n        // set userAuthenticationRequired to true to require user authentication\n        userAuthenticationRequired = true,\n        // set userAuthenticationTimeout to 30 seconds\n        userAuthenticationTimeout = 30_000L,\n        // set useStrongBoxForKeys to true to use the the device's StrongBox if available\n        // to store the keys\n        useStrongBoxForKeys = true\n    )\n    .configureReaderTrustStore(\n        // set the reader trusted certificates for the reader trust store\n        listOf(readerCertificate)\n    )\n    // mandatory configuration for OpenId4Vci if you want to issue documents\n    .configureOpenId4Vci {\n        withIssuerUrl(\"https://issuer.com\")\n        withClientId(\"client-id\")\n        withAuthFlowRedirectionURI(\"eudi-openid4ci://authorize\")\n    }\n    // configuration for proximity presentation\n    // the values below are the default values\n    .configureProximityPresentation(\n        // ble mode: peripheral and/or central\n        enableBlePeripheralMode = true,\n        enableBleCentralMode = false,\n        clearBleCache = true,\n        // registered application service for handling NFC device engagement\n        nfcEngagementServiceClass = MyNfcEngagementService::class.java\n    )\n    // mandatory configuration for OpenId4Vp if you want to enable\n    // remote presentation of documents with OpenId4Vp\n    .configureOpenId4Vp {\n        withEncryptionAlgorithms(\n            EncryptionAlgorithm.ECDH_ES\n        )\n        withEncryptionMethods(\n            EncryptionMethod.A128CBC_HS256,\n            EncryptionMethod.A256GCM\n        )\n        withClientIdSchemes(\n            ClientIdScheme.X509SanDns\n        )\n        withSchemes(\n            \"openid4vp\",\n            \"eudi-openid4vp\",\n            \"mdoc-openid4vp\"\n        )\n        withFormats(\n            Format.MsoMdoc, \n            Format.SdJwtVc.ES256\n        )\n    }\n\nval wallet = EudiWallet(context, config)\n</code></pre> <p><code>EudiWallet.Builder</code> allows you to configure the library with custom implementations of the built-in components.</p> <p>The following example demonstrates how to initialize the library with custom implementations for StorageEngine, SecureArea, ReaderTrustStore, and Logger:</p> <pre><code>val wallet = EudiWallet(context, config) {\n    // custom StorageEngine to store documents' data\n    withStorageEngine(myStorageEngine)\n    // a list of SecureArea implementations to be used\n    withSecureAreas(listOf(deviceSecureArea, cloudSecureArea))\n    // ReaderTrustStore to be used for reader authentication\n    withReaderTrustStore(myReaderTrustStore)\n    // custom logger to be used\n    withLogger(myLogger)\n}\n</code></pre> <p>See the CustomizeSecureArea.md for more information on how to use the wallet-core library with custom SecureArea implementations.</p>"},{"location":"Build/Build%20your%20Wallet/Android/Library%20Level/Manage%20Documents/","title":"Manage Documents","text":"<p>Home / Build / Build your Wallet / Android / Library Level</p>"},{"location":"Build/Build%20your%20Wallet/Android/Library%20Level/Manage%20Documents/#manage-documents","title":"Manage Documents","text":"<p>The library provides a set of methods to work with documents.</p> <pre><code>val documents = wallet.getDocuments()\n</code></pre> <p>You can also retrieve documents based on a predicate. The following snippet shows how to retrieve documents of mso_mdoc format of a specific docType:</p> <pre><code>val documents = wallet.getDocuments { document -&gt;\n    (document.format as MsoMdocFormat).docType == \"eu.europa.ec.eudi.pid.1\"\n}\n</code></pre> <p>The following snippet shows how to retrieve a document by its id:</p> <pre><code>val documentId = \"some_document_id\"\nval document: Document? = wallet.getDocumentById(documentId)\n</code></pre> <p>To delete a document, use the following code snippet:</p> <pre><code>try {\n    val documentId = \"some_document_id\"\n    val deleteResult = wallet.deleteDocumentById(documentId)\n    deleteResult.getOrThrow()\n} catch (e: Throwable) {\n    // Handle the exception\n}\n</code></pre>"},{"location":"Build/Build%20your%20Wallet/Android/Library%20Level/Manage%20Documents/#creating-and-storing-a-new-document","title":"Creating and storing a new document","text":"<p>Adding a new document to the wallet is a two-step process. First, a new document must be created using the <code>createDocument</code> method. The method returns an <code>UnsignedDocument</code> object that contains the keys that will be used for signing the proof of possession for the issuer. Creating a new document requires the document format and the create key settings. The create key settings can be used to specify the way the keys are created.</p> <p>When using the built-in <code>AndroidKeystoreSecureArea</code> implementation of the library, the <code>wallet.getDefaultCreateDocumentSettings()</code> extension can be used to create an instance of the appropriate <code>CreateDocumentSettings</code> class.</p> <p>After the document is created, the user must retrieve the document's data from the issuer and store it in the wallet using the storeIssuedDocument method.</p> <p>The following snippet demonstrates how to create a new document for the mso_mdoc format, using library's default implementation of CreateDocumentSettings.</p> <pre><code>try {\n    // create a new document\n    // Construct the CreateDocumentSettings object\n    val createSettings = wallet.getDefaultCreateDocumentSettings()\n\n    val createDocumentResult = wallet.createDocument(\n        format = MsoMdocFormat(docType = \"eu.europa.ec.eudi.pid.1\"),\n        createSettings = createSettings\n    )\n    val unsignedDocument = createDocumentResult.getOrThrow()\n    val publicKeyBytes = unsignedDocument.publicKeyCoseBytes\n\n    // prepare keyUnlockData to unlock the key\n    // here we use the default key unlock data for the document\n    // provided by the library\n    val keyUnlockData = unsignedDocument.DefaultKeyUnlockData\n    // proof of key possession\n    // Sign the documents public key with the private key\n    // before sending it to the issuer\n    val signatureResult =\n        unsignedDocument.sign(publicKeyBytes, keyUnlockData = keyUnlockData)\n    val signature = signatureResult.getOrThrow().toCoseEncoded()\n\n    // send the public key and the signature to the issuer\n    // and get the document data\n    val documentData = sendToIssuer(\n        publicKeyCoseBytes = publicKeyBytes,\n        signatureCoseBytes = signature\n    )\n\n    // store the issued document with the document data received from the issuer\n    val storeResult =\n        wallet.storeIssuedDocument(unsignedDocument, documentData)\n\n    // get the issued document\n    val issuedDocument = storeResult.getOrThrow()\n} catch (e: Throwable) {\n    // Handle the exception\n}\n\n// ...\n\nfun sendToIssuer(publicKeyCoseBytes: ByteArray, signatureCoseBytes: ByteArray): ByteArray {\n    TODO(\"Send publicKey and proof of possession signature to issuer and retrieve document's data\")\n}\n</code></pre> <p>Important!: In the case of <code>DocumentFormat.MsoMdoc</code>, the <code>DocumentManager.storeIssuedDocument()</code>  method expects the document's data to be in CBOR bytes and have the IssuerSigned structure according to ISO 23220-4.</p> <p>Currently, the library does not support IssuerSigned structure without the <code>nameSpaces</code> field.</p> <p>The following CDDL schema describes the structure of the IssuerSigned structure:</p> <pre><code>IssuerSigned = {\n ?\"nameSpaces\" : IssuerNameSpaces, ; Returned data elements\n \"issuerAuth\" : IssuerAuth ; Contains the mobile security object (MSO) for issuer data authentication\n}\nIssuerNameSpaces = { ; Returned data elements for each namespace\n + NameSpace =&gt; [ + IssuerSignedItemBytes ]\n}\nIssuerSignedItemBytes = #6.24(bstr .cbor IssuerSignedItem)\nIssuerSignedItem = {\n \"digestID\" : uint, ; Digest ID for issuer data authentication\n \"random\" : bstr, ; Random value for issuer data authentication\n \"elementIdentifier\" : DataElementIdentifier, ; Data element identifier\n \"elementValue\" : DataElementValue ; Data element value\n}\nIssuerAuth = COSE_Sign1 ; The payload is MobileSecurityObjectBytes\n</code></pre>"},{"location":"Build/Build%20your%20Wallet/Android/Library%20Level/Manage%20Documents/#working-with-sample-documents","title":"Working with sample documents","text":"<p>The wallet-core library provides a method to load sample documents easily. This feature is useful for demonstration or testing purposes.</p> <p>Currently, the library supports loading sample documents in MsoMdoc format.</p> <p>The following code snippet shows how to load sample documents:</p> <pre><code>val sampleMdocDocuments: ByteArray = readFileWithSampleData()\n\nval createSettings = wallet.getDefaultCreateDocumentSettings()\nval loadResult = wallet.loadMdocSampleDocuments(\n    sampleData = sampleMdocDocuments,\n    createSettings = createSettings,\n    documentNamesMap = mapOf(\n        \"eu.europa.ec.eudi.pid.1\" to \"EU PID\",\n        \"org.iso.18013.5.1.mDL\" to \"mDL\"\n    )\n)\n\nval documentIds: List&lt;DocumentId&gt; = loadResult.getOrThrow()\n\n// ...\n\nfun readFileWithSampleData(): ByteArray = TODO(\"Reads the bytes from file with sample documents\")\n</code></pre> <p>Sample documents must be in CBOR format with the following structure:</p> <pre><code>Data = {\n \"documents\" : [+Document] ; Sample documents\n}\nDocument = {\n \"docType\" : DocType, ; Document type returned\n \"issuerSigned\" : IssuerSigned ; Data elements\n}\nIssuerSigned = {\n \"nameSpaces\" : IssuerNameSpaces, ; Returned data elements\n}\nIssuerNameSpaces = { ; Returned data elements for each namespace\n + NameSpace =&gt; [ + IssuerSignedItemBytes ]\n}\nIssuerSignedItem = {\n \"digestID\" : uint, ; Digest ID for issuer data authentication\n \"random\" : bstr, ; Random value for issuer data authentication\n \"elementIdentifier\" : DataElementIdentifier, ; Data element identifier\n \"elementValue\" : DataElementValue ; Data element value\n}\n</code></pre>"},{"location":"Build/Build%20your%20Wallet/Android/Wallet%20Application%20Level/","title":"Build the App","text":"<p>Home / Build / Build your Wallet / Android / Wallet Application Level</p>"},{"location":"Build/Build%20your%20Wallet/Android/Wallet%20Application%20Level/#build-the-app","title":"Build the App","text":""},{"location":"Build/Build%20your%20Wallet/Android/Wallet%20Application%20Level/#overview","title":"Overview","text":"<p>This guide assists developers in building the EUDI Wallet application on Android.</p>"},{"location":"Build/Build%20your%20Wallet/Android/Wallet%20Application%20Level/#setup-eudi-wallet-application-on-android","title":"Setup EUDI Wallet application on Android","text":"<p>To build the application using the source code and connect it with the issuer and verifier, follow the next steps:</p> <ol> <li>Download and install Android Studio and its associated tools by following the official setup guide. Using the latest stable version is recommended.</li> <li>Clone the Android repository using the following command:     <code>git clone git@github.com:eu-digital-identity-wallet/eudi-app-android-wallet-ui.git</code></li> <li>Open the project in Android Studio.</li> <li> <p>Configure the Build Variant by navigating to Build -&gt; Select Build Variant and from the tool window you can click on the \"Active Build Variant\" of the module \":app\" and select the one you prefer. It will automatically apply to the other modules as well.</p> <p>The application has two product flavors:</p> <pre><code>- \"Dev\", which communicates with the services deployed in an environment based on the latest main branch.\n- \"Demo\", which communicates with the services deployed in an environment based on the latest main branch.\n</code></pre> <p>and two Build Types:</p> <pre><code>- \"Debug\", which has full logging enabled.\n- \"Release\", which has no logging enabled.\n</code></pre> <p>which, ultimately, result in the following Build Variants:</p> <pre><code>- \"devDebug\", \"devRelease\", \"demoDebug\", \"demoRelease\"\n</code></pre> </li> <li> <p>The App can be executed both on a device or on an emulator:</p> <ol> <li>To run the App on a device, firstly you must connect your device with the Android Studio, and then go to Run -&gt; Run 'app'.</li> <li>To run the App on an emulator, simply go to Run -&gt; Run 'app'.</li> </ol> </li> <li> <p>Finally, the App needs to be connected with an Issuer and a Verifier either locally, or remotely.</p> <ol> <li>Follow the instructions to run remotely.</li> <li>Follow the instructions to run locally.</li> </ol> </li> <li> <p>(Optional) Follow the instructions if self-signed certificates are required.</p> </li> </ol> <p>Check the full list of configuration options</p>"},{"location":"Build/Build%20your%20Wallet/Android/Wallet%20Application%20Level/Running%20with%20Local%20Services/","title":"Run with Local Services","text":"<p>Home / Build / Build your Wallet / Android / Wallet Application Level</p>"},{"location":"Build/Build%20your%20Wallet/Android/Wallet%20Application%20Level/Running%20with%20Local%20Services/#run-with-local-services","title":"Run with Local Services","text":"<p>The first step here is to have all three services running locally on your machine, you can follow these Repositories for further instructions: * Issuer * Web Verifier UI * Web Verifier Endpoint</p> <p>After this, and assuming you are now running everything locally, you need to change the contents of the ConfigWalletCoreImpl file, from: <pre><code>override val vciConfig: List&lt;OpenId4VciManager.Config&gt;\n    get() = listOf(\n       OpenId4VciManager.Config.Builder()\n      .withIssuerUrl(issuerUrl = \"https://ec.dev.issuer.eudiw.dev\")\n      .withClientId(clientId = \"wallet-dev\")\n      .withAuthFlowRedirectionURI(BuildConfig.ISSUE_AUTHORIZATION_DEEPLINK)\n      .withParUsage(OpenId4VciManager.Config.ParUsage.IF_SUPPORTED)\n      .withDPoPUsage(OpenId4VciManager.Config.DPoPUsage.IfSupported())\n      .build()\n)\n</code></pre> with this: <pre><code>override val vciConfig: List&lt;OpenId4VciManager.Config&gt;\n    get() = listOf(\n       OpenId4VciManager.Config.Builder()\n      .withIssuerUrl(issuerUrl = \"local_IP_address_of_issuer\")\n      .withClientId(clientId = \"wallet-dev\")\n      .withAuthFlowRedirectionURI(BuildConfig.ISSUE_AUTHORIZATION_DEEPLINK)\n      .withParUsage(OpenId4VciManager.Config.ParUsage.IF_SUPPORTED)\n      .withDPoPUsage(OpenId4VciManager.Config.DPoPUsage.IfSupported())\n      .build()\n)\n</code></pre></p> <p>for example: <pre><code>override val vciConfig: List&lt;OpenId4VciManager.Config&gt;\n    get() = listOf(\n       OpenId4VciManager.Config.Builder()\n      .withIssuerUrl(issuerUrl = \"https://10.0.2.2\")\n      .withClientId(clientId = \"wallet-dev\")\n      .withAuthFlowRedirectionURI(BuildConfig.ISSUE_AUTHORIZATION_DEEPLINK)\n      .withParUsage(OpenId4VciManager.Config.ParUsage.IF_SUPPORTED)\n      .withDPoPUsage(OpenId4VciManager.Config.DPoPUsage.IfSupported())\n      .build()\n)\n</code></pre></p>"},{"location":"Build/Build%20your%20Wallet/Android/Wallet%20Application%20Level/Running%20with%20Remote%20Services/","title":"Run with Remote Services","text":"<p>Home / Build / Build your Wallet / Android / Wallet Application Level</p>"},{"location":"Build/Build%20your%20Wallet/Android/Wallet%20Application%20Level/Running%20with%20Remote%20Services/#run-with-remote-services","title":"Run with Remote Services","text":"<p>The app is configured to use some configuration in the two ConfigWalletCoreImpl.kt files (located in the \"core-logic\" module, in either srcdevjavaeueuropaeccorelogicconfig or srcdemojavaeueuropaeccorelogicconfig, depending on the flavor of your choice).</p> <p>These are the contents of the ConfigWalletCoreImpl file (dev flavor), and you don't need to change anything: <pre><code>override val vciConfig: List&lt;OpenId4VciManager.Config&gt;\n    get() = listOf(\n       OpenId4VciManager.Config.Builder()\n      .withIssuerUrl(issuerUrl = \"https://ec.dev.issuer.eudiw.dev\")\n      .withClientId(clientId = \"wallet-dev\")\n      .withAuthFlowRedirectionURI(BuildConfig.ISSUE_AUTHORIZATION_DEEPLINK)\n      .withParUsage(OpenId4VciManager.Config.ParUsage.IF_SUPPORTED)\n      .withDPoPUsage(OpenId4VciManager.Config.DPoPUsage.IfSupported())\n      .build()\n)\n</code></pre></p>"},{"location":"Build/Build%20your%20Wallet/Android/Wallet%20Application%20Level/Self-signed%20Certificates/","title":"Self-signed Certificates","text":"<p>Home / Build / Build your Wallet / Android / Wallet Application Level</p>"},{"location":"Build/Build%20your%20Wallet/Android/Wallet%20Application%20Level/Self-signed%20Certificates/#self-signed-certificates","title":"Self-signed Certificates","text":"<p>This section describes how to configure the application to interact with services utilizing self-signed certificates.</p> <ol> <li>Open the build.gradle.kts file of the \"core-logic\" module.</li> <li>In the 'dependencies' block add the following two:     <pre><code>implementation(libs.ktor.android)\nimplementation(libs.ktor.logging)\n</code></pre></li> <li>Now, you need to create a new Kotlin file ProvideKtorHttpClient.kt and place it into the <code>src\\main\\java\\eu\\europa\\ec\\corelogic\\config</code> package.</li> <li>Copy and paste the following code into your newly created ProvideKtorHttpClient.kt file.     <pre><code>import android.annotation.SuppressLint\nimport io.ktor.client.HttpClient\nimport io.ktor.client.engine.android.Android\nimport io.ktor.client.plugins.logging.Logging\nimport java.security.SecureRandom\nimport javax.net.ssl.HostnameVerifier\nimport javax.net.ssl.SSLContext\nimport javax.net.ssl.TrustManager\nimport javax.net.ssl.X509TrustManager\nimport javax.security.cert.CertificateException\n\nobject ProvideKtorHttpClient {\n\n    @SuppressLint(\"TrustAllX509TrustManager\", \"CustomX509TrustManager\")\n    fun client(): HttpClient {\n        val trustAllCerts = arrayOf&lt;TrustManager&gt;(\n            object : X509TrustManager {\n                @Throws(CertificateException::class)\n                override fun checkClientTrusted(\n                    chain: Array&lt;java.security.cert.X509Certificate&gt;,\n                    authType: String\n                ) {\n                }\n\n                @Throws(CertificateException::class)\n                override fun checkServerTrusted(\n                    chain: Array&lt;java.security.cert.X509Certificate&gt;,\n                    authType: String\n                ) {\n                }\n\n                override fun getAcceptedIssuers(): Array&lt;java.security.cert.X509Certificate&gt; {\n                    return arrayOf()\n                }\n            }\n        )\n\n        return HttpClient(Android) {\n            install(Logging)\n            engine {\n                requestConfig\n                sslManager = { httpsURLConnection -&gt;\n                    httpsURLConnection.sslSocketFactory = SSLContext.getInstance(\"TLS\").apply {\n                        init(null, trustAllCerts, SecureRandom())\n                    }.socketFactory\n                    httpsURLConnection.hostnameVerifier = HostnameVerifier { _, _ -&gt; true }\n                }\n            }\n        }\n    }\n\n}\n</code></pre></li> <li>Also, add this custom HttpClient to the EUDI Wallet provider function provideEudiWallet located in LogicCoreModule.kt <pre><code>@Single\nfun provideEudiWallet(\ncontext: Context,\nwalletCoreConfig: WalletCoreConfig,\nwalletCoreLogController: WalletCoreLogController\n): EudiWallet = EudiWallet(context, walletCoreConfig.config) {\n    withLogger(walletCoreLogController)\n    // Custom HttpClient\n    withKtorHttpClientFactory {\n        ProvideKtorHttpClient.client()\n    }\n}\n</code></pre></li> <li>Finally, you need to use the preregistered clientId scheme instead of X509.</li> </ol> <p>Change this:    <pre><code>withClientIdSchemes(\n listOf(ClientIdScheme.X509SanDns)\n)\n ```\n\ninto something like this:\n```Kotlin\nwithClientIdSchemes(\n listOf(\n     ClientIdScheme.Preregistered(\n         preregisteredVerifiers =\n             listOf(\n                 PreregisteredVerifier(\n                     clientId = \"Verifier\",\n                     legalName = \"Verifier\",\n                     verifierApi = \"https://10.0.2.2\"\n                 )\n             )\n         )\n     )\n)\n</code></pre></p>"},{"location":"Build/Build%20your%20Wallet/iOS/","title":"Index","text":"<p>Home </p>"},{"location":"Build/Build%20your%20Wallet/iOS/Library%20Level/","title":"Library Level","text":"<p>Home / Build / Build your Wallet / iOS / Library Level</p>"},{"location":"Build/Build%20your%20Wallet/iOS/Library%20Level/#eudi-wallet-kit-library-for-ios","title":"EUDI Wallet Kit library for iOS","text":""},{"location":"Build/Build%20your%20Wallet/iOS/Library%20Level/#overview","title":"Overview","text":"<p>This repository contains the EUDI Wallet Kit library for iOS. The library is part of the EUDI Wallet Reference Implementation project.</p> <p>This library acts as a coordinator, by orchestrating the various components that are required to implement the EUDI Wallet functionality. On top of that, it provides a simplified API that can be used by the application to implement the EUDI Wallet functionality.</p> <p>The library provides the following functionality:</p> <ul> <li>Document management<ul> <li> Storage encryption</li> <li> Using iOS Secure Enclave for generating/storing documents' keypair</li> <li> Enforcing device user authentication when retrieving documents' private keys</li> </ul> </li> <li>Document issuance<ul> <li> Support for OpenId4VCI document issuance<ul> <li> Authorization Code Flow</li> <li> Pre-authorization Code Flow</li> <li> Support for mso_mdoc format</li> <li> Support for sd-jwt-vc format</li> <li> Support credential offer</li> <li> Support for DPoP JWT in authorization</li> <li> Support for JWT and CWT proof types</li> <li> Support for deferred issuing</li> </ul> </li> </ul> </li> <li>Proximity document presentation<ul> <li> Support for ISO-18013-5 device retrieval<ul> <li> QR device engagement</li> <li> BLE data transfer</li> </ul> </li> </ul> </li> <li>Remote document presentation<ul> <li> OpenId4VP document transfer<ul> <li> For pre-registered verifiers</li> <li> Dynamic registration of verifiers</li> </ul> </li> </ul> </li> </ul> <p>The library is written in Swift and is compatible with iOS 14 or higher. It is distributed as a Swift package and can be included in any iOS project.</p> <p>It is based on the following specifications:</p> <ul> <li>ISO/IEC 18013-5 \u2013 Published</li> <li>Presentation Exchange v2.0.0 - Published</li> <li>OpenID4VP \u2013 Draft 18</li> <li>SIOPv2 \u2013 Draft</li> </ul>"},{"location":"Build/Build%20your%20Wallet/iOS/Library%20Level/Build%20the%20Kit/","title":"Build the Kit","text":"<p>Home / Build / Build your Wallet / iOS / Library Level</p>"},{"location":"Build/Build%20your%20Wallet/iOS/Library%20Level/Build%20the%20Kit/#build-the-kit","title":"Build the Kit","text":"<p>To use EUDI Wallet Kit, add the following dependency to your Package.swift: <pre><code>dependencies: [\n    .package(url: \"https://github.com/eu-digital-identity-wallet/eudi-lib-ios-wallet-kit.git\", .upToNextMajor(from: \"0.6.6\"))\n]\n</code></pre></p> <p>Then add the Eudi Wallet package to your target's dependencies: <pre><code>dependencies: [\n    .product(name: \"EudiWalletKit\", package: \"eudi-lib-ios-wallet-kit\"),\n]\n</code></pre></p>"},{"location":"Build/Build%20your%20Wallet/iOS/Library%20Level/Build%20the%20Kit/#reference","title":"Reference","text":"<p>For detailed documentation, refer to the DocC documentation available in the project's repository.</p>"},{"location":"Build/Build%20your%20Wallet/iOS/Library%20Level/Build%20the%20Kit/#initialisation","title":"Initialisation","text":"<p>The library provides a unified API for the two user attestation presentation flows. It is initialized with a document storage manager instance. For SwiftUI apps, the wallet instance can be added as an <code>environmentObject</code> to be accessible from all views. A KeyChain implementation of document storage is available.</p> <p>The wallet developer can customize cryptographic key operations by passing <code>SecureArea</code> instances to the wallet, otherwise the wallet-kit creates 'SecureEnclave' (default) and 'Software' secure areas. The wallet developer can specify key creation options per doc-type such as curve type, secure area name, and key unlock policy.</p> <pre><code>let wallet = try! EudiWallet(serviceName: \"my_wallet_app\",\n   trustedReaderCertificates: [Data(name: \"eudi_pid_issuer_ut\", ext: \"der\")!] )\n</code></pre>"},{"location":"Build/Build%20your%20Wallet/iOS/Library%20Level/Manage%20Documents/","title":"Manage Documents","text":"<p>Home / Build / Build your Wallet / iOS / Library Level</p>"},{"location":"Build/Build%20your%20Wallet/iOS/Library%20Level/Manage%20Documents/#manage-documents","title":"Manage Documents","text":"<p>The library provides a set of methods to work with documents.</p>"},{"location":"Build/Build%20your%20Wallet/iOS/Library%20Level/Manage%20Documents/#load-documents","title":"Load Documents","text":"<p>The <code>loadDocuments</code> method returns documents with a specific status from storage.</p> <p>The following example shows how to retrieve issued documents:</p> <pre><code> public func loadDocuments() async throws {\n    let documents = try await wallet.loadDocuments(status: .issued)\n  }\n</code></pre> <p>To retrieve documents of all statuses use the <code>loadAllDocuments</code> method.</p> <pre><code>let documents = try await wallet.loadAllDocuments()\n</code></pre> <p>The <code>loadDocument(id:status:)</code> method returns a document with a given id and status. </p> <p>The following example shows how to retrieve a document:</p> <pre><code>let document = try await wallet.loadDocument(id: documentId, status: .issued)\n</code></pre>"},{"location":"Build/Build%20your%20Wallet/iOS/Library%20Level/Manage%20Documents/#storage-manager","title":"Storage Manager","text":"<p>The read-only property <code>storage</code> is an instance of a StorageManager class. Currently the keychain implementation is used. It provides document management functionality using the iOS KeyChain.</p> <p>The storage model provides the following models for the supported well-known document types:</p> DocType Model eu.europa.ec.eudiw.pid.1 EuPidModel org.iso.18013.5.1.mDL IsoMdlModel <p>Since the issued mDoc documents that are retrieved expose only basic metadata and raw data, they must be decoded into the corresponding CBOR models. The library provides the <code>StorageManager\\toClaimsModel</code> function to decode document raw CBOR data to strongly-typed models conforming to DocClaimsDecodable protocol. </p> <p>The loading functions automatically update the members of the <code>StorageManager</code>. The decoded issued documents are available in the <code>docModels</code> property. The deferred and pending documents are available in the <code>StorageManager\\deferredDocuments</code> and <code>StorageManager\\pendingDocuments</code> properties respectively.</p> <p>For other document types the GenericMdocModel is provided.</p>"},{"location":"Build/Build%20your%20Wallet/iOS/Library%20Level/Manage%20Documents/#delete-documents","title":"Delete Documents","text":"<p>The <code>deleteDocument(id:)</code> method that deletes a document with the given id.</p> <p>The following example shows how to delete a document:</p> <pre><code>try await wallet.deleteDocument(id: documentId)\n</code></pre>"},{"location":"Build/Build%20your%20Wallet/iOS/Wallet%20Application%20Level/","title":"Build the App","text":"<p>Home / Build / Build your Wallet / iOS / Wallet Application Level</p>"},{"location":"Build/Build%20your%20Wallet/iOS/Wallet%20Application%20Level/#build-the-app","title":"Build the App","text":""},{"location":"Build/Build%20your%20Wallet/iOS/Wallet%20Application%20Level/#overview","title":"Overview","text":"<p>This guide aims to assist developers to build the EUDI Wallet application on iOS.</p>"},{"location":"Build/Build%20your%20Wallet/iOS/Wallet%20Application%20Level/#setup-eudi-wallet-application-on-ios","title":"Setup EUDI Wallet application on iOS","text":"<ol> <li>Download and install Xcode and its associated tools by following the official setup guide. Using the latest stable version is recommended.</li> <li>Clone the iOS repository using the following command:     <code>git clone git@github.com:eu-digital-identity-wallet/eudi-app-ios-wallet-ui.git</code></li> <li>Open the project file in Xcode.</li> <li> <p>The application has two schemes: \"EUDI Wallet Dev\" and \"EUDI Wallet Demo\" that can be configured in the xcconfig files located under the Config folder in the project.</p> <p>The application has two product flavors:</p> <pre><code>- \"Dev\", which communicates with the services deployed in an environment based on the latest main branch.\n- \"Demo\", which communicates with the services deployed in an environment based on the latest main branch.\n</code></pre> <p>and two Build Types:</p> <pre><code>- \"Debug\", which has full logging enabled, used when running the app from within Xcode.\n- \"Release\", which has no logging enabled, used when running the app after it has been distributed via a distribution platform, currently TestFlight.\n</code></pre> <p>which, ultimately, result in the following Build Variants:</p> <pre><code>- \"devDebug\", \"devRelease\", \"demoDebug\", \"demoRelease\"\n</code></pre> </li> <li> <p>The App can be executed both on a device or on an emulator:</p> <ol> <li>To run the app on the simulator, select your app schema and press Run.</li> <li>To run the app on a device, follow similar steps to running it on the simulator. Additionally, you need to supply your own provisioning profile and signing certificate in the Signing &amp; Capabilities tab of your app target.</li> </ol> </li> <li> <p>Finally, the App needs to be connected with an Issuer and a Verifier either locally, or remotely.</p> <ol> <li>Follow the instructions to run remotely.</li> <li>Follow the instructions to run locally.</li> </ol> </li> <li> <p>(Optional) Follow the instructions if self-signed certificates are required.</p> </li> </ol> <p>For a complete list of all configuration options, refer to this document</p>"},{"location":"Build/Build%20your%20Wallet/iOS/Wallet%20Application%20Level/Running%20with%20Local%20Services/","title":"Run with Local Services","text":"<p>Home / Build / Build your Wallet / iOS / Wallet Application Level</p>"},{"location":"Build/Build%20your%20Wallet/iOS/Wallet%20Application%20Level/Running%20with%20Local%20Services/#run-with-local-services","title":"Run with Local Services","text":"<p>The first step here is to have all three services running locally on your machine. You can follow these Repositories for further instructions: * Issuer * Web Verifier UI * Web Verifier Endpoint</p>"},{"location":"Build/Build%20your%20Wallet/iOS/Wallet%20Application%20Level/Running%20with%20Remote%20Services/","title":"Run with Remote Services","text":"<p>Home / Build / Build your Wallet / iOS / Wallet Application Level</p>"},{"location":"Build/Build%20your%20Wallet/iOS/Wallet%20Application%20Level/Running%20with%20Remote%20Services/#run-with-remote-services","title":"Run with Remote Services","text":"<p>The app is configured to the type (debug/release) and variant (dev/demo) in the four xcconfig files. These are the contents of the xcconfig file, and you don't need to change anything if you don't want to:</p> <pre><code>BUILD_TYPE = RELEASE\nBUILD_VARIANT = DEMO\n</code></pre> <p>The values defined in the <code>.xcconfig</code> files are utilized within instances of <code>WalletKitConfig</code> and <code>RQESConfig</code> to assign the appropriate configurations. These configurations are selected based on the specified build type and build variant defined in the <code>.xcconfig</code> files.</p> <p>Instances of <code>ConfigLogic</code> are responsible for interpreting the raw string values extracted from the <code>.xcconfig</code> files and converting them into appropriate data types.</p> <pre><code>/**\n * Build type.\n */\nvar appBuildType: AppBuildType { get }\n\n/**\n * Build variant.\n */\nvar appBuildVariant: AppBuildVariant { get }\n</code></pre> <p>Using this parsed information, instances such as <code>WalletKitConfig</code> and <code>RQESConfig</code> can determine and assign their specific configurations based on the defined build type and variant.</p> <p>For instance, here's how <code>WalletKitConfig</code> resolves its configuration for OpenID4VCI remote services based on the build variant:</p> <pre><code>var vciConfig: [String: OpenId4VciConfiguration] {\n  let openId4VciConfigurations: [OpenId4VciConfiguration] = {\n    switch configLogic.appBuildVariant {\n    case .DEMO:\n      return [\n        .init(\n          credentialIssuerURL: \"https://ec.issuer.eudiw.dev\",\n          client: .public(id: \"wallet-dev\"),\n          authFlowRedirectionURI: URL(string: \"eu.europa.ec.euidi://authorization\")!,\n          usePAR: true,\n          useDpopIfSupported: true,\n          cacheIssuerMetadata: true\n        )\n    case .DEV:\n      return [\n        .init(\n          credentialIssuerURL: \"https://ec.dev.issuer.eudiw.dev\",\n          client: .public(id: \"wallet-dev\"),\n          authFlowRedirectionURI: URL(string: \"eu.europa.ec.euidi://authorization\")!,\n          usePAR: true,\n          useDpopIfSupported: true,\n          cacheIssuerMetadata: true\n        )\n      ]\n    }\n  }()\n\n  // ...\n}\n</code></pre> <p>In this example, the <code>vciConfig</code> property dynamically assigns configurations, such as <code>issuerUrl</code>, <code>clientId</code>, <code>redirectUri</code>, <code>usePAR</code>, <code>useDPoP</code>, and <code>metadataCache</code>, based on the current <code>appBuildVariant</code>. This ensures that the appropriate settings are applied for each variant (e.g., <code>.DEMO</code> or <code>.DEV</code>).</p>"},{"location":"Build/Build%20your%20Wallet/iOS/Wallet%20Application%20Level/Self-signed%20Certificates/","title":"Self-signed Certificates","text":"<p>Home / Build / Build your Wallet / iOS / Wallet Application Level</p>"},{"location":"Build/Build%20your%20Wallet/iOS/Wallet%20Application%20Level/Self-signed%20Certificates/#self-signed-certificates","title":"Self-signed Certificates","text":"<p>In addition to the change below, to enable the app to interact with a locally running service, a minor code change is required for successful interaction.</p> <p>Before running the app in the simulator, add these lines of code to the top of the file WalletKitController just below the import statements.</p> <pre><code>final class SelfSignedDelegate: NSObject, URLSessionDelegate {\n  func urlSession(\n    _ session: URLSession,\n    didReceive challenge: URLAuthenticationChallenge,\n    completionHandler: @escaping (URLSession.AuthChallengeDisposition, URLCredential?) -&gt; Void\n  ) {\n    // Check if the challenge is for a self-signed certificate\n    if challenge.protectionSpace.authenticationMethod == NSURLAuthenticationMethodServerTrust,\n       let trust = challenge.protectionSpace.serverTrust {\n      // Create a URLCredential with the self-signed certificate\n      let credential = URLCredential(trust: trust)\n      // Call the completion handler with the credential to accept the self-signed certificate\n      completionHandler(.useCredential, credential)\n    } else {\n      // For other authentication methods, call the completion handler with a nil credential to reject the request\n      completionHandler(.cancelAuthenticationChallenge, nil)\n    }\n  }\n}\n\nlet walletSession: URLSession = {\n  let delegate = SelfSignedDelegate()\n  let configuration = URLSessionConfiguration.default\n  return URLSession(\n    configuration: configuration,\n    delegate: delegate,\n    delegateQueue: nil\n  )\n}()\n</code></pre> <p>Once the above is in place, adjust the initializer:</p> <pre><code>guard let walletKit = try? EudiWallet(serviceName: configLogic.documentStorageServiceName, networking: walletSession) else {\n  fatalError(\"Unable to Initialize WalletKit\")\n}\n</code></pre> <p>This change will allow the app to interact with web services that rely on self-signed certificates.</p>"},{"location":"Build/Build%20your%20rQES/","title":"Build your rQES","text":"<p>Home / Build / Build your rQES</p>"},{"location":"Build/Build%20your%20rQES/#build-your-rqes","title":"Build your rQES","text":""},{"location":"Build/Build%20your%20rQES/#overview","title":"Overview","text":""},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20Core%20for%20Android/","title":"Build your rQES Core for Android","text":"<p>Home / Build / Build your rQES</p>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20Core%20for%20Android/#build-your-rqes-core-for-android","title":"Build your rQES Core for Android","text":""},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20Kit%20for%20iOS/","title":"Build your rQES Kit for iOS","text":"<p>Home / Build / Build your rQES</p>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20Kit%20for%20iOS/#build-your-rqes-kit-for-ios","title":"Build your rQES Kit for iOS","text":""},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20Android/","title":"Build your rQES SDK UI for Android","text":"<p>Home / Build / Build your rQES</p>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20Android/#build-your-rqes-sdk-ui-for-android","title":"Build your rQES SDK UI for Android","text":"<p>The EUDI RQES UI SDK provides user interface components and integration logic for enabling Remote Qualified Electronic Signatures (RQES) in Android applications. It is part of the EUDI Wallet ecosystem, allowing integrators to embed RQES flows \u2014 including document signing and Qualified Trust Service Provider (QTSP) communication \u2014 within their own applications.</p> <p>This document focuses on how to integrate and use the SDK in your Android project.</p>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20Android/#overview","title":"Overview","text":"<p>The RQES UI SDK offers ready-to-use UI screens and the underlying logic to handle:</p> <ul> <li>Signature initiation (local or remote)</li> <li>QTSP interactions (authentication, signing, and timestamping)</li> <li>User authorization and OAuth redirection flows</li> <li>Document retrieval and validation</li> </ul> <p>The entry point is the <code>EudiRQESUi</code> object, which exposes setup and flow-control functions. Runtime and visual behavior are configured via the <code>EudiRQESUiConfig</code> interface.</p>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20Android/#requirements","title":"Requirements","text":"<ul> <li>Android 10 (API level 29) or higher</li> </ul>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20Android/#installation","title":"Installation","text":"<p>Add the SDK dependency to your app\u2019s <code>build.gradle</code> file:</p> <pre><code>dependencies {\n    implementation(\"eu.europa.ec.eudi:eudi-lib-android-rqes-ui:&lt;version&gt;\")\n}\n</code></pre> <p>Replace <code>&lt;version&gt;</code> with the latest published release available on Maven Central.</p>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20Android/#integration-guide","title":"Integration Guide","text":""},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20Android/#1-implement-the-sdk-configuration","title":"1. Implement the SDK Configuration","text":"<p>Create your own implementation of <code>EudiRQESUiConfig</code> to provide all required parameters for your integration.</p> <pre><code>class RQESConfigImpl(\n    private val context: Context\n) : EudiRQESUiConfig {\n\n    override val qtsps: List&lt;QtspData&gt;\n        get() = listOf(\n            QtspData(\n                name = \"your_name\",\n                endpoint = \"your_endpoint\".toUriOrEmpty(),\n                tsaUrl = \"your_tsaUrl\",\n                clientId = \"your_clientid\",\n                clientSecret = \"your_secret\",\n                authFlowRedirectionURI = URI.create(\"your_registered_deeplink\"),\n                hashAlgorithm = HashAlgorithmOID.SHA_256,\n            )\n        )\n\n    override val printLogs: Boolean get() = BuildConfig.DEBUG\n\n    override val documentRetrievalConfig: DocumentRetrievalConfig\n        get() = DocumentRetrievalConfig.X509Certificates(\n            context = context,\n            certificates = listOf(R.raw.my_certificate),\n            shouldLog = should_log_option\n        )\n}\n</code></pre> <p>You can optionally override:</p> <ul> <li><code>translations</code> \u2014 to provide custom localization</li> <li><code>themeManager</code> \u2014 to adjust the UI appearance</li> <li><code>printLogs</code> \u2014 to enable or disable SDK logging</li> </ul>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20Android/#2-configure-oauth-and-deep-links","title":"2. Configure OAuth and Deep Links","text":""},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20Android/#oauth-redirect-handling","title":"OAuth Redirect Handling","text":"<p>Register the <code>authFlowRedirectionURI</code> in your app manifest. This allows the RQES Service to redirect the user back to your app after authentication.</p> <pre><code>&lt;intent-filter&gt;\n    &lt;action android:name=\"android.intent.action.VIEW\" /&gt;\n\n    &lt;category android:name=\"android.intent.category.DEFAULT\" /&gt;\n    &lt;category android:name=\"android.intent.category.BROWSABLE\" /&gt;\n\n    &lt;data\n        android:host=\"oauth\"\n        android:path=\"/callback\"\n        android:scheme=\"rqes://\" /&gt;\n\n&lt;/intent-filter&gt;\n</code></pre> <p>Alternatively, you can use Android App Links Google Documentation</p> <p>You must extract the <code>code</code> query parameter from this redirect and pass it to the SDK (see \u201cResuming a Flow\u201d below).</p>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20Android/#document-retrieval-same-device-scenario","title":"Document Retrieval (Same Device Scenario)","text":"<p>If your use case supports same-device document retrieval, register an additional deep link in your manifest:</p> <pre><code>&lt;intent-filter&gt;\n    &lt;action android:name=\"android.intent.action.VIEW\" /&gt;\n\n    &lt;category android:name=\"android.intent.category.DEFAULT\" /&gt;\n    &lt;category android:name=\"android.intent.category.BROWSABLE\" /&gt;\n\n    &lt;data\n        android:host=\"your_host\"\n        android:scheme=\"your_scheme://\" /&gt;\n\n&lt;/intent-filter&gt;\n</code></pre> <p>This enables the RQES Service to trigger your app and pass a remote URL to initialize a same-device retrieval flow.</p>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20Android/#3-initialize-the-sdk","title":"3. Initialize the SDK","text":"<p>Initialize the SDK in your Application class by providing your application context, configuration, and, if you are using Koin for dependency injection, the KoinApplication.</p> <pre><code>EudiRQESUi.setup(\n    application = application_context,\n    config = rqes_config,\n    koinApplication = koinapplication_if_applicable\n)\n</code></pre> <p>This makes the SDK ready to handle all signing and retrieval operations.</p>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20Android/#4-start-the-signing-process","title":"4. Start the Signing Process","text":"<p>You can start an RQES signing session in one of two ways.</p>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20Android/#option-a-sign-a-local-file","title":"Option A: Sign a Local File","text":"<pre><code>EudiRQESUi.initiate(\n    context = activity_context,\n    documentUri = DocumentUri(file_uri)\n)\n</code></pre>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20Android/#option-b-retrieve-and-sign-a-remote-document","title":"Option B: Retrieve and Sign a Remote Document","text":"<pre><code>EudiRQESUi.initiate(\n    context = activity_context,\n    remoteUri = RemoteUri(remote_uri)\n)\n</code></pre>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20Android/#5-resume-a-flow-after-oauth-redirect","title":"5. Resume a Flow After OAuth Redirect","text":"<p>When the OAuth redirect deep link triggers your app, retrieve the <code>code</code> query parameter and resume the RQES process:</p> <p><pre><code>EudiRQESUi.resume(\n    context = activity_context,\n    authorizationCode = code\n)\n</code></pre> This continues the signing flow and completes the RQES transaction with the QTSP.</p> <p>The source code is available here.</p>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20iOS/","title":"Build your rQES SDK UI for iOS","text":"<p>Home / Build / Build your rQES</p>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20iOS/#build-your-rqes-sdk-ui-for-ios","title":"Build your rQES SDK UI for iOS","text":""},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20iOS/#overview","title":"Overview","text":"<p>The EUDI RQES UI SDK for iOS provides user interface components and integration logic for enabling Remote Qualified Electronic Signatures (RQES) in iOS applications. It is part of the EUDI Wallet ecosystem, allowing integrators to embed RQES flows \u2014 including document signing and Qualified Trust Service Provider (QTSP) communication \u2014 within their own apps.</p> <p>The entry point is the <code>EudiRQESUi</code> actor, which defines methods for configuring, initializing, and using the SDK. Runtime and visual behavior can be customized through the <code>EudiRQESUiConfig</code> protocol.</p>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20iOS/#requirements","title":"Requirements","text":"<ul> <li>iOS 16 or higher</li> </ul>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20iOS/#installation","title":"Installation","text":""},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20iOS/#swift-package-manager","title":"Swift Package Manager","text":"<p>Open <code>Xcode</code>, go to <code>File -&gt; Swift Packages -&gt; Add Package Dependency</code>, and enter <code>https://github.com/eu-digital-identity-wallet/eudi-lib-ios-rqes-ui.git</code></p> <p>You can also add <code>EudiRQESUi</code> as a dependency to your <code>Package.swift</code>: <pre><code>dependencies: [\n  .package(url: \"https://github.com/eu-digital-identity-wallet/eudi-lib-ios-rqes-ui.git\", from: \"LATEST_RELEASE\")\n]\n</code></pre></p> <pre><code> targets: [\n    .target(\n      dependencies: [\n        .product(\n          name: \"EudiRQESUi\",\n          package: \"eudi-lib-ios-rqes-ui\"\n        )\n      ]\n    )\n</code></pre>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20iOS/#how-to-use","title":"How to use","text":""},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20iOS/#configuration","title":"Configuration","text":"<p>Implement the <code>EudiRQESUiConfig</code> protocol and supply all the necessary options for the SDK.</p> <pre><code>final class RQESConfigImpl: EudiRQESUiConfig {\n\n  var rssps: [QTSPData]\n\n  // Optional. Default is false.\n  var printLogs: Bool\n\n  // Optional. Default English translations will be used if not set.\n  var translations: [String : [LocalizableKey : String]]\n\n  // Optional. Default theme will be used if not set.\n  var theme: ThemeProtocol\n}\n</code></pre> <p>Example:</p> <pre><code>final class RQESConfigImpl: EudiRQESUiConfig {\n\n  var rssps: [QTSPData] {\n    return .init(\n            name: \"your_dev_name\",\n            rsspId: \"your_dev_rssp\",\n            tsaUrl: \"your_dev_tsa\",\n            clientId: \"your_dev_clientid\",\n            clientSecret: \"your_dev_secret\",\n            authFlowRedirectionURI: \"your_registered_deeplink\",\n            hashAlgorithm: .SHA256,\n            includeRevocationInfo: false\n        )\n  }\n\n  var printLogs: Bool {\n    true\n  }\n}\n</code></pre>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20iOS/#setup","title":"Setup","text":"<p>Register the <code>authFlowRedirectionURI</code> in your application's plist to ensure the RQES Service can trigger your application. It is the application's responsibility to retrieve the <code>code</code> query parameter from the deep link and pass it to the SDK to continue the flow.</p> <pre><code>&lt;array&gt;\n    &lt;dict&gt;\n        &lt;key&gt;CFBundleTypeRole&lt;/key&gt;\n        &lt;string&gt;Editor&lt;/string&gt;\n        &lt;key&gt;CFBundleURLName&lt;/key&gt;\n        &lt;string&gt;$(PRODUCT_BUNDLE_IDENTIFIER)&lt;/string&gt;\n        &lt;key&gt;CFBundleURLSchemes&lt;/key&gt;\n        &lt;array&gt;\n            &lt;string&gt;rqes&lt;/string&gt;\n        &lt;/array&gt;\n    &lt;/dict&gt;\n&lt;/array&gt;\n</code></pre> <p>Alternatively, you can use universal app links with associated domains Apple Documentation</p> <p>Initialize the SDK by providing your configuration. You must first ensure instance availability before performing any actions</p> <pre><code>let eudiRQESUi: EudiRQESUi\ndo {\n  eudiRQESUi = try EudiRQESUi.instance()\n} catch {\n  eudiRQESUi = await EudiRQESUi.init(config: rqes_config)\n}\n</code></pre>"},{"location":"Build/Build%20your%20rQES/Build%20your%20rQES%20SDK%20UI%20for%20iOS/#initialization","title":"Initialization","text":"<p>Start the signing process by providing your TopViewController and the URL of the selected file.</p> <pre><code>try await EudiRQESUi.instance().initiate(\n  on: view_controller,\n  fileUrl: file_url\n)\n</code></pre> <p>Resume the signing process once the <code>authFlowRedirectionURI</code> triggers your application following the PID presentation process. Provide your TopViewController and the extracted code from the <code>authFlowRedirectionURI</code> deep link.</p> <pre><code>try await EudiRQESUi.instance().resume(\n  on: view_controller,\n  authorizationCode: code\n)\n</code></pre> <p>If you are using SwiftUI, you can retrieve the TopViewController using the bundled SDK's UIApplication extension function. Please note that if the application is transitioning from the background to the foreground, this function may return nil for the first ~500 milliseconds.</p> <pre><code>let controller = await UIApplication.shared.topViewController()\n</code></pre> <p>The source code is available here.</p>"},{"location":"Build/Supporting%20Ecosystem%20Services/","title":"Supporting Ecosystem Services","text":"<p>Home / Build / Supporting Ecosystem Services</p>"},{"location":"Build/Supporting%20Ecosystem%20Services/#supporting-ecosystem-services","title":"Supporting Ecosystem Services","text":""},{"location":"Build/Supporting%20Ecosystem%20Services/#overview","title":"Overview","text":""},{"location":"Build/Supporting%20Ecosystem%20Services/RP%20Registration%20Service/","title":"RP Registration Service","text":"<p>Home / Build / Supporting Ecosystem Services</p>"},{"location":"Build/Supporting%20Ecosystem%20Services/RP%20Registration%20Service/#rp-registration-service","title":"RP Registration Service","text":"<p>In this section, you will find comprehensive guidance on how to use the EUDI Wallet Reference Implementation RP Registration Service.</p>"},{"location":"Build/Supporting%20Ecosystem%20Services/RSSP/","title":"RSSP","text":"<p>Home / Build / Supporting Ecosystem Services</p>"},{"location":"Build/Supporting%20Ecosystem%20Services/RSSP/#rssp","title":"RSSP","text":"<p>In this section, you will find comprehensive guidance on how to use the EUDI Wallet Reference Implementation RSSP.</p>"},{"location":"Build/Supporting%20Ecosystem%20Services/Revocation%20Service/","title":"Revocation Service","text":"<p>Home / Build / Supporting Ecosystem Services</p>"},{"location":"Build/Supporting%20Ecosystem%20Services/Revocation%20Service/#revocation-service","title":"Revocation Service","text":"<p>In this section, you will find comprehensive guidance on how to use the EUDI Wallet Reference Implementation Revocation Service.</p>"},{"location":"Build/Supporting%20Ecosystem%20Services/Trust%20List%20Service/","title":"Trust List Service","text":"<p>Home / Build / Supporting Ecosystem Services</p>"},{"location":"Build/Supporting%20Ecosystem%20Services/Trust%20List%20Service/#trust-list-service","title":"Trust List Service","text":"<p>In this section, you will find comprehensive guidance on how to use the EUDI Wallet Reference Implementation Trust List Service.</p>"},{"location":"Reference%20Implementation/","title":"Index","text":"<p>Home</p>"},{"location":"Reference%20Implementation/#eudi-wallet-reference-implementation","title":"EUDI Wallet Reference Implementation","text":""},{"location":"Reference%20Implementation/#overview","title":"Overview","text":"<p>The EUDI Wallet Reference Implementation is built based on the Architecture Reference Framework and aims at showcasing a robust and interoperable platform for digital identification, authentication and electronic signatures based on common standards across the European Union.</p> <p>The EUDI Wallet Reference Implementation is based on a modular architecture composed of a set of business agnostic, re-usable components which are evolved in incremental steps and can be re-used across multiple projects.</p>"},{"location":"Reference%20Implementation/#quick-links","title":"\ud83d\udd11 Quick Links","text":"Section Purpose \ud83e\udded Feature Map Overview of delivered and planned features \ud83d\uddfa\ufe0f Roadmap Timeline and upcoming milestones \ud83d\udcc2 Repositories All component and library repos \ud83c\udfd7\ufe0f Designs High-Level and Low-Level design of the EUDI Wallet Reference Implementation \ud83d\udee0\ufe0f Getting Started Technical guidelines and tools \u2705 Code Quality Assurance Tools and processes to confirm quality assurance of the provided code <p>Please check further listed in the following sections for more detailed information on how to get started, contribute, and engage with the EUDI Wallet Reference Implementation.</p>"},{"location":"Reference%20Implementation/#functional-scope","title":"Functional Scope","text":"<p>The scope of the EUDI Wallet Reference Implementation is released in an iterative approach focusing on key functionalities which enable the support for a broad set of Use Cases, indicatively: - Mobile Driving License - Accessing online public and private services - Opening a bank account - SIM registration - Payment authorisation - Etc.</p> <p>\ud83e\udde9For a detailed view of the delivered functionalities, please check the EUDI Wallet Reference Implementation's Feature Map.</p>"},{"location":"Reference%20Implementation/#roadmap","title":"Roadmap","text":"<p>The roadmap of the EUDI Wallet reference implementation provides a transparent view of the features and enhancements that are currently being developed or planned to the future. Its purpose is to promote open communication and collaboration in our community.</p> <p>\ud83e\udded You can view further details in EUDI Wallet Reference Implementation Roadmap. </p>"},{"location":"Reference%20Implementation/#repositories","title":"Repositories","text":"<p>The EUDI Wallet Reference Implementation consists of a set of open-source repositories. </p> <p>\ud83d\udcc2 Browse through our Repositories to find the information you need.</p>"},{"location":"Reference%20Implementation/#eudi-wallet-dev-hub","title":"EUDI Wallet Dev Hub","text":"<p>The EUDI Wallet Dev Hub is a key reference point for those building and testing EUDI Wallet solutions, whether for Wallet Providers, Issuers, or Relying Parties.</p> <p>Explore the EUDI Wallet Dev Hub to find technical guidelines, tools and directions for how to get started defining, designing and building an EUDI Wallet project.</p>"},{"location":"Reference%20Implementation/#contributions-and-feedback","title":"Contributions and Feedback","text":"<p>We encourage you to contribute or provide your feedback/suggestion for the EUDI Wallet Reference Implementation. Depending on the type of feedback you wish to provide, you may utilise one of the following channels:</p> Code contributions  Comments and contributions on the codebase of the EUDI Wallet Reference Implementation are welcomed through the corresponding Github space.   Roadmap suggestions  If you have any questions or comments about the features listed on the roadmap or wish to suggest new features, please reach out via the Discussions forum.  Other feedback  A designated mailbox CNECT-EUDIW-SUPPORT@ec.europa.eu is available where any queries related to the Wallet Reference Implementation can be addressed."},{"location":"Reference%20Implementation/#disclaimer","title":"Disclaimer","text":"<p>The released software is a initial development release version: </p> <ul> <li>The initial development release is an early endeavor reflecting the efforts of a short timeboxed period, and by no means can be considered as the final product.  </li> <li>The initial development release may be changed substantially over time, might introduce new features but also may change or remove existing ones, potentially breaking compatibility with your existing code.</li> <li>The initial development release is limited in functional scope.</li> <li>The initial development release may contain errors or design flaws and other problems that could cause system or other failures and data loss.</li> <li>The initial development release has reduced security, privacy, availability, and reliability standards relative to future releases. This could make the software slower, less reliable, or more vulnerable to attacks than mature software.</li> <li>The initial development release is not yet comprehensively documented. </li> <li>Users of the software must perform sufficient engineering and additional testing in order to properly evaluate their application and determine whether any of the open-sourced components is suitable for use in that application.</li> <li>We strongly recommend not putting this version of the software into production use.</li> <li>Only the latest version of the software will be supported</li> </ul>"},{"location":"Reference%20Implementation/#about-the-project","title":"About the project","text":"<p>EU Digital Identity Wallet </p>"},{"location":"Reference%20Implementation/FAQ/","title":"FAQ","text":"<p>Home \u2753Frequently Asked Questions Contact Us About the project</p>"},{"location":"Reference%20Implementation/FAQ/#eudi-wallet-reference-implementation","title":"EUDI Wallet Reference Implementation","text":""},{"location":"Reference%20Implementation/FAQ/#frequently-asked-questions","title":"Frequently Asked Questions","text":"<p>A list of frequently asked questions are consolidated in order to assist you with possible queries related to the EUDI Wallet Reference Implementation. Please refer to the Architecture Reference Framework for the corresponding technical specifications and the EUDI Wallet Reference Implementation overview page for further information.</p> What are the specifications on which the Wallet Reference Implementation is based on?   The Wallet Reference Implementation is based on the Architecture Reference Framework.  What is the roadmap of the EUDI Wallet Reference Implementation?   The roadmap of the EUDI Wallet reference implementation provides a transparent view of the features and enhancements that are currently being developed or planned to the future. Its purpose is to promote open communication and collaboration in our community. For further details check the Public Roadmap.  Is there a process allowing me to post my comments or contributions to the Wallet Reference Implementation?   We encourage you to contribute or provide your feedback/suggestion for the EUDI Wallet Reference Implementation. Depending on the type of feedback you wish to provide, you may utilise one of the following channels:  - _Code contributions_: Comments and contributions on the codebase of the EUDI Wallet Reference Implementation are welcomed through the corresponding Github space. - _Roadmap suggestions_: If you have any questions or comments about the features listed on the roadmap or wish to suggest new features, please reach out via the Discussions forum. - _Other feedback_: A designated mailbox CNECT-EUDIW-SUPPORT@ec.europa.eu is available where any queries related to the Wallet Reference Implementation can be addressed.  What are the programming languages that are being used?   For Android it will mainly be Kotlin and for the iOS it will mainly be Swift (so it is the preferred native language of each platform). Other languages will also be used in the ecosystem of the EUDIW.  What are the protocols supported for online \u2013 remote authentication?   The baseline for the reference implementation is the ARF. Hence, we will be supporting OID4VP using the profile of ISO23220-4 Annex B.  What are the protocols supported for proximity sharing?   The baseline for the reference implementation is the ARF. Hence, we will be supporting ISO/IEC 18013-5.  What are the protocols supported for issuing?   The baseline for the reference implementation is the ARF. Hence, we will be supporting OpenId4VCI. For the currently supported version, please check the corresponding library.  What are the formats that we will be using for Personal Identification Data (PID)?   According to the ARF and the corresponding PID rulebook, we will be supporting both mDoc and SD-JWT format. At the momment, mDoc (CBOR) is supported. Alternative formats such as SD-JWT VC will be incorporated in a future release.  What are the formats that we will be using for mDL, (Q)EAA?   According to the ARF and the corresponding PID rulebook, we will be supporting both mDoc and SD-JWT format. At the momment, mDoc (CBOR) is supported. Alternative formats such as SD-JWT VC will be incorporated in a future release.  What is the testing scope for the Wallet Reference Implementation?   Security and units tests have been executed; details of the corresponding tests can be found in the corresponding repositories."},{"location":"Reference%20Implementation/FAQ/#contact-us","title":"Contact Us","text":"<p>For any technical issues related with the code, please contact us through the \u201cIssues\u201d service of the corresponding GitHub Repository. For any other issues, please get in touch through: CNECT-EUDIW-SUPPORT@ec.europa.eu</p>"},{"location":"Reference%20Implementation/FAQ/#about-the-project","title":"About the project","text":"<p>Read more about the project</p>"},{"location":"Reference%20Implementation/Feature%20Map/","title":"Feature Map","text":"<p>Home</p>"},{"location":"Reference%20Implementation/Feature%20Map/#eudi-wallet-reference-implementation-feature-map","title":"EUDI Wallet Reference Implementation - Feature Map","text":"<p>A consolidated overview of the user functionality provided by the EUDI Wallet Reference Implementation, along with links to relevant functional and technical documentation. </p>"},{"location":"Reference%20Implementation/Feature%20Map/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Overview</li> <li>Standards, Protocols &amp; Formats</li> <li>Features</li> <li>Supported Attestations</li> <li>Business Demos</li> <li>Releases </li> </ol>"},{"location":"Reference%20Implementation/Feature%20Map/#overview","title":"\ud83e\udded Overview","text":"<p>The EUDI Wallet Reference Implementation, developed under the Architecture Reference Framework, showcases how citizens can securely identify, authenticate, and sign electronically using common EU standards. It is built on a modular design with reusable components that evolve over time and can support multiple projects. Below you can find an overview of the features and functionalities delivered by the EUDI Wallet Reference Implementation. </p>"},{"location":"Reference%20Implementation/Feature%20Map/#standards-protocols-and-formats","title":"\ud83d\udcd0 Standards, Protocols and Formats","text":"<p>The EUDI Wallet is supported by a defined set of standards and technical specifications considered essential for its implementation. These form the minimum foundation needed to ensure secure issuance, presentation, authentication, signing, and certification of digital identity credentials.</p> <p>\u2757For a comprehensive set of standards and technical specifications (STS), you may visit the Essential Standards and Technical Specifications (STS) section of the ARF.</p> <p>In relation to credential formats, the following table indicates the formats supported by the EUDI Wallet Reference Implementation. </p> Format Status Description <code>mso_mdoc</code> Published (ISO/IEC 18013-5) Credential format based on ISO/IEC 18013-5 using a signed Mobile Security Object (MSO) to bind and protect data elements. Supports selective disclosure. <code>SD-JWT-VC</code> Draft (IETF / OpenID Foundation) Credential format extending JSON Web Tokens with selective disclosure for web-native verifiable credentials."},{"location":"Reference%20Implementation/Feature%20Map/#features","title":"\ud83e\udde9 Features","text":"<p>The following table provides a high-level overview of the key user functionalities supported by the EUDI Wallet Reference Implementation.</p> Features Description Status Issuance Issuance of verifiable credentials In Progress Presentation Presentation of verifiable credentials In Progress rQES Electronic signing with EUDI Wallet Completed Transaction Logs Log of historic transactions executed by the EUDI Wallet In Progress Request data deletion from RPs Users requesting data deletion from Relying Parties they have previously interacted with Planned Report unlawful or suspicious requests to DPA(s) Users reporting suspicious data requests to national Data Protection Authorities Planned Attestation Revocation Revoking issued attestations Completed Pseudonyms Using pseudonyms (i.e. passkeys) for authentication Planned Wallet Revocation Revoking wallet instance Planned Wallet to Wallet interaction Enabling the exchange of PID/attestations between two EUDI Wallets Planned Wallet Backup and Restore Supporting  procedures for backing up and restoring attestations of an EUDI Wallet Planned Migrate to a different wallet Supporting  procedures for migrating attestations to a different EUDI Wallet Planned Support for ZKP Supporting  Zero-Knowledge Proofs in EUDI Wallet interactions Planned <p>You can explore the EUDI Wallet Reference Implementation Roadmap to explore further details in relation to the features and enhancements that are currently being developed or planned for future implementation.</p> <p>The following sections elaborate on the detailed features supported by the EUDI Wallet Reference Implementation, grouped by functional area.</p>"},{"location":"Reference%20Implementation/Feature%20Map/#issuance","title":"Issuance","text":"Covers applicable issuance flows in alignment with OpenID4VCI. Expand to explore detailed functional specifications for the 'Issuance' capabilities.     _The 'Issuance' functionality is aligned with the OpenID4VCI protocol and as such is being continuously updated in alignment with the [evolving standards and protocols](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/64)._   | Feature                         | Description                              |   Status     | |:---------------------------------|:-------------------------------|:------------:| | [Deferred Issuance](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/40) | Issue credentials with a deferred process            |  Completed | | [Credential Offer](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/42)                  | Supporting issuer-initiated flows      |   Completed | | [Pre-authorisation code flow](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/41)                  | Issuance decoupled from the user's authorisation, as it is performed outside of the issuance flow  |  Completed| | [Batch Issuance](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/18)                  | Issuance of multiple instances of the same credential type     | Completed| | [Attestation Re-Issuance](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/52)                  | Enabling the re-issuance of PID/attestation before its expiration.     | Planned| | [Alignment to latest version of the standard](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/64)                  | Enhancements to issuance functionalities as detailed by the latest version of the OpenID4VCI standard.     | In Progress| | [Alignment to latest version of the HAIP profile](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/69)                  | Enhancements to issuance, remote presentation and trust management as detailed by the HAIP v1.0 profile.  | Planned|"},{"location":"Reference%20Implementation/Feature%20Map/#presentation","title":"Presentation","text":"Covers applicable presentation flows in alignment with OpenID4VP and ISO/IEC 18013-5. Expand to explore detailed functional specifications for the 'Presentation' capabilities.   _The 'Presentation' functionality is aligned with the OpenID4VCP protocol (for remote presentation flows) and as such is being continuously updated in alignment with the [evolving standards and protocols](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/64)._  | Feature                         | Description                              |   Status     | |:---------------------------------|:-------------------------------|:------------:| | [Remote Same-device presentation](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/64)         | User uses a web browser or another application on the device on which the Wallet Unit is installed to share attestations to a requesting Relying Party         | Completed       | | [Remote Cross-device presentation](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/64)         |  User uses a web browser on a device other than the device on which their Wallet Unit is installed to share attestations to a requesting Relying Party          |Completed       | | [Proximity presentation](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/64)         | User and their device are physically near the Relying Party Instance, and PIDs and attestations are exchanged via proximity technologies (e.g., NFC, Bluetooth), either under human supervision (Supervised) or directly to a machine without supervision (Unsupervised)          |  Completed     | | [Digital Credential API](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/34)         | The Digital Credentials API enables the secure presentation of attestations from the EUDI Wallet, leveraging the web browser for the presentation flow        |  Planned       | | [Proximity Verifier](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/43)         | Implementation of an open source verifier application for Android, supporting stakeholders for developing their own proximity reader solutions       |  Completed       | | [Alignment to latest version of the standard](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/64)                  | Enhancements to presentation functionalities as detailed by the latest version of the OpenID4VP standard (v1.0).     | Completed|"},{"location":"Reference%20Implementation/Feature%20Map/#rqes","title":"rQES","text":"Covers scenarios for Remote qualified signatures. Expand to explore detailed functional specifications for the 'rQES' capabilities.  | Feature                         | Description                              |  Status     | |:------------------------------|:--------------------------------|:------------:| | [Wallet-Driven rQES (external SCA)](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/15)       | Remote qualified signatures in a Wallet-driven model, utilising an external 'Signature Creation Application'          | Completed       | | [Wallet-Driven rQES (internal SCA)](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/27)        | Remote qualified signatures in a Wallet-driven model, utilising an internal (i.e. wallet component) 'Signature Creation Application'              | Completed       | | [RP-Driven rQES (internal SCA)](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/16)       | Remote qualified signatures in a RP-driven model              | Completed      | | [Document Retrieval (Wallet-Driven flows)](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/80)        | In a 'wallet-centric' model for rQES, a foreseen scenario includes the retrieval of the document to be signed from the corresponding Relying Party, instead of retrieving the document from the device's file system.             | Completed      |"},{"location":"Reference%20Implementation/Feature%20Map/#pseudonyms","title":"Pseudonyms","text":"Utilising passkeys through the EUDI Wallet for authentication purposes. Expand to explore detailed functional specifications for the 'Pseudonyms' capabilities.   | Feature                         | Description                              | Status     | |:-----------------------------|:-------------------------------------|:------------:| | [Pseudonym functionality](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/26)        | Pseudonyms allow EUDI Wallet users to be identified by service provider/relying parties without revealing any personal information.         |  Planned        |"},{"location":"Reference%20Implementation/Feature%20Map/#transaction-logs","title":"Transaction Logs","text":"EUDI Wallet Privacy Dashboard provides a record of transactions (i.e. data exchanges) executed through the EUDI Wallet. Expand to explore detailed functional specifications for the 'Transaction Logs (Privacy Dashboard)' capabilities.   | Feature                         | Description                              |  Status     | |:-----------------------------|:------------------------------------|:-----------:| | [Transaction Logs (Privacy Dashboard)](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/22) | EUDI Wallet Privacy Dashboard provides a record of transactions (i.e. data exchanges) executed through the EUDI Wallet. Transaction logs ensure a higher degree of transparency, privacy and control of the User over their personal data      | Completed       |"},{"location":"Reference%20Implementation/Feature%20Map/#request-data-deletion-from-rps","title":"Request data deletion from RPs","text":"Users requesting data deletion from Relying Parties they have previously interacted with.    | Feature                         | Description                              | Status     | |:----------|:-------------------|:-------:| |[Request Data Deletion](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/31)| Users request the deletion of their personal attributes from Relying Parties with which they have interacted through their Wallet Unit.  | Planned  |"},{"location":"Reference%20Implementation/Feature%20Map/#report-unlawful-or-suspicious-requests","title":"Report unlawful or suspicious requests","text":"Users report a Relying Party to the competent national Data Protection Authority where an allegedly unlawful or suspicious request for data is received.    | Feature                         | Description                              |Status     | |:----------|:-------------------|:-------:| |[Report unlawful or suspicious requests](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/32)| Users, through the Wallet Unit, report a Relying Party to the competent national Data Protection Authority where an allegedly unlawful or suspicious request for data is received.|Planned     |"},{"location":"Reference%20Implementation/Feature%20Map/#attestation-revocation","title":"Attestation Revocation","text":"Attestations revoked by the issuer. Expand to explore detailed functional specifications for the 'Attestation Revocation' capabilities.  | Feature                         | Description                              |  Status     | |:---------------------|:--------------------------|:------------:| | [Handling attestation revocation](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/4)|  Attestation revocation support for the reference implementation including support from the issuer, verifier and wallet |   Completed       |"},{"location":"Reference%20Implementation/Feature%20Map/#wallet-revocation","title":"Wallet Revocation","text":"Wallet instance revoked by the wallet provider. Expand to explore detailed functional specifications for the 'Wallet Revocation' capabilities.   | Feature                         | Description        |  Status     | |:-------------|:--------------------|:------:| | [Wallet instance revocation](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/28)| TBC          |  Planned   |"},{"location":"Reference%20Implementation/Feature%20Map/#wallet-to-wallet","title":"Wallet to Wallet","text":"An EUDI Wallet User can request from another EUDI Wallet User to share an attestation of attributes using their EUDI Wallet Instances in proximity. Expand to explore detailed functional specifications for 'Wallet to Wallet' interaction capabilities.   | Feature                         | Description         | Status     | |:--------------|:--------------|:----------:| |[Wallet to Wallet](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/30)| An EUDI Wallet User can request from another EUDI Wallet User to share an attestation of attributes using their EUDI Wallet Instances in a proximity setting.   | Planned |"},{"location":"Reference%20Implementation/Feature%20Map/#wallet-backup-and-restore","title":"Wallet Backup and Restore","text":"Backing up and restoring attestations of an EUDI Wallet. Expand to explore detailed functional specifications for 'Backup and Restore' interaction capabilities.    | Feature                         | Description                              | Status     | |:-----------|:------------------|:--------:| |[Wallet Backup &amp; Restore](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/5)| Procedures for backing up the attestations a wallet unit contains.  | Planned   |"},{"location":"Reference%20Implementation/Feature%20Map/#migrate-to-a-different-wallet","title":"Migrate to a different wallet","text":"Migrating attestations to a different EUDI Wallet. Expand to explore detailed functional specifications for 'Migration' capabilities.    | Feature                         | Description                              |  Status     | |:----------|:-------------------|:-------:| |[Migrate to a different wallet](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/33)| Pocedures for migrating backd-up attestations of a wallet unit to a different Wallet Solution.   |  Planned |"},{"location":"Reference%20Implementation/Feature%20Map/#support-for-zkp","title":"Support for ZKP","text":"Supporting Zero-Knowledge Proofs    | Feature                         | Description                              |  Status     | |:----------|:-------------------|:-------:| |[Support for Zero Knowledge Proof](https://github.com/eu-digital-identity-wallet/eudi-wallet-reference-implementation-roadmap/issues/56)| Supporting Zero-Knowledge Proofs in EUDI Wallet interactions| Planned  |"},{"location":"Reference%20Implementation/Feature%20Map/#supported-attestations","title":"\ud83d\udcc2 Supported Attestations","text":"<p>The following table provides an overview of the key attestations supported by the EUDI Wallet Reference Implementation.</p> Attestation Description Status PID Support for the 'Person Identification Data (PID)' in alignment with the PID Rulebook Completed mDL Support for the 'Mobile Driving License' in alignment with the mDL Rulebook Completed EHIC Support for the 'European Health Insurance Card' Completed PDA1 Support for the 'Portable Document A1' Completed <p>For further attestations supported by the EUDI Wallet Reference Implementation you can check our Issuer.</p>"},{"location":"Reference%20Implementation/Feature%20Map/#business-demos","title":"\ud83d\udcbc Business Demos","text":""},{"location":"Reference%20Implementation/Feature%20Map/#business-demos_1","title":"Business Demos","text":"<p>A set of demo implementations mocking business flows in different contexts are available, aiming to showcasing the EUDI Wallet functionalities in real-life scenarios. </p> Business Scenario Description Status Travel A 'Travel Use Case\u2019 implementation for the EUDI Wallet which showcases the utilization of the EUDI Wallet in a \u2018Travel\u2019 business scenario, where the EUDI Wallet is used for several purposes, such as presenting attestations (remotely and in proximity) as well as digitally signing documents. Completed Cross-border recruitment A \u2018Cross-Border Recruitment Use Case\u2019 implementation for the EUDI Wallet which showcases the utilization of the EUDI Wallet in a \u2018Cross-Border Recruitment\u2019 business scenario, where the EUDI Wallet is used for several purposes, such as presenting attestations (remotely and in proximity) when applying/on-boarding for a job, as well as digitally signing job contract. In Progress"},{"location":"Reference%20Implementation/Feature%20Map/#releases","title":"\ud83d\udce6 Releases","text":"<p>The latest published versions of the key EUDI Wallet Reference Implementation components are summarised below:</p> Component Release EUDI Wallet app (Android) EUDI Wallet app (iOS) Remote Verifier Issuer (Python) Issuer (Kotlin) Proximity Verifier <p>You can refer to the EUDI Wallet Reference Implementation Roadmap to view further details on the release roadmap.</p>"},{"location":"Reference%20Implementation/Quality%20Assurance/","title":"Quality Assurance","text":"<p>Home</p>"},{"location":"Reference%20Implementation/Quality%20Assurance/#code-quality-assurance-overview","title":"Code Quality Assurance Overview","text":""},{"location":"Reference%20Implementation/Quality%20Assurance/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Purpose and Approach</li> <li>Test Types</li> <li>Test Tools </li> <li>Reporting</li> </ol>"},{"location":"Reference%20Implementation/Quality%20Assurance/#purpose-and-approach","title":"\ud83c\udfaf Purpose and Approach","text":"<p>This page describes the Code Quality Assurance (QA) activities for the EUDI Wallet project, providing transparency on testing practices, environments, and outcomes across all releases.</p> <p>The QA process ensures that the EUDI Wallet meets functional, non-functional, performance, and security requirements on both Android and iOS platforms. Each release is planned and validated according to the agreed roadmap milestones, ensuring traceability between development deliverables and test execution.</p> <p>Releases undergo full verification and validation through a combination of manual and automated testing, with QA activities integrated across all development phases to detect and prevent defects early.</p> <p>All testing artefacts are managed in GitHub under: eu-digital-identity-wallet/eudi-doc-testing-application-internal</p>"},{"location":"Reference%20Implementation/Quality%20Assurance/#code-quality-controls","title":"\ud83d\udc8e Code Quality Controls","text":"<p>SonarCloud works on a set of code quality checks and analyzes code for multiple quality dimensions, across all stacks (Swift, Kotlin, Java, Python). The checks conducted can be further grouped into the following categories:</p> <ul> <li> <p>Security (protecting software from threats, attacks, and unauthorized access):</p> <ul> <li>Security Vulnerabilities: Flaws in code or configuration that attackers can exploit to compromise the system. Through SonarCloud the following security vulnerabilities are identified: SQL Injection, Deserialization, and Command Injection vulnerabilities.</li> <li>Security Hotspots based on OWASP Top 10 / CWE Mappings: OWASP Top 10 refers to a list of the ten most critical web application security risks (e.g., injection, broken authentication) that can be found here. CWE (Common Weakness Enumeration) refers to a standardized catalog of software weakness types. Vulnerabilities and hotspots can be mapped to these categories for classification. The relevant information can be found here.</li> </ul> </li> <li> <p>Maintainability (measures how easily code can be understood, modified, and extended):</p> <ul> <li>Code Smells: Patterns in code that indicate potential design or implementation issues. They are warning indicators that arise due to potential bad coding practices.</li> <li>Cognitive Complexity: A metric indicating how difficult code is to understand. It increases with nested logic, branching, and poor readability.</li> <li>Duplications: Repeated blocks of code. High duplication leads to more effort in applying changes and increases the risk of inconsistency.</li> </ul> </li> <li> <p>Reliability (reflects how consistently software functions without failures):</p> <ul> <li>Bugs: Using static code analysis, it detects actual bugs that can cause runtime errors or incorrect behavior.</li> <li>Unit Test Coverage: A measure of how much of the code is exercised by automated tests. Higher coverage generally increases confidence in reliability but doesn\u2019t guarantee the absence of bugs.</li> </ul> </li> </ul>"},{"location":"Reference%20Implementation/Quality%20Assurance/#test-types","title":"\ud83e\udde9 Test Types","text":"<p>Testing is organised across multiple levels to validate functionality, performance, and security, ensuring comprehensive coverage throughout the development lifecycle:</p> Test Type Objective Frequency Unit Component-level verification Continuous Functional End-to-end behaviour validation Per release Security Confidentiality, integrity, and compliance Per release Performance Response time, and App Stability, CPU and Memory Usage Per release"},{"location":"Reference%20Implementation/Quality%20Assurance/#unit-testing","title":"Unit Testing","text":"<ul> <li>Objectives: Unit testing verifies the correctness of individual software components and is the first quality gate in the CI pipeline. Unit testing supports early defect detection and continuous integration by ensuring each new change maintains baseline quality.</li> <li>Tools: Unit Testing Tools.</li> </ul>"},{"location":"Reference%20Implementation/Quality%20Assurance/#functional-testing","title":"Functional Testing","text":"<ul> <li>Objectives: Functional and end-to-end (E2E) testing ensures that each release behaves as expected according to defined epics and user stories.</li> <li>Requirements: The Functional Requirements can be found here.</li> <li>Test Specifications: The Functional Testing Specifications can be found here:<ul> <li>Manual Testing.</li> <li>Automated Testing.</li> </ul> </li> <li>Tools: Functional Testing Tools.</li> </ul>"},{"location":"Reference%20Implementation/Quality%20Assurance/#security-testing","title":"Security Testing","text":"<ul> <li>Objectives: Security testing ensures the continuous security, integrity, and resilience of the EUDI Wallet applications throughout their lifecycle. By integrating automated and manual security testing within a Secure Software Development Life Cycle (SDLC) and aligning with OWASP MASVS and MASTG standards, the framework enables early detection and remediation of vulnerabilities. It combines code analysis, penetration testing, and vulnerability management using tools such as SonarQube, OWASP Dependency-Check, and DefectDojo to maintain compliance with recognized security standards and safeguard user trust in the EUDI Wallet ecosystem.</li> <li>Requirements and Test Specifications: The Security Requirements and Security Test Specifications can be found here.</li> <li>Tools: Security Testing Tools.</li> </ul>"},{"location":"Reference%20Implementation/Quality%20Assurance/#performance-testing","title":"Performance Testing","text":"<ul> <li>Objectives: Performance tests to evaluate the performance of the EUDI Wallet application under average user load across various mobile devices. This testing focuses on CPU and memory usage, as well as network activity during common scenarios.</li> <li>Requirements: The Performance Requirements can be found here.</li> <li>Test Specifications: The Performance Test Specifications can be found here.</li> <li>Tools: Performance Testing Tools.</li> </ul>"},{"location":"Reference%20Implementation/Quality%20Assurance/#test-tools","title":"\ud83d\udcbc Test Tools","text":"<p>The following table summarises the tools utilised in the applicable test types: | Test Type | Tools |  | -------- | ------- |  | Unit |  SonarCloud | | Functional |  Manual, Serenity BDD for structured reporting and visual coverage, Automation: Appium (for mobile automation on Android and iOS), Java (test scripting language), JUnit (test framework), IntelliJ IDEA (development and execution environment), Maven (dependency and build management), Appium Inspector (for element inspection and locator validation), Xcode (for building and exporting iOS .ipa files and Android .apk packages retrieved manually from Firebase for testing). | | Security |  OWASP MASVS/MASTG for mobile security verification  OWASP Dependency-Check for third-party library analysis  SQLCipher and Android Keystore for data protection  Burp Suite and MobSF for dynamic testing and static analysis| | Performance | Android: Android Studio Profiler and App Inspection and iOS: Xcode Instruments for performance monitoring, memory usage, and CPU/network profiling |</p>"},{"location":"Reference%20Implementation/Quality%20Assurance/#reporting","title":"\ud83d\udcca Reporting","text":"<p>Each release is accompanied with serenity-generated reports summarising test execution results and coverage.</p>"},{"location":"Reference%20Implementation/Quality%20Assurance/#release-test-reports","title":"Release Test Reports","text":"Release Test Types Report Links Status 2025.07.28 - Demo Functional  Security  Performance Functional test results Security test results Performance test results \u2705 Released 2025.10.31 - Demo Functional Functional test results \u2705 Released 2025.12.xx - xxx (to be added) (to be added) \ud83d\udd04 In progress <p>Older releases remain available in the reports directory of the testing repository.</p>"},{"location":"Reference%20Implementation/Repositories%20List/","title":"Repositories List","text":"<p>Home</p>"},{"location":"Reference%20Implementation/Repositories%20List/#eudi-wallet-reference-implementation-repositories","title":"EUDI Wallet Reference Implementation - Repositories","text":"<p>The EUDI Wallet Reference Implementation is based on a modular architecture composed of a set of business-agnostic, reusable components which will evolve in incremental steps and can be re-used across multiple projects. This document provides an overview of the key repositories of the EUDI Reference Implementation. </p> <p>Specifically, as part of the EUDI Wallet Reference Implementation, the following set of components are being delivered:</p> <ul> <li>\ud83d\udcda Libraries and other software components needed by the framework</li> <li>\ud83d\udee1\ufe0f Verifier mobile native applications and services for proximity and remote flows</li> <li>\ud83d\udcdd Issuer applications and services</li> <li>\ud83d\udcf1 EUDI Wallet mobile native applications for issuing, proximity and remote flows</li> <li>\u270d\ufe0f Remote electronic signing applications and services</li> </ul>"},{"location":"Reference%20Implementation/Repositories%20List/#libraries","title":"Libraries","text":""},{"location":"Reference%20Implementation/Repositories%20List/#wallet-core-android-and-wallet-kit-ios-coordinator-libraries","title":"Wallet Core (Android) and Wallet Kit (iOS) Coordinator Libraries","text":"Repository Description Wallet Core (Android) Implementation of the EUDI Wallet Core library for Android that serves as a coordinator layer between the Wallet UI App and the Wallet libraries. Currently, coordinates issuing, proximity and remote presentation libraries. Wallet Kit (iOS) Implementation of the EUDI Wallet Kit library for iOS that serves as a coordinator layer between the Wallet UI App and the Wallet libraries. Currently coordinates issuing, proximity and remote presentation libraries."},{"location":"Reference%20Implementation/Repositories%20List/#proximity-sharing-ios-libraries","title":"Proximity Sharing iOS Libraries","text":"Repository Description mDoc Security (iOS) Implementation of mDoc security mechanisms according to ISO/IEC 18013-5. mDoc Data Transfer (iOS) Implementation of the mDoc data-transfer library according to ISO/IEC 18013-5. mDoc Data Model (iOS) Implementation of the mDoc data model according to ISO/IEC 18013-5."},{"location":"Reference%20Implementation/Repositories%20List/#proximity-sharing-android-libraries","title":"Proximity Sharing Android Libraries","text":"Repository Description mDoc Data Transfer (Android) This library provides a set of classes to manage the transfer of documents in an EUDI ISO/IEC 18013-5 Android Wallet."},{"location":"Reference%20Implementation/Repositories%20List/#remote-presentation-ios-libraries","title":"Remote Presentation iOS Libraries","text":"Repository Description Presentation Exchange (iOS) Implementation of DIF Presentation Exchange v2 specification in Swift. SIOPv2 &amp; OpenID4VP protocols (iOS) Implementation of SIOPv2 and OpenID4VP protocols (wallet's role) in Swift. SD-JWT (iOS) SD-JWT library for creating and verifying SD-JWT in Swift."},{"location":"Reference%20Implementation/Repositories%20List/#remote-presentation-android-libraries","title":"Remote Presentation Android Libraries","text":"Repository Description Presentation Exchange (Android) Implementation of DIF Presentation Exchange v2 specification in Kotlin. SIOPv2 &amp; OpenID4VP protocols (Android) Implementation of SIOPv2 and OpenID4VP protocols (wallet's role) in Kotlin. SD-JWT (Android) SD-JWT library for creating and verifying SD-JWT in Kotlin."},{"location":"Reference%20Implementation/Repositories%20List/#issuing-ios-libraries","title":"Issuing iOS Libraries","text":"Repository Description OpenID4VCI (iOS) Implementation of credential management supporting the OpenID4VCI protocol."},{"location":"Reference%20Implementation/Repositories%20List/#issuing-android-libraries","title":"Issuing Android Libraries","text":"Repository Description OpenID4VCI (Android) Implementation of credential management supporting the OpenID4VCI protocol."},{"location":"Reference%20Implementation/Repositories%20List/#wallet-data-storage-and-cryptographic-management-ios-libraries","title":"Wallet Data Storage and Cryptographic Management iOS Libraries","text":"Repository Description mDoc Document Storage (iOS) Storage for keys and wallet documents."},{"location":"Reference%20Implementation/Repositories%20List/#wallet-data-storage-and-cryptographic-management-android-libraries","title":"Wallet Data Storage and Cryptographic Management Android Libraries","text":"Repository Description mDoc Document Storage (Android) This library provides a set of classes to manage documents and their cryptographic keys in an EUDI Android Wallet."},{"location":"Reference%20Implementation/Repositories%20List/#revocation-libraries","title":"Revocation Libraries","text":"Repository Description Token Status List (Kotlin) Statium is a Kotlin multiplatform library supporting JVM and Android platforms. It implements the Token Status List Specification, and allows callers to check the status of a \"Referenced Token\" as defined in the specification, effectively enabling applications to verify if tokens are valid, revoked, or in other states. Token Status List (Swift) Statium is a Swift library for iOS and macOS. It implements the Token Status List Specification, and allows callers to check the status of a \"Referenced Token\" as defined in the specification, effectively enabling applications to verify if tokens are valid, revoked, or in other states."},{"location":"Reference%20Implementation/Repositories%20List/#rqes-low-level-libraries","title":"rQES: Low Level Libraries","text":"Repository Description EUDI rQES CSC library (Kotlin) This is a Kotlin library targeting Android, that supports the Cloud Signature Consortium API (version 2) protocol. EUDI rQES CSC library (Swift) This is a Swift library targeting iOS, that supports the Cloud Signature Consortium API (version 2) protocol."},{"location":"Reference%20Implementation/Repositories%20List/#rqes-core-and-kit-libraries","title":"rQES: Core and Kit Libraries","text":"Repository Description EUDI Remote Qualified Electronic Signature (RQES) Core library for Android This module provides the core functionality for the EUDI Wallet for Android, focusing on the Remote Qualified Electronic Signature (RQES) service. EUDI Remote Qualified Electronic Signature (RQES) Core library for iOS This module provides the core functionality for the EUDI Wallet for iOS, focusing on the Remote Qualified Electronic Signature (RQES) service."},{"location":"Reference%20Implementation/Repositories%20List/#rqes-ui-libraries","title":"rQES: UI Libraries","text":"Repository Description EUDI Remote Qualified Electronic Signature (RQES) UI library for Android This module provides the core and UI functionality for the EUDI Wallet for Android implementation, focusing on the Remote Qualified Electronic Signature (RQES) service. EUDI Remote Qualified Electronic Signature (RQES) UI library for iOS This package provides the core and UI functionality for the EUDI Wallet for iOS implementation, focusing on the Remote Qualified Electronic Signature (RQES) service."},{"location":"Reference%20Implementation/Repositories%20List/#eudi-wallet-mobile-native-applications","title":"EUDI Wallet mobile native applications","text":"Repository Description Wallet UI App (Android) Implementation of Wallet UI App for Android. Currently, it also includes a demo App, demonstrating the following capabilities: Proximity presentation, Same-device Online Presentation and Issuance of PID and mDL. Wallet UI App (iOS) Implementation of Wallet UI App for iOS. Currently, it also includes a demo App, demonstrating the following capabilities: Proximity presentation, and Same-device Online Presentation and Issuance of PID and mDL."},{"location":"Reference%20Implementation/Repositories%20List/#verifier-apps-and-services","title":"Verifier Apps and Services","text":"Repository Description Web Verifier Demo Web Verifier UI application (Frontend) that acts as a Verifier/RP trusted endpoint. Available at https://verifier.eudiw.dev RESTful API (web-services) Demo Web Verifier application (Backend RESTful service) that acts as a Verifier/RP trusted endpoint."},{"location":"Reference%20Implementation/Repositories%20List/#issuing-apps-and-services","title":"Issuing Apps and Services","text":"Repository Description OpenID4VCI issuer (Python) An implementation of a credential issuing service, according to OpenID4VCI, in Python. Available at https://issuer.eudiw.dev/ OpenID4VCI issuer (Kotlin) An implementation of a credential issuing service, according to OpenID4VCI, in Kotlin. Available at  https://issuer-backend.eudiw.dev/"},{"location":"Reference%20Implementation/Repositories%20List/#signing-apps-and-services","title":"Signing Apps and Services","text":"Repository Description TrustProvider Signer The TrustProvider Signer is a remote signing service provider and client. The TrustProvider Signer can be accessed using the EUDI Wallet through OID4VP presentation of the PID. Available here EUDI Wallet-driven signer QTSP Implementation of a wallet-driven QTSP for the remote Qualified Electronic Signature component of the EUDI Wallet. The QTSP provides endpoints based on the CSC API v2.0 specification and supports authentication via OpenID4VP. EUDI Wallet-driven external SCA Implementation of a wallet-driven SCA for the remote Qualified Electronic Signature component of the EUDI Wallet. The SCA provides endpoints that allow the calculation of the hash value of a document and obtain the signed document given the signature value. RP Centric rQES SCA This is a REST API server implementing the RP-centric SCA for the remote Qualified Electronic Signature (rQES) component of the EUDI Wallet."},{"location":"Reference%20Implementation/Demos/","title":"Index","text":"<p>Home</p>"},{"location":"Reference%20Implementation/Demos/#demos","title":"Demos","text":"<p>EUDI Wallets or simply Wallets simplify the lives of citizens and businesses in many ways; making data more secure and private. It will also improve security and flexibility for governments and businesses when carrying out transactions online.</p> <p>Available use cases:</p> <ol> <li>Travel Scenario</li> <li>More to come shortly. Stay tuned...</li> </ol>"},{"location":"Reference%20Implementation/Demos/Travel%20Scenario/","title":"Travel Scenario","text":"<p>Home</p>"},{"location":"Reference%20Implementation/Demos/Travel%20Scenario/#travel-scenario","title":"Travel Scenario","text":"<p>The Reference Implementation includes the travel use case implementation to showcase the utilization of the EUDI Wallet in a \u2018Travel\u2019 scenario, where the EUDI Wallet is used for several purposes, such as presenting attestations (remotely and in proximity) as well as digitally signing documents.</p>"},{"location":"Reference%20Implementation/Demos/Travel%20Scenario/#use-case","title":"Use Case","text":"<ol> <li>Jane is preparing for her next trip with the help of her EUDI Wallet. Jane starts by securing her essential travel documents. She issues her Digital Identity, Mobile Driving License, and Photo-ID directly into her EUDI Wallet. Each document is safely stored, ready to be accessed whenever she needs them.</li> <li>Booking: With her documents in place, Jane navigates to the travel booking portal. Here, she effortlessly presents her Digital ID and other necessary documents requested by the booking portal from her EUDI Wallet to book her car rental and hotel.</li> <li>Renting a car: When it comes to renting a car, Jane is redirected to a remote signing portal to conclude the rental process. Using her EUDI Wallet, she digitally signs the car rental contract, finalizing her arrangements with security and ease.</li> <li>Hotel check-in: Upon arrival at her hotel, Jane approaches the check-in counter. She presents her Digital ID and Photo-ID from her EUDI Wallet to the hotel\u2019s proximity reader. The process is quick and secure, allowing her to start relaxing in her room in no time.</li> </ol>"},{"location":"Reference%20Implementation/Demos/Travel%20Scenario/#test-online-or-run-locally","title":"Test online or run locally","text":"<ol> <li>Download the EUDI Wallet Reference Implementation application.</li> <li>Access the demo booking service.</li> </ol>"},{"location":"Reference%20Implementation/Demos/Travel%20Scenario/#user-journey","title":"User Journey","text":"<ol> <li> <p>User is preparing for a trip with the help of her EUDI Wallet</p> <ol> <li>User issues the necessary identification documents, i.e. Digital Identity, Mobile Driving License and Photo-ID</li> <li>User navigates to the issuance service and follows the process to complete the issuance of the needed documents</li> <li>Identification documents are successfully issued to the EUDI Wallet</li> </ol> </li> <li> <p>User makes a reservation</p> <ol> <li>User navigates to the booking service</li> <li>User fills in the required data for the booking reservation:<ol> <li>Number of Guests</li> <li>Number of Rooms</li> <li>Check In/Out dates</li> <li>Option to include \u2018car rental\u2019 in the reservation</li> </ol> </li> <li>User is requested to present the required attestations from the EUDI Wallet (note: depending on the scenario, the user scans the rendered QR-code or selects the deep-link in cross-device or same-device flows respectively)</li> <li>User receives the presentation request from the booking service and consents to the presentation of the requested attestations</li> </ol> </li> <li>User reviews reservation details<ol> <li>User can view a summary of the reservation details, based on the previously added data as well as the attestations shared from the EUDI Wallet</li> <li>User selects to add the reservation confirmation to the EUDI Wallet<ol> <li>User scans the rendered QR-code</li> <li>Following the issuance process in the EUDI Wallet, the \u2018reservation confirmation\u2019 is added to the EUDI Wallet</li> </ol> </li> </ol> </li> <li>User selects to sign the \u2018car rental contract\u2019<ol> <li>User downloads a template car rental contract from the corresponding link</li> <li>User selects to sign the car rental contract and is navigated to the external trust service, which prompts the user to remotely sign the uploaded car rental contract</li> </ol> </li> <li>User checks-in at the hotel:<ol> <li>User approaches the reader at the hotel check-in (note: the available proximity verifier can be utilized to mock the \u2018reader\u2019 service at a hotel)</li> <li>User presents the QR-code from the EUDI Wallet, which is scanned from the proximity verifier</li> <li>User receives the presentation request for the \u2018Photo-ID\u2019 and the \u2018Reservation\u2019 attestations</li> <li>User consents to present the attestations, which are successfully received by the proximity verifier</li> </ol> </li> </ol> <p>You can also run the booking service locally. Instructions for this available in GitHub.</p>"},{"location":"Reference%20Implementation/hld/","title":"Index","text":"<p>Home</p>"},{"location":"Reference%20Implementation/hld/#index-of-reference-implementationhld","title":"Index of Reference Implementation/hld","text":"<ul> <li>EUDI-Wallet-NiScy_hld_q3_25</li> <li>HLDFigures</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/","title":"EUDI Wallet NiScy hld q3 25","text":"<p>Home</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#comprehensive-high-level-design-of-the-eudi-wallet-reference-implementation-hld","title":"Comprehensive High-Level Design of the EUDI Wallet Reference Implementation (HLD)","text":""},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#purpose-of-this-document","title":"Purpose of this document","text":"<p>The purpose of this document is to provide a comprehensive high-level design that captures both functional and cross-functional requirements for the EUDI Wallet Reference implementation. It emphasizes detailing the target architecture, including back-end assets and components. The document is structured to support incremental and periodic updates, ensuring it remains aligned with the product roadmap and evolves alongside project advancements and changing requirements.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#reference-documents","title":"Reference Documents","text":"[ID] [Document] [Version] R01 EUDI Architecture and Reference Framework v2.6.0 VC11 Verifiable Credentials Data Model v1.1"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#terminology","title":"Terminology","text":"<p>This section provides a comprehensive list of the technical terms, abbreviations, or acronyms used throughout this document, along with their definitions or explanations.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#abbreviations-and-acronyms","title":"Abbreviations and acronyms","text":"<p>This section provides a comprehensive list of the technical terms, abbreviations, or acronyms used throughout this document.</p> Acronym Definition ADR Architecture Decision Record ARF Architecture and Reference Framework document (R01) CA Certification Authority CBOR Concise Binary Object Representation EAA Electronic Attestation of Attributes eIDAS electronic Identification and Trust Services EUDI European Union Digital Identity EUDIW EUDI Wallet JWT Json Web Token HTTP Hypertext Tranfer Protocol LoA Level of Assurance MS Member State NFC Near Field Communication PID Person Identification Data RP Relying Party rQES Remote Qualified Electronic Signature QEAA Qualified Electronic Attestation of Attributes QR Quick Response QSCD Qualified Signature/seal Creation Device QTSP Qualified Trust Service Provider W3C World Wide Web Consortium"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#definitions","title":"Definitions","text":"<p>The following definitions are listed to provide clarity on important terms used throughout the document. It shall be noted that the listed definitions are in alignment with the terminology used in R01 EUDI Architecture and Reference Framework.</p> Term Description PID A set of data, issued in accordance with Union or national law, enabling the identity of a natural or legal person, or of a natural person representing a natural or legal person, to be established. - eIDAS 2.0. PID Provider A Member State or legal entity providing Person Identification Data to Users. R01 Issuer A Person Identification Data Provider issuing PID or a (Qualified) Trust Service Provider issuing (Q)EAA. In the case of the EUDI Wallet there may be multiple Issuers for PID and (Q)EAA. R01 Attestation A set of one or more claims made by an issuer. VC11 Verifiable Credential A verifiable credential is a tamper-evident credential that has authorship that can be cryptographically verified. Verifiable attestations can be used to build verifiable presentations, which can also be cryptographically verified. VC11 Presentation Data derived from one or more verifiable attestations, issued by one or more issuers, that is shared with a specific verifier. VC11 Verifiable Presentation Tamper-evident presentation encoded in such a way that authorship of the data can be trusted after a process of cryptographic verification. Certain types of verifiable presentations might contain data that is synthesized from, but do not contain, the original verifiable attestations (for example, zero-knowledge proofs). VC11"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#introduction","title":"Introduction","text":"<p>This document provides a detailed description of the software system's overall architecture and design, focusing on its major components, their relationships, and their interactions. Its purpose is to provide a clear and comprehensive understanding of the system's structure, design choices, and constraints, serving as a blueprint for developers during the implementation phase.</p> <p>The document serves as a crucial reference for the development team, ensuring that everyone has a clear understanding of the system's architecture and design choices. It also facilitates communication between stakeholders, helping to align expectations and clarify any ambiguities or misunderstandings. The document reflects the related architecture decisions recorded in the ADR (Architecture Decisions Records) under this repository (/decisions). Both, this document and ADR, are under the same GitHub repo https://github.com/eu-digital-identity-wallet/reference-implementation-architecture.</p> <p>The design outlined in this document must adhere to the minimum requirements established by the European Digital Identity Wallet Architecture and Reference Framework (ARF). The ARF document clearly defines the background, the objectives, the scope and the constraints for this work.</p> <p>The target audience of this document are the developers of the EUDI Wallet reference implementation. This document, along with the reference implementation, will be part of the deliverables to be shared with the Member States (MS) for supporting the development of their own solutions.</p> <p>The following outlines the conceptual high-level design of the EUDI Wallet ecosystem, encompassing its core components and illustrating the interfaces between an EUDI Wallet instance and other entities within the EUDI Wallet ecosystem.</p> <p></p> <p>Figure 1: Logical high-level design of the EUDI Wallet ecosystem R01</p> <p>In this figure, the following components are described:</p> <ul> <li>User: A natural or legal person using an EUDI Wallet.</li> <li>PID Provider (PP): A Member State or another legal entity delegated by   the Member State performing identity proofing of the User at LoA High   and providing the Person Identification Data to the Users.</li> <li>Authentic Source (AS): A repository or system, that contains   attributes about a natural or legal person and is the primary source   of those attributes or recognized as an authentic source of attributes   in national law.</li> <li>Attestation Provider - QEAA / EAA (AP): Any provider able to issue a   qualified or non-qualified electronic attestation of attributes.</li> <li>QES Provider (QP): Providers of remote signature creation services   enabling the User to create qualified electronic signatures.</li> <li>Relying party (RP): A legal or natural person that relies upon EUDI   Wallets for the provisioning of public or private services to Wallet   users.</li> <li>Wallet Provider (WP): A public or private organization providing an   EUDI Wallet Solution that can be instantiated on a user's device,   e.g., through installation and initialization.</li> <li>Web Browser Component (WB): A component that facilitates wallet   selection and credentials selection in the user's device e.g. request   forwarding module or equivalent OS engine. (Request Forwarding Profile   for the Browser-API i.e. W3C WICG Digital Credentials API (referred to   as Browser-API))</li> <li>Trust anchor provider (TAP): It is the provider responsible for   providing the root of trust in the WSCD.</li> <li>Mobile Device (MD): The smart mobile device used to which the Wallet   Instance is provisioned.</li> <li>Wallet Instance (WI): A specific installation of an EUDI Wallet   Solution belonging to, and which is controlled by, a User.</li> <li>Wallet Secure Cryptographic Application (WSCA): An application   provisioned in the WSCD responsible to implement all security-critical   functions like creating, storing, and managing cryptographic keys and   data. It interfaces with the Wallet Instance.</li> <li>Wallet Secure Cryptographic Device (WSCD): A hardware-backed secure   environment for creating, storing, and/or managing cryptographic keys   and data. Examples include Secure Elements (SE), Trusted Execution   Environments (TEEs), and (remote or local) Hardware Security Module   (HSM)</li> </ul> <p>The following interfaces describe how the different components and actors will communicate:</p> <ul> <li>WI-U: Interface between the User and the Wallet Instance.</li> <li>RP-WI: Interface used to exchange PID and/or electronic attestations   of attributes from the Wallet instance to the Relying Party.</li> <li>PP-WI: Interface used to issue PID.</li> <li>AP-WI: Interface used to issue EAA and QEAA.</li> <li>AS-WI: Interface used to issue AEAA.</li> <li>AS-AP: Interface used to exchange or verify authentic data between   authentic sources and the attestation providers.</li> <li>QP-WI: Interface used to provide remote signature services.</li> <li>WI-WSCA: Programmable interface used to manage cryptographic assets   and functions.</li> <li>WSCA-WSCD: Interface to communicate with the WCSD hardware or   operating system.</li> <li>WI-WP: Interface needed to provide support to the user of the wallet   and collect metrics for accounting purposes.</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#system-architecture","title":"System Architecture","text":"<p>Figure 2: EUDIW High Level Design</p> <p>The Architecture and Reference Framework (ARF) sets the context for the target EUDI Wallet Solution by defining:</p> <ul> <li>the foreseen use cases to be served   (ARF#2),</li> <li>the types of flows to be supported   (ARF#annex.4),</li> <li>the roles of the ecosystem   (ARF#3),</li> <li>the lifecycle of the Wallet   (ARF#4.4),</li> <li>the requirements for Issuing PID and (Q)EAA   (ARF#6.6.2),</li> <li>the required building blocks   (ARF#4.2),</li> <li>the logical solution ecosystem   (ARF#3),   and</li> </ul> <p>In this section, a high-level overview of the system's architecture is presented, focusing specifically on the Wallet Instance Component presented in Section 6 (High-Level Design of the EUDI Wallet Ecosystem). The goal is to depict the primary components, their responsibilities, and their interactions. This is depicted using component diagrams accompanied by a brief textual explanation of their role.</p> <p>The minimum EUDIW requirements to be satisfied by the Architecture capabilities are those defined by the EIDAS v2.0, the corresponding Implementing Acts and ARF.</p> <p>Based on the ADR, the EUDIW prototype is a mobile native application (and hence not a web application running within a browser). Of course, EUDIW will reuse all the relevant native libraries and the secure elements on the respective mobile platform.</p> <p>Figure 2 above presents the high-level representation of the EUDIW's architecture. Subsequent sections focus on each major Wallet component, sub-component, or module, describing its purpose and its interactions.</p> <p>In Figure 2 some of the wallet components and interfaces are qualified by a number indicating:</p> <ol> <li>Internal/Local or external/remote.</li> <li>For verifying the attestations, the validation service needs to     receive updated validity status on the (Q)EAA and PID held by the     Wallet, since they can be actively revoked by its Provider (ARF,     PID and (Q)EAA     Lifecycle).</li> <li>As per ARF (section 4:     HLA).</li> </ol> <p>In Figure 2 some of the wallet interfaces are marked by a letter indicating:</p> <ul> <li>P: PID Provider</li> <li>E: (Q)EAA Provider</li> <li>T: Trusted List</li> <li>R: Relying Party</li> <li>S: Signature/Seal Provider (i.e., remote (Q)ES signatures/seal   provider).</li> </ul> <p>The architecture includes the standard architecture layers: UI, Domain, Data. The Domain includes the services and the coordinator and supports the UI. Only the coordinator has access to the data layer.</p> <p>The majority of Wallet components are envisioned as stateless services. Notably, exceptions include the storage services responsible for holding crypto material, attestations data, configuration, and audit data.</p> <p>The wallet coordinator plays a crucial role in overseeing the orchestration of foundational components dedicated to issuing, presenting, and validating. This wallet coordination streamlines user interface accessibility to these essential functionalities. It is noteworthy that even the wallet coordinator, which is capable of executing business processes, is designed to be stateless and depends on the data layer for performing its tasks.</p> <p>The cryptographic capabilities of the Wallet will follow the design approach specified by the W3C Web Cryptography API implemented by the web browsers. This refers to guidance, the design approach, the layering, and the algorithms selection, not on the programming languages used by the web browsers. Any additional required cryptographic capabilities will be implemented following the design principles of W3C Web Cryptography while considering the existing cryptographic capabilities on the respective mobile platform. The minimum requirements to be satisfied by these cryptographic capabilities are those defined by the ARF.</p> <p>A Trust Framework will be established to ensure that sensitive information is protected and the validation service for the ecosystem of Issuers, EUDIW holders, EUDIW Providers, and RPs is properly governed.</p> <p>All transactions that the User has with external parties e.g. PID Issuer, (Q)EAA Issuer, Wallet Issuer, Relying Parties, etc. will be recorded in a transaction log that serves to ensure non-repudiation, criminal investigations and most importantly for the user to review/track all their interactions and identify manipulation/misuse. Any privacy aspects related to the transaction log will be analyzed and, if needed, the document will be updated accordingly.</p> <p>It is important to be stated that beyond the presented components, the Wallet will depend, where necessary, on the capabilities of the current typical mobile device for processing, networking as well as sensors, security/crypto and other device secure elements as these are provided by the hardware, operating system, and libraries. Subsequent versions of this document will provide more details on the device elements to be used. Device native capabilities will be consumed via a well-defined API that will isolate the EUDIW implementation from any specifics of each device.</p> <p>The key specifications that will support the design and implementation of the Wallet include several OpenID specs (namely, OpenID for Verifiable Presentations, OpenID for Verifiable Credential Issuance and Self-Issued OpenID Provider v2), including the specs of attestation formats SD-JWT-VC, CBOR/COSE, and holder identification and binding, the relevant ISO specifications (ISO/IEC 18013-5, ISO/IEC 18013-7 and ISO/IEC 23220-1), and the relevant W3C specifications (Verifiable Credentials Data Model, JSON-LD family of specifications).</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#components-design","title":"Components Design","text":"<p>This section provides a more detailed description of each major component, sub-component, or module of the architecture, including its purpose, functionality, and design decisions. This section details any external dependencies, interfaces, or APIs required for the component to function correctly.</p> <p>As mentioned above, all components except the storage services and the wallet coordinator will be stateless. Additionally, any interaction with device native services will be via a clearly defined API.</p> <p>The primary programming languages used for the development of architecture components are Native Kotlin for Android and native Swift for iOS. (as specified in the ADR decisions, namely ADR-0004 and ADR-0005).</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#wallet-ui","title":"Wallet UI","text":"<p>Figure 3: Wallet UI</p> <p>As all applications running on the device, the Wallet will depend on the device networking, keyboard, microphone, secure elements, and other supporting services. Like other mobile applications, the Wallet UI is an area that the users perceive as belonging to the wallet and will display buttons, notifications, images, and any other UI element the users expect to find in an app's UI. The Wallet UI will not be the only means for receiving user input. The coordinator will have an API that will be triggered as needed for enabling the user to provide input via the device keyboard or for biometric authentication.</p> <p>The Wallet UI provides the means for enabling user interactions with other wallet services as well as the interfaces for presenting third parties requests, creating verifiable presentations from one or more attestations, and collecting User authorization to disclose data.</p> <p>It is important that the UI keeps the holder well informed and gets the user authorization before exchanging or presenting any data. For example, the UI must clearly indicate the Relying Party asking for data, and if it has been authenticated by the Wallet to be what it claims to be.</p> <p>The actions requested by the user are orchestrated by the Wallet Coordinator component. Via the Wallet UI, the user can configure/update the business logic and request additional attestations via the Wallet Admin Service and the Wallet Coordinator. The Wallet UI will also prompt the holder for identification when needed.</p> <p>The UI enables the user to request the list of all stored attestations on the user's device and their status. For each attestation the following information will be presented: the issuer, date of issuance, expiration date, attributes and attestation status (note that the Wallet only accepts attestations after their validation, issuer authentication and user authorization).</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#wallet-coordinator","title":"Wallet Coordinator","text":""},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#introduction-to-wallet-coordinator","title":"Introduction to Wallet Coordinator","text":"<p>Figure 4: Wallet Coordinator</p> <p>The typical application architecture consists of 3 layers. The UI Layer the Domain Layer and the Data Layer. The UI Layer is responsible to display the application data and serves as the primary point of user interaction. The Data Layer is responsible to persist and serve application's data. The Domain Layer implements the business logic of the application, and the business data exchanges with the Data Layer.</p> <p>The Domain Layer of the EUDI Wallet is responsible to implement various use cases and protocols. The implementation of each protocol is assigned to a particular service as shown by the EUDIW High Level Design diagram (Presentation Service, Validation Service, Issuance Service, etc.).</p> <p>The shared business logic, the interactions between components and the business data exchanges with the Data Layer have been assigned to the Wallet Coordinator instead of splitting this functionality and assigning it to each component. Essentially, the Wallet Coordinator is the shared part of the Domain Layer (for logic re-use or for design improvement and testability) and it is the only component interacting with the Data Layer. Use cases orchestration and auditing for example, are assigned to the Wallet Coordinator.</p> <p>The Wallet Coordinator, due to its role as mediator, will also be responsible for recording all User's transactions with external parties e.g., PID Issuer, (Q)EAA Issuer, Wallet Issuer, Relying Parties, etc. in a transaction log.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#wallet-admin-service","title":"Wallet Admin Service","text":"<p>Figure 5: Wallet Admin Service</p> <p>The Wallet Admin Service provides an interface allowing the user to configure the appropriate Wallet business logic. The preferences/configuration is persistent and managed by the Storage Service (see configuration examples below).</p> <p>The Issuing Service, the Coordinator and the Admin Service will collaborate for managing attestations. The configuration, the data models of the attestations and the user attestations will be stored by the Coordinator in the Wallet Data Storage area.</p> <p>The Wallet Admin Service, supported by the relevant Coordinator API and the UI, will be responsible for:</p> <ul> <li>Validating and storing user attestations and the relevant data models   and metadata.</li> <li>Enabling the user to manage the attestations and to report on the   available attestations and their status.</li> <li>Querying the authoritative relying party registration list to ensure   that the registration has not been revoked/suspended/changed.</li> <li>Collecting user preferences like for example the frequency of   contacting authoritative relying parties and setting the status of   attestations.</li> <li>Retrieving, managing and presenting the transaction log.</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#wallet-driving-application-service","title":"Wallet Driving Application Service","text":"<p>Figure 6: Wallet Driving Application Service</p> <p>The Wallet Driving Application (WDA) Service will support the user interacting with the Wallet UI in creating a presentation based on PID/(Q)EAA by selecting attestations and for each attestation the attributes to be included in the presentation. The selections will be stored temporarily in the Wallet Data Storage area by the Wallet Coordinator (to be used by the Wallet Presentation Creation Service).</p> <p>The Wallet Driving Application will associate each selected attribute with metadata (e.g., the attestation issuance scheme, the attestation type, and the index of each selected attribute). The metadata could be used for organizing the presentation and in the case the selected attestations support selective disclosure to provide an issuer-based proof instead of one based on self-signing.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#wallet-presentation-creation-service","title":"Wallet Presentation Creation Service","text":"<p>Figure 7: Wallet Presentation Creation Service</p> <p>The Wallet Presentation Creation Service will be invoked by the user via the UI and will retrieve the temporary stored (by the WDA via the Wallet Coordinator) presentation from the Wallet Data Storage area and create the final presentation to be transmitted to the requesting RP.</p> <p>The Wallet Presentation Creation Service organizes the selected attributes per attestation and per attribute index. In the case the selected attributes belong to attestations that were issued using a scheme that supports selective disclosure (e.g., ISO/IEC 18013-5, SD-JWT-VC) the Wallet Presentation Creation Service will generate an issuer-based proof for the selected attributes. Else, the Wallet Presentation Creation Service will self-sign the selected attributes.</p> <p>For presentations the relying party will be able to receive for each attribute the following information: the issuer, date of issuance, the expiration date and the attribute status.</p> <p>In the case the End-user uses a Self-Issued OP (i.e. SIOPv2), can authenticate themselves and create the final presentation to be transmitted to the requesting RP.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#issuance-service","title":"Issuance Service","text":"<p>Figure 8: Wallet Issuance Service</p> <p>The Issuance Service requests, receives, verifies, and stores the selected issued attestations. The process is orchestrated by the coordinator after retrieving/receiving the attestations and includes a call to the Validation Service for validating the attestation signatures. Reception of attestations can be asynchronous and hence persistent state will need to be maintained.</p> <p>The supported attestations formats are:</p> <ul> <li>ISO/IEC 18013-5 for PID and potentially other identity related   documents (e.g. mDL).</li> <li>SD-JWT-VC for PID (included in the roadmap)</li> <li>W3C Verifiable Credentials for other (Q)EAA</li> <li>JSON-LD for other (Q)EAA</li> </ul> <p>as per the ARF.</p> <p>The supported attestations protocols are:</p> <ul> <li>OpenID4VCI   for PID, QEAA and EAA.</li> </ul> <p>At a high-level the issuance process includes the following steps:</p> <ul> <li>Request and get issuer's metadata;</li> <li>Validate issuer;</li> <li>Authenticate and authorize with issuer;</li> <li>Request credential and submit the required claims (with biometric or   claim-based holder bindings);</li> <li>Receive, verify, and store the attestations (directly or via a QR   Code).</li> </ul> <p>For the mDL the schema and data model of ISO/IEC 18013-5 will be followed (as per ADR-0002).</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#signatureseal-service","title":"Signature/Seal Service","text":"<p>Figure 9: Wallet Signature/Seal Service</p> <p>EUDI Wallet must enable the User, under certain conditions, to create qualified electronic signatures or seals.</p> <p>This can be achieved by having the EUDIW certified as a qualified signature/seal creation device (QSCD) or, by implementing secure authentication and signature/seal invocation capabilities to a local or remote QSCD. This responsibility is assigned to the Signature/Seal Service.</p> <p>EUDI Wallet interfaces with QSCD devices will be expanded in future versions of this document to include on device, internal, external and remote/cloud based key management and storage support.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#validation-service","title":"Validation Service","text":"<p>Figure 10: Wallet Validation Service</p> <p>The Validation Service is triggered by the coordinator to validate the received attestations (PID, QEAA, EAA) submitted by the Issuance Service. For verifying the PID and (Q)EAAs, the service accesses the relevant public certificates in the trusted source/list via the Wallet-Trusted-List interface and verifies their signatures. (for both remote and proximity verifications).</p> <p>The Validation service, as part of the EUDIW Trust Model, will also be used to validate the Relying Party, the PID Provider, the (Q)EAA Issuer, the Signature/Seal service provider, and may be used to validate the holder's (Q)EAA and PID (since they can be actively revoked by their Provider).</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#proximity-presentation-service","title":"Proximity Presentation Service","text":"<p>Figure 11: Wallet Proximity Presentation Service</p> <p>The Proximity Presentation Service implements the proximity attestations presentation as described by ISO/IEC 18013-5. This standard elaborates the mDL use case, but the approach is extensible to any other type of attestations. The data elements used for the mDL in ISO/IEC 18013-5 are qualified using a namespace and hence any other credential can be supported as far as it is defined in a different namespace. PID namespace, schema and model must be defined for them to be transferred using ISO/IEC 18013-5.</p> <p>The Proximity Interface is a short-range link (QR Code, NFC, BLE) between the Wallet and the RP's attestations reader and is based on the device data retrieval approach. Given this approach, security must be assured via the mandatory security mechanisms specified in the standard session encryption, issuer data authentication, optionally reader authentication and credential authentication.</p> <p>This service implements the specifics required for proximity flows and hence allows the rest of the components to work in a more generic way, focusing only on the request and the response.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#remote-presentation-service","title":"Remote Presentation Service","text":"<p>Figure 12: Wallet Remote Presentation Service</p> <p>The Remote Presentation Service implements the remote presentation use case triggered by the credential reader as described by the OpenID4VP. The exchanges are over the internet. This service implements the specifics required for remote flows and hence allows the rest of the components to work in a more generic way, focusing only on the request and the response.</p> <p>Please note that using the OAuth 2.0 terminology, for this context, the Wallet is considered an OAuth 2.0 Authorization Server, with protected resources the Wallet holder's attestations. The third party with which the Wallet connects becomes the OAuth 2.0 Client. Hence, the OAuth 2.0 capabilities for Attestations Presentation, transferring Verifiable Presentations and the issuance of Access Tokens for accessing APIs are enabled.</p> <p>For the typical use case, after the connection with the Relying Party (RP) is established, the RP requests verifiable attestations from the Wallet Holder (Presentation Request). The RP request to the Wallet is an OAuth 2.0 Authorization Request [RFC-6749] enriched with the new parameters defined by the OpenID4VP specification.</p> <p>For integrity, source authentication, and confidentiality, the RP request parameters can be wrapped in a JSON Web Token (JWT), signed with JSON Web Signature (JWS) and encrypted with JSON Web Encryption (JWE) [RFC-9101: JWT-Secured Authorization Request].</p> <p>The Remote Presentation Service on the device notifies the Holder for the requested attestations and upon Holder's authorization (via the UI), the selected attributes to be disclosed are packaged as a Verifiable Presentation (VP) Token (vp_token) and sent to the RP.</p> <p>The RP verifies the VP token and once satisfied (meets RP security requirements), considers the Wallet Holder as identified/authenticated and a Bearer Access Token is returned to the Holder. The Holder can then access those protected resources/services under the RP authority granted by the access token.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#cryptographic-management-and-data-storage-services","title":"Cryptographic Management and Data Storage Services","text":"<p>Figure 13: Cryptographic Management and Storage Services</p> <p>User authentication data, attestations (PID, DL, (Q)EAA) and their metadata will be stored within the Wallet Data Storage as presented in Figure 13. Cryptographic keys and schemes will be stored under the secure area managed by the Secure Cryptographic Service. Temporal state (e.g., last user authentication event, state of processes) will be stored within the Wallet Data Storage.</p> <p>The Cryptographic Keys Management Service provides data storage and retrieval services for key material. The foreseen data include:</p> <ul> <li>Cryptographic keys and schemes (crypto algorithms and material).</li> </ul> <p>The Data Storage Service provides data storage and retrieval services for attestations and schemas. The foreseen data include:</p> <ul> <li>Attestations (PID, mDL, (Q)EAA) and public keys for validating issued   attestations.</li> <li>Credential data models and the signature scheme used.</li> </ul> <p>Both services, based on their configuration, can delegate their responsibilities to external services as shown in Figure 13. In all cases the Wallet must always authenticate the user before accessing the cryptographic area.</p> <p>The required Public Keys will be retrieved from trusted lists.</p> <p>For the explanation of the Wallet components qualifiers used in Figure 13, see Figure 2.</p> <p>A default Cryptographic Key Managements System Service API (named as Secure Channel Interface (SCI) in the Figure 1), is provided by the Wallet Coordinator. Wallet implementors can inject into the Wallet Coordinator one or more custom implementation for the Cryptographic Key Managements System Service API.</p> <p>By default, the Wallet Coordinator provides a built-in implementation of the Cryptographic Key Managements System Service API, that utilizes secure platforms such as the Android Keystore. This default implementation ensures secure key generation and storage, leveraging hardware-backed security features when available.</p> <p>However, recognizing the diverse security requirements of different implementations, the Wallet architecture allows for extensibility and customization. Wallet implementors can inject one or more custom Cryptographic Key Managements System Service API implementations into the Wallet Coordinator. These custom implementations may use specialized security frameworks or adhere to specific policies for cryptographic key management.</p> <p>Custom implementations allow Wallet Providers to adapt the Cryptographic Key Management System Service API to meet unique regulatory or security needs. For example, they can align with country-specific cryptographic standards or policies for storing and managing keys on device, in eSIM, to external devices and to remote cloud key management storages.</p> <p>Multiple SecureArea implementations can coexist within the Wallet, enabling flexibility in managing different security contexts per credential/document. This flexibility enhances overall security and trustworthiness.</p> <p>By allowing multiple SecureArea implementations, stakeholders or Member States can design their cryptographic processes to mitigate risks specific to their environment. For example, they can implement additional controls for highly sensitive data or advanced attack detection mechanisms.</p> <p>Customization also reduces reliance on third-party solutions or default implementations that may not fully meet specific stakeholders' or Member States' needs.</p> <p>The extensibility and customization of the Cryptographic Key Management System Service API provides flexibility and ensures the Wallet can evolve alongside emerging security trends, regulatory requirements, and technological advancements, making it versatile and future-proof.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#signatureseal-provider","title":"Signature/Seal Provider","text":"<p>Trust Provider Signer is a remote signing service provider and client. It includes the several signature service features. The key feature is that it is possible to sign documents as an authenticated user. Authentication in this case refers to authentication using OpenId4VP therefore enabling EUDI Wallet PID based access.</p> <p>Additional features include certificates creation management.</p> <p>Furthermore, a Wallet initiated signing process is supported by the EUDI Wallet for remote signing. The Wallet initiated signing process consists of all the modular and re-useable parts.</p> <p>Server initiated signing integrated will be also enabled in the EUDI ecosystem by pushing/requesting signing authorization from the EUDI Wallet.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#relying-party-registration-service","title":"Relying Party Registration Service","text":"<p>As per the European Digital Identity Wallet Architecture and Reference Framework Trust Model,</p> <ul> <li>Relying Parties are registered by a Relying Party Registrar in their   Member State.</li> <li>As a result of registration, a Relying Party receives an access   certificate from a Relying Party Access CA.</li> <li>The RP access certificate is used by the Wallet Instance to   authenticate the Relying Party Instance.</li> <li>Relying Party authentication is a process whereby a Relying Party   proves its identity to a Wallet Instance, in the context of a   transaction in which the Relying Party requests the Wallet Instance to   release some attributes.</li> <li>Relying Party authentication is included in the protocol used (both in   ISO/IEC 18013-5 and OpenID4VP) by a Wallet Instance and a Relying   Party Instance to communicate.</li> </ul> <p>To facilitate the registration of Relying Parties into the EUDI Wallet reference implementation eco-system a registration service is setup to allow Relying Parties to register their verification system into the EUDI Wallet reference implementation Trust eco-system.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#eudi-core-verifier-sdk","title":"EUDI Core Verifier SDK","text":""},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#data-models","title":"Data Models","text":"<p>The EUDI Verifier Core library enables the development of mobile verifier applications compliant with the ISO 18013-5 standard for mobile driving licence (mDL) and mobile identity (mDoc) verification. It provides the foundational capabilities required to manage secure device engagement, data exchange, and document validation between a verifier and a holder. Acting as a coordination layer, it ensures that document authenticity, integrity, and status are reliably confirmed through standardized communication and validation processes. It offers configurable mechanisms for managing transfer sessions, handling verification events, and integrating with existing logging and monitoring frameworks, thereby facilitating interoperability and conformance with the broader EUDI Wallet ecosystem. This section describes the system's data structures, storage, and management.</p> <p>The data to be managed by the wallet include:</p> <ul> <li>Cryptographic keys and schemes (crypto algorithms and material).</li> <li>Attestations (PID, mDL, (Q)EAA).</li> <li>Attestations data models and attestations metadata (attestation   signature scheme, type, issuer, bitemporality,   public-key/trusted-authority).</li> <li>Trusted Lists.</li> <li>W3C credentials context schemas.</li> <li>Privacy dashboard usage / audit records.</li> </ul> <p>Based on ARF v1.4 the data models that will be used by the EUDI Wallet for Verifiable Attestations are:</p> <ul> <li>Data Models aligned to ISO/IEC 18013-5:2021 attestations.</li> <li>Other data models include the ARF Data Models aligned to the   Verifiable Credentials Data Model attestations (see last W3C   Candidate Recommendation Draft 05 October   2024).</li> </ul> <p>Based on ARF v1.4, the attestations formats that will be used by the EUDI Wallet are:</p> <ul> <li>attestations in   JWT   and   SD-JWT   formats (based on JSON format)</li> <li>attestations in CBOR   format (based on JSON-like binary format)</li> </ul> <p>ARF v1.4 already specifies the requirements for Issuing PID and (Q)EAA.</p> <p>The data will be managed by the Cryptographic Management and Data Storage Services component.</p> <p>The data models that will be used by the EUDI Wallet for Verifiable Attestations are:</p> <ul> <li>W3C Verifiable Credentials data model.</li> <li>ISO/IEC 18013-5 compliant data model.</li> </ul> <p>The work on designing/creating data models is underway and will be included in a future version of this document. Alternatively, and at the very least, a link to the different data models is foreseen. Specific data models relevant to Membership card, Travel licenses, Temporary passport will be included.</p> <p>For information on the PID data model see PID Rule Book. The mDL specifications follow the mDL Rule Book.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#process-flow","title":"Process Flow","text":"<p>This section presents the key processes, workflows, or algorithms within the system, using flowcharts, sequence diagrams, or state-transition diagrams. This section also explains the rationale behind these processes and any relevant constraints or optimizations.</p> <p>ARF 1.4 includes Annex 4 for service blueprints that describe the flows for a number of processes. The list is included below to ease readership:</p> <ul> <li>Annex   4.01 -   Blueprint Initialization and activation</li> <li>Annex   4.02 -   Blueprint Online identification and authentication</li> <li>Annex   4.03 -   Blueprint Issuing mDL</li> <li>Annex   4.04 -   Blueprint Presenting mDL (Proximity-Supervised)</li> <li>Annex   4.05 -   Blueprint Presenting mDL (Proximity-Unsupervised)</li> <li>Annex   4.06 -   Blueprint Remote QES - Creating a signature for authentication /   authorisation</li> <li>Annex   4.07 -   Blueprint Remote QES - Enrolment</li> <li>Annex   4.08 -   Blueprint Remote QES - Creating a signature channeled by EUDI Wallet</li> <li>Annex   4.09 -   Blueprint Remote QES - Creating a signature channeled by Relying Party</li> <li>Annex   4.10 -   Blueprint QES - View history of signatures</li> <li>Annex   4.11 -   Blueprint Local QES - Enrolment</li> <li>Annex   4.12 -   Blueprint Local QES - Creating a signature.</li> </ul> <p>Additionally, the overview for the core flows is included in the following section.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#attestations-issuance","title":"Attestations Issuance","text":"<p>The descriptions in the subsections below assume that the user has downloaded and installed a certified EUDI Wallet mobile application, and that the application is functional.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#pid-issuance","title":"PID Issuance","text":"<p>The MS PID Provider identifies and authenticates the user of the EUDI Wallet at LoA High and verifies the EUDI Wallet status and certification. The MS PID Provider may present the PID data to the user before issuance and ask for user's confirmation. The MS PID Provider generates and issues the PID to the EUDI Wallet. Issuance to the device can be done via a QR Code or NFC or HTTP on top of any secure transport layer.</p> <p>PID will be issued in ISO 18013-5 and W3C VC formats and will include the attributes specified by ARF (see PID Attributes for Natural Persons).</p> <p>The EUDI Wallet's Issuance Service (see 6.4) will receive, verify, and store the PID and the PID metadata.</p> <p>For information on the PID data model see: PID Rule Book under ARF 1.4.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#mdl-issuance","title":"mDL Issuance","text":"<p>The mDL issuance will follow the same approach as PID.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#qeaa","title":"(Q)EAA","text":"<p>An RDF graph with two nodes (Subject and Object) and a Predicate An RDF graph with two nodes (Subject and Object) and a Predicate An RDF graph with two nodes (Subject and Object) and a Predicate An RDF graph with two nodes (Subject and Object) and a Predicate An RDF graph with two nodes (Subject and Object) and a PredicateBased on the ARF:</p> <ul> <li>Qualified EAA are provided by QTSPs.</li> <li>(Q)EAA MUST be issued in accordance with one of the data model   specifications: ISO/IEC 18013-5:2021 and/or W3C Verifiable Credentials   Data Model 1.1 and use one of the following signature and encryption   formats as detailed in: JOSE RFCs, COSE RFCs accordingly to data model   used for the attestation.</li> <li>(Q)EAA SHOULD use signature and encryption algorithms in accordance   with SOG-IS ACM.</li> <li>(Q)EAA SHOULD be issued accordingly to OpenID4VCI protocol.</li> <li>Qualified EAA are provided by QTSPs. The general Trust Framework for   QTSPs applies also to QEAA, but specific rules for this Trust Service   need to be defined as well.</li> <li>EAA can be provided by any Trust Service Provider. While they are   supervised under eIDAS, it can be assumed that other legal or   contractual frameworks than eIDAS mostly govern the rules for   provision, use and recognition of EAA.</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#proximity-and-remote-flows","title":"Proximity and Remote Flows","text":""},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#proximity-flows","title":"Proximity flows","text":"<p>Proximity flows are related to scenarios where the EUDI Wallet User is physically close to a Relying Party and the attestation exchange and disclosure (PID and/or QEAA) happens using proximity protocols (NFC, Bluetooth, QR-Code, etc.), without the User having internet connectivity. The two proximity flows differ in one important way.</p> <ul> <li>Supervised flow: In the supervised flow, the EUDI Wallet presents   verifiable attributes to, or under supervision of, a human acting as a   Relying Party (who may operate a device of their own).</li> <li>Unsupervised flow: In the unsupervised flow, the EUDI Wallet   presents verifiable attributes to a machine without human supervision.</li> </ul> <p>For more information on the proximity flows see ARF 1.4:</p> <ul> <li>Annex 4.04: presenting mDL (proximity-supervised) The service   blueprint about presenting mDL (proximity-supervised) is described in   file Annex 4.04 - EUDI Wallet - presenting mDL   (proximity-supervised.pdf).</li> <li>Annex 4.05: presenting mDL (proximity-unsupervised) The service   blueprint about presenting mDL (proximity-unsupervised) is described   in the file Annex 4.05 - EUDI Wallet - presenting mDL   (proximity-unsupervised.pdf).</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#remote-flows","title":"Remote flows","text":"<p>Remote flows are related to scenarios where the data exchanges happen over the Internet.</p> <ul> <li>Remote cross-device flow: In the remote cross-device flow, the   EUDI Wallet User consumes information from the service on another   device than the EUDI Wallet device, which is only used to secure the   session (for instance using the EUDI Wallet to scan a QR code on a   login page to access a bank account on their web browser).</li> <li>Remote same-device flow: The remote same-device flow, the EUDI   Wallet User uses the EUDI Wallet device both for securing the session   and to consume the information from the remote service (typically   using the same device browser).</li> </ul> <p>For more information on the remote flows see ARF 1.4:</p> <ul> <li>Annex   4.02:   Online Identification &amp; Authentication.</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#management-of-key-material","title":"Management of Key Material","text":"<p>Once the device is unlocked and the holder is authenticated, the wallet must be able to support all traditional transactions performed by the holder (once the relying party implements the relevant capabilities).</p> <p>Like smart cards, a holder may have more than one key pairs, with each Secret Key (SK) replacing a smart card. Secret Keys must be stored within the device secure keystore for cryptographic keys. Usage of these keys must be linked to a holder and to holder's authentication LoA. The required LoA for each key must be configurable. Signed Public Keys (e.g., signed by a bank), linking the key with the holder, will be available at Trusted Stores and potentially cashed by the Relying Party.</p> <p>Modern mobile devices provide secure keystores for cryptographic keys. The key material is non-exportable, and the device can be configured to require strong authentication for using the keys.</p> <p>Since the available configurations on the device will be different e.g. smartphone without certified (EAL4+) Secure Storage the wallet issuer and the approving authorities may classify the devices and the wallet solutions by their Level of Trust (LoT), evaluate the risks and restrict accordingly the potential transactions based on their impact. Further, it is expected that a device will need to be certified against EAL4+ with the AVA.VAN5 profile and the overall wallet solution (including the specific device configuration) will need to be certified against LoA High requirements.</p> <p>Any imposed restrictions will be stored as a secure element at issuance time and act as a precondition for each transaction.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#trust-management","title":"Trust Management","text":"<p>Trust management ensures the security and integrity of issued attestations by validating cryptographic elements according to ISO/IEC 18013-5. This includes certificate path validation of the MSO header's certificate, digital signature verification of the issuer authentication structure, digest value validation, consistency checks for document type, and validation of the credential's validity information. These processes help maintain authenticity, prevent tampering, and ensure compliance with established standards.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#integration-and-communication","title":"Integration and Communication","text":"<p>This section describes how the system's components interact and communicate with one another, including any protocols, data formats, or messaging patterns used. This section covered external integrations and third-party services the system relies on.</p> <p>The hexagons representation of the parties and the links in the figure indicate that potentially multiple different APIs will be required by each Party.</p> <p></p> <p>Figure 14: EUDIW Environment and Interaction Interfaces. Index: W: Wallet, P: PID Provider, E: (Q)EAA Provider, T: Trusted List, R: Relying Party</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#user-wallet-w","title":"User Wallet (W)","text":"<p>The Wallet provides interfaces for communicating with Attestation Providers, Trusted Lists and Relying Parties.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#attestation-providers-p","title":"Attestation Providers (P)","text":"<p>The Attestation Providers issue conformant verifiable attestations. Examples are PID, mDL, QEAA (e.g., University Degree) and EAA.</p> <p>Attestation Providers can be government entities, identity service providers, digital platforms, mobile networks, wallet providers, financial institutions, educational institutions such as universities or any entity a user trusts to set-up identity claims.</p> <p>Attestations can be self-issued (see SIOP) using a certificate that is trusted by the relevant RP for those use cases that this makes sense.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#trusted-lists-t","title":"Trusted Lists (T)","text":"<p>Trusted list services store and sign public key material (public key certificates) and make them available to verifiers.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#trust-list-provider-tlp","title":"Trust List Provider (TLP)","text":"<p>A Trusted List Provider is a body responsible for maintaining, managing, and publishing a Trusted List. Within the EUDI Wallet ecosystem, Trusted Lists exist for the following entities:</p> <ul> <li>Wallet Providers,</li> <li>PID Providers,</li> <li>QEAA Providers,</li> <li>PuB-EAA Providers,</li> <li>Access Certificate Authorities (for RP),</li> <li>Qualified Electronic Signature Remote Creation (QESRC) Providers.</li> </ul> <p>Trusted Lists contain the trust anchors of the relevant entities. A trust anchor is a combination of a public key and the identifier of the associated entity and may be used to verify signatures created by that entity.</p> <p>An\u00a0entity's status as a trusted entity can be verified by checking whether they are present on the relevant Trusted List.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#trusted-lists-tl-and-eu-list-of-trusted-lists-eu-lotl","title":"Trusted Lists (TL) and EU List of Trusted Lists (EU LoTL)","text":"<p>The\u00a0TL\u00a0includes information related to the trust service providers (within the EUDI Wallet ecosystem: Wallet Providers, PID Providers, QEAA Providers, PuB-EAA Providers, Access Certificate Authorities (for RP), and Qualified Electronic Signature Remote Creation (QESRC) Providers) which are supervised by the competent Member State, together with the trust anchor and other information related to the trust services provided by them.</p> <ul> <li>A TL is created, electronically signed, published and managed by a   Member State.</li> </ul> <p>The\u00a0EU LOTL\u00a0combines all national Trusted Lists into a single, easily accessible list, simplifying the verification of digital identities across Member States.</p> <ul> <li>The EU LOTL is created, electronically signed, published and managed   by the EC.</li> </ul> <p>The source of trust of the TLs is the EU List of the Trusted Lists (LOTL). And the source of trust for the LOTL is the Official Journal of the European Union (OJEU)</p> <ul> <li>LOTL signing certificates and the location of the LOTL XML file are   contained in the LOTL itself, as detailed in the OJEU publication.</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#reference-implementation-trusted-list-provider","title":"Reference Implementation Trusted List Provider","text":"<p>The Reference Implementation Trusted List Provider has the following features:</p> <ul> <li>Users:<ul> <li>TSL Operator - Member States</li> <li>LoTL Operator - EC</li> </ul> </li> <li>Functionalities for TSL Operators:<ul> <li>Manage TSPs and their trust services</li> <li>Create and sign TLs</li> </ul> </li> <li>Functionalities for LoTL Operators:<ul> <li>Create and sign LoTL (combining the TL created by the Member States)</li> </ul> </li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#relying-parties-r","title":"Relying Parties (R)","text":"<p>The Relying Parties are those parties relying on user identification or on proving other qualifications. They use trusted lists for verifying the presented attestations.</p> <p>The Attestation verification may be outsourced by the Relying Party to a Verifier (V). Attestation verification includes checking that the attestation exists and has not been revoked or expired at the verification time.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#typical-interactions-between-parties","title":"Typical interactions between parties","text":"<p>The user stores and manages Attestations using a User Wallet (W).</p> <p>Holder =&gt; Relying Party: The Holder asks the Relying Party for services and presents the selected/requested attestations.</p> <p>Relying Party =&gt; Verifier: The Relying Party asks/uses a Verifier to verify the provided attestations (over the internet could be via an HTTP redirect). The Verifier can be part of the Relying Party or an outsourced entity.</p> <p>Verifier =&gt; Relying Party: The Verifier informs the Relying Party on the outcome (attestations valid or invalid/missing/expired/withdrawn). For the verification the Verifier may need to contact trusted services.</p> <p>Relying Party =&gt; Holder: The Relying Party based on the Verifier's response decides to provide the service or not and informs the Holder.</p> <p>In the case the Holder does not hold the attestations requested by the Relying Party or are not valid or have expired or withdrawn, then the Holder must contact the appropriate Credential Issuer for the missing/invalid attestations.</p> <p>Holder =&gt; Attestations Issuer: The Holder requests attestations and provides evidence and may succeed or not.</p> <p></p> <p>Figure 15: Typical interactions between parties</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#testing-and-integration-environments","title":"Testing and Integration Environments","text":"<p>The Testing and Integration Environments provide a structured setup for validating the EUDIW system components. These environments facilitate secure issuance, verification, registration, and signing of Verifiable Credentials (VCs) using OpenID protocols.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#issuer-openid4vci","title":"Issuer - OpenID4VCI","text":"<p>The Issuer component is responsible for issuing Verifiable Credentials (VCs) using OpenID4VCI. The following links provide access to different issuer services:</p> <ul> <li>Issuer</li> <li>Issuer Tester</li> <li>Issuer Backend</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#verifier-openid4vp","title":"Verifier - OpenID4VP","text":"<p>The Verifier component enables verification of issued credentials using OpenID4VP. The following links provide access to different verifier services:</p> <ul> <li>Verifier</li> <li>Verifier Backend</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#relying-party-registration","title":"Relying Party Registration","text":"<p>Relying parties use these links to register and integrate their services with the EUDIW system:</p> <ul> <li>Service Providers   Registry</li> <li>Relying Party Tester</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#signing","title":"Signing","text":"<p>The signing component ensures the authenticity and integrity of issued credentials. The following signing services are available:</p> <ul> <li>Trust Provider Signer</li> <li>Wallet-Centric Signer</li> <li>Relying-Party-centric -- Relying Party test site</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#demo-use-cases","title":"Demo - Use Cases","text":"<p>These demo environments showcase various use cases and provide a testing ground for real-world implementations:</p> <ul> <li>Booking Demo</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#technical-specifications-maturity","title":"Technical Specifications Maturity","text":"<p>EUDIW MVP design and implementation depends on a set of core specifications, as well as their dependencies, to be in the published status or at least drafts at a mature stage. It is assumed that by Jan 2024 all core specifications referenced below that are currently in the draft status will reach the published status. The status of the core standards at the time of writing (Feb 2025) is the following:</p> <ul> <li>ISO/IEC 18013-5 --   Published (Edition 1, 2021)</li> <li>ISO/IEC 23220-4 --   Finalizing Draft, but includes the main parts of interest</li> <li>ISO/IEC 18013-7 --   Published   (Edition 1, 2024)</li> <li>W3C Verifiable Credentials Data Model   v1.1 -- Published (W3C   Verifiable Credentials Data Model   v2.0 -- Candidate   Recommendation Draft but includes the main parts)</li> <li>Selective Disclosure JWT   (SD-JWT-VC)   Draft</li> <li>Presentation Exchange   v2.0.0 -   Published</li> <li>OpenID4VP   -- Draft 24 (Published 27/01/2025)</li> <li>SIOPv2</li> <li>OID4VCI -- Draft   15   (Published 19/12/2024)</li> <li>OpenID4VC High Assurance Interoperability   Profile -   Draft 01 (Published 07/12/2024)</li> </ul> <p>In the coming months the development focus will be on the OID4VP third implementer's draft (Draft 23) and the OID4VCI second implementer's draft (Draft 15).</p> <p>Future releases of this document may cover more aspects such as:</p> <ul> <li>current hardware limitations for key management</li> <li>adjustments required for low-end mobile devices.</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#missing-documents-gaps-for-which-no-standard-or-specification-can-currently-be-referenced","title":"Missing documents: Gaps for which no standard or specification can currently be referenced","text":"Common formats for Relying Party registry information\u00a0 Common Access CA Certificate Policy\u00a0 Common set of Relying Party information to be registered\u00a0 Specification of Wallet Trust Evidence contents\u00a0 Specification of Proof of Association implementation\u00a0 Specification of EUDI Trust Mark\u00a0 Specification of common interface for lodging complaints to DPAs\u00a0 Specification of common interface for data deletion requests to Relying Parties\u00a0 Specification of interfaces and formats for the catalogue of Attestation Rulebooks and attributes\u00a0 Specification of Wallet-to-Wallet interactions\u00a0 Specification of systems enabling the notification and subsequent publication of Provider information\u00a0 Specification of backup and restore functionality\u00a0 Specification of Wallet Unit Attestation\u00a0 Specification of interfaces related to Authentic Sources Specification of mechanism allowing embedded disclosure policies\u00a0 ARF - Annex 3.1 - PID Rulebook ARF - Annex 3.3 - Pseudonym Rulebook"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#other-documents-to-be-finished-or-created","title":"Other documents to be finished or created","text":"(Natural person) PID Rulebook with SD-JWT VC\u00a0details Legal-person PID Rulebook\u00a0 Pseudonym Rulebook\u00a0 Architecture Reference Framework"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#annex-1-references-to-external-resources","title":"Annex 1 - References to External Resources","text":"<p>This section lists the external resources, such as standards, specifications, or research papers, that have informed the system's design.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#cborcose-specifications-1","title":"CBOR/COSE Specifications","text":"<p>This section provides a short overview of the cryptography related specifications that are based on the Concise Binary Object Representation (CBOR) data format and are used in the Verifiable Attestations domain.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#concise-binary-object-representation-cbor-rfc-8949","title":"Concise Binary Object Representation (CBOR) - RFC 8949","text":"<p>The Concise Binary Object Representation (CBOR) is a data format designed for small code size and small message size. CBOR is the binary equivalent of the JSON textual format. CBOR, like JSON is simple and generic. Existing formats in this category are ASN.1's BER and DER and many others (see references in RFC 8949). The reader will benefit from reading the objectives of CBOR as those are explained in RFC 8949 (that is, an optimal but balanced design).</p> <p>For simplification, applications that need to transfer binary data, could use CBOR instead of JSON. In such cases, using JSON would require base64 encoding and decoding of the binary data. CBOR, instead of JSON, could also be used in cases where the message size matters since CBOR is more compact.</p> <p>ISO/IEC 18013-5 uses CBOR data structures encoded according to RFC 8949. JSON structures are encoded according to RFC 8259.</p> <p>References: https://cbor.io/, See also: rfc8943-CBOR-dates.</p> <p></p> <p>Figure 16: CBOR Data Items</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#concise-data-definition-language-cddl-rfc-8610","title":"Concise Data Definition Language (CDDL) - RFC 8610","text":"<p>CDDL specifies a notational convention for defining CBOR data structures.</p> <p>The goals of the CBOR notational convention as stated explicitly in RFC-8610 are:</p> <ul> <li>Provide an unambiguous description of the overall structure of a CBOR   data item.</li> <li>Be flexible in expressing the multiple ways in which data can be   represented in the CBOR data format.</li> <li>Be able to express common CBOR data types and structures.</li> <li>Provide a single format that is both readable and editable for humans   and processable by a machine.</li> <li>Enable automatic checking of CBOR data items for data format   compliance.</li> <li>Enable extraction of specific elements from CBOR data for further   processing.</li> </ul> <p>The CDDL (Concise Data Definition Language) as specified in RFC 8610 is used by ISO/IEC 18013-5 to specify the CBOR and JSON-encoded data structures.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#cbor-object-signing-and-encryption-cose-rfc-9052","title":"CBOR Object Signing and Encryption (COSE) - RFC 9052","text":"<p>CBOR is a data format designed for small code size and small message size. There is a need for the ability to have basic security services defined for this data format.</p> <p>RFC 9052 defines the CBOR Object Signing and Encryption (COSE) protocol and describes how to create and process signatures, message authentication codes, and encryption using CBOR for serialization. RFC 9052 additionally describes how to represent cryptographic keys using CBOR.</p> <p>COSE usage examples by ISO/IEC 18013-5:</p> <ul> <li>Device and reader ephemeral keys</li> <li>Digital signatures generated over the mobile security object (MSO).</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#cborcose-implementations","title":"CBOR/COSE Implementations","text":"<p>A lean library for coding/decoding CBOR data is:</p> <ul> <li>https://github.com/c-rack/cbor-java.</li> </ul> <p>The library c-rack/cbor-java above is a dependency of</p> <ul> <li>https://github.com/google/identity-credential</li> </ul> <p>This library provides more extended support for the ISO/IEC 18013-5 implementation.</p> <p>As a principle, a layered approach, followed by the previous high-quality libraries, provides more flexibility. Other libraries for CBOR data coding/decoding are:</p> <ul> <li>https://github.com/peteroupc/CBOR-Java</li> <li>https://github.com/google/cbortree.</li> </ul> <p>A robust Java and Android open-source library for CBOR Object Signing and Encryption is https://github.com/android/cose-lib. See also: https://github.com/cose-wg/COSE-JAVA</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#jsonjose-specifications","title":"JSON/JOSE Specifications","text":"<p>This section provides a short overview of the cryptography related specifications that are based on the JSON data format and are used in the Verifiable Attestations domain.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#json-web-token-jwt---rfc-7519-rfc-8725","title":"JSON Web Token (JWT) - RFC 7519 &amp; RFC 8725","text":"<p>JSON Web Token (JWT) is a compact, URL-safe means of representing claims to be transferred between two parties. The claims in a JWT are encoded as a JSON object that is used as the payload of a JSON Web Signature (JWS) structure or as the plaintext of a JSON Web Encryption (JWE) structure, enabling the claims to be digitally signed or integrity protected with a Message Authentication Code (MAC) and/or encrypted.</p> <p>For particular uses cases, JWT can include a predefined set of claims tailored for these use cases. An example is the JWT Secured Authorization Response Mode (JARM) defined by https://openid.net/specs/oauth-v2-jarm.html which includes the authorization code and the optional client state parameter. JARM is used for example by OID4VP to sign, or to sign and encrypt the Authorization Response.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#json-web-key-jwk-rfc-7517","title":"JSON Web Key (JWK) - RFC 7517","text":"<p>A JSON Web Key (JWK) is a JavaScript Object Notation (JSON) data structure that represents a cryptographic key. This specification also defines a JWK Set JSON data structure that represents a set of JWKs. The cryptographic algorithms and identifiers to be used with this specification are described in the separate JSON Web Algorithms (JWA) specification and IANA registries established by that specification.</p> <p>The JSON web key (JWK) is used by the ISO/IEC 18013-5 reader for validating the Open ID Token.</p> <p>Also, RFC-7797 to be considered.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#json-web-signature-jws-rfc-7515","title":"JSON Web Signature (JWS) - RFC 7515","text":"<p>JSON Web Signature (JWS) represents content secured with digital signatures or Message Authentication Codes (MACs) using JSON-based data structures. Cryptographic algorithms and identifiers for use with this specification are described in the separate JSON Web Algorithms (JWA) specification and an IANA registry defined by that specification. Related encryption capabilities are described in the separate JSON Web Encryption (JWE) specification.</p> <p>ISO/IEC 18013-5 uses the JSON Web Signature (JWS) spec as described in sections 9.2.2, 9.3.2, and B.1.5 JWS signer certificate. That is for the link between the issuing authority infrastructure and the mobile doc reader.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#json-web-encryption-jwe-rfc-7516","title":"JSON Web Encryption (JWE) - RFC 7516","text":"<p>JSON Web Encryption (JWE) represents encrypted content using JSON-based data structures. Cryptographic algorithms and identifiers for use with this specification are described in the separate JSON Web Algorithms (JWA) specification and IANA registries defined by that specification. Related digital signature and Message Authentication Code (MAC) capabilities are described in the separate JSON Web Signature (JWS) specification (see RFC 7518 above).</p> <p>ISO/IEC 18013-5 uses JSON Web Encryption for session encryption.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#json-web-algorithms-jwa-rfc-7518","title":"JSON Web Algorithms (JWA) - RFC 7518","text":"<p>The JSON Web Algorithms specification registers cryptographic algorithms and identifiers to be used with the JSON Web Signature (JWS), JSON Web Encryption (JWE), and JSON Web Key (JWK) specifications. The specification focuses on the following areas:</p> <ul> <li>Cryptographic Algorithms for Digital Signatures and MACs</li> <li>Cryptographic Algorithms for Key Management</li> <li>Cryptographic Algorithms for Content Encryption</li> <li>Cryptographic Algorithms for Keys</li> <li>IANA Considerations</li> <li>Security Considerations</li> <li>Internationalization Considerations</li> </ul> <p>ISO/IEC 18013-5 requires that one of the following JSON Web Algorithms (JWA) shall be used for the link between the issuer and the reader:</p> <p>a.  ES256: ECDSA using Curve P-256 and SHA-256,</p> <p>b.  ES384: ECDSA using Curve P-384 and SHA-384,</p> <p>c.  ES512: ECDSA using Curve P-521 and SHA-512.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#jsonjose-implementations","title":"JSON/JOSE Implementations","text":"<p>A robust Java and Android open-source library for JSON Object Signing and Encryption is Nimbus JOSE + JWT. See:</p> <ul> <li>https://github.com/Connect2id/Nimbus-JWT</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#openid-for-verifiable-credentials-openid4vc","title":"OpenID for Verifiable Credentials (OpenID4VC)","text":"<p>This section provides a short overview of the OpenID specifications that are related to, or have been designed for, the Verifiable Attestations domain. OpenID does not introduce a new data model for verifiable attestations as ISO and W3C do. The acronym 'OpenID4VC' is a reference to the relevant specification's family: OID4VCI, OID4VP and SIOPv2.</p> <p>An excellent overview of the OpenID4VC specifications, and in general of the VC domain, is provided by the following whitepaper: openid-for-verifiable-credentials-whitepaper</p> <p>Terms that have already been defined in OpenID Connect Core are used as-is by OpenID4VC.</p> <p>One of the tasks of the work being conducted by the OpenID Foundation was the alignment of ISO-compliant mobile driving licenses with the W3C verifiable attestations data model, which has been one area of particular interest for the ecosystem.</p> <p>The target abstract use case is: The End-User directly receives attestations from an Issuer and directly presents them to the Verifier using interoperable verifiable attestations expressed in any appropriate data model (e.g., ISO/IEC 18013-5 or W3C Data Model).</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#openid-for-verifiable-presentations-oid4vp","title":"OpenID for Verifiable Presentations (OID4VP)","text":"<p>The OID4VP specification defines a mechanism that enables a Verifier to request from a Holder the presentation of selected attributes from various Attestations and to receive those attributes as a Verifiable Presentation (VP).</p> <p>The OID4VP specification defines a VP to be a Holder-signed (not an Issuer-signed) credential whose authenticity can be cryptographically verified to provide Cryptographic Holder Binding, and can be of any data format, including those defined by W3C and ISO-18013-5.</p> <ul> <li>Request: The required attributes and their qualifying metadata are   defined by a Presentation Definition (a JSON object) that is part of   the request. The request can be encoded as a JWT-Secured Authorization   Request (JAR).</li> <li>Response: OID4VP introduces the VP Token as a container to   enable End-Users to present Verifiable Presentations to Verifiers   using the Wallet. A VP Token contains one or more Verifiable   Presentations in the same or different Credential formats.   Attestations of multiple formats can be presented in the same   transaction. The response containing the VP Token can be signed   and/or encrypted. To sign, or sign and encrypt the response,   implementations MAY use JWT Secured Authorization Response Mode for   OAuth 2.0 (JARM).</li> </ul> <p>The OID4VP specification supports:</p> <ul> <li>Same Device Flow: A flow where the End-User presents a Credential to a   Verifier interacting with the End-User on the same device the Wallet   resides on.</li> <li>Cross Device Flow: A flow where the End-User presents a Credential to   a Verifier interacting with the End-User on a different device (e.g.,   a PC) as the device the Wallet resides on (e.g., on mobile).</li> </ul> <p>See:</p> <ul> <li>OpenID for Verifiable   Presentations</li> <li>Presentation Exchange   (v2.0.0)</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#openid-for-verifiable-credential-issuance-oid4vci","title":"OpenID for Verifiable Credential Issuance (OID4VCI)","text":"<p>The OID4VCI is a specification for issuing verifiable attestations and is based on OAuth 2.0. To support the VC issuance, the specification defines some new grant types and extensions mechanisms. The specification is practically data format agnostic and supports, via the credential format profiles extension, the VC data models defined by W3C and ISO-18013-5.</p> <p>A VC Issuer is protected by an OAuth 2.0 Authorization Server whereas the Wallet acts as an OAuth 2.0 Client. Wallet holders learn about a VC Issuer via the published Issuer's metadata.</p> <p>The Wallet sends a Credential Request to the new Credential's API. During the authorization process or the issuance flow, the issuer may request the presentation of existing attestations.</p> <p></p> <p>Figure 17: OID4VCI specification for authorization code flow</p> <p>See:</p> <ul> <li>OpenID for Verifiable Credential   Issuance</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#self-issued-openid-provider","title":"Self-Issued OpenID Provider","text":"<p>The SIOP v2 specification introduces the concept of a Self-Issued OpenID Provider (OP), an OP controlled by the End-User.</p> <p>A Self-Issued OP does not itself assert identity information about the End-user. The trust model is decentralized but still the RPs Trust is based on trusted issuers of the End-User key material used for claims signing. RP needs to establish trust to the certificate authorities responsible for issuing end users proof of core identity. For SIOP v2 end-users issue self-signed claims to prove validity of their claims.</p> <p>Trusted issuers are defined by the Relying Parties (RP), which resolve issuer public keys based on their URIs and retrieve their public keys dynamically from the Verifiable Data Registry (VDR).</p> <p>Using Self-Issued OPs, End-Users can authenticate themselves with Self-Issued ID Tokens signed with keys under the End-user's control and present self-attested claims directly to the RPs.</p> <p>Self-Issued OPs can also present cryptographically verifiable claims issued by third parties trusted by the RPs. This allows End-Users to interact with RPs, without RPs interacting directly with claims issuers.</p> <p>See: Self-Issued OpenID Provider v2</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#openid4vc-implementations","title":"OpenID4VC Implementations","text":"<p>See proposed libraries for OID4VCI and OID4VP under https://openid.net/openid4vc/.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#iso-for-verifiable-credentials","title":"ISO for Verifiable Credentials","text":"<p>This section provides a short overview of the ISO standards that are related to, or have been designed for, the Verifiable Credentials domain. ISO/IEC 18013-5 introduces a new data model for verifiable attestations.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#isoiec-18013-5","title":"ISO/IEC-18013-5","text":"<p>ISO/IEC 18013-5 describes the interface and related requirements to specifically facilitate ISO-compliant driving license functionality on a mobile device. However, the transaction and security mechanisms in ISO/IEC 18013-5 have been designed to support other types of mobile documents. ISO/IEC-18013-7 adds functionality by building on top it.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#isoiec-23220-4","title":"ISO/IEC-23220-4","text":"<p>The ISO/IEC-23220 series, still draft, is about cards and security devices for personal identification. It is focused on building blocks for identity management via mobile devices and hence very relevant to this document. Part 4 concerns protocols and services for operational phase.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#iso-data-model-for-vc","title":"ISO Data Model for VC","text":"<p>For ISO 18013-5 the credential's data is organized as individual data elements which can be requested and returned independently from each other. Each data element has an identifier, a specified format, and an indication of whether it is mandatory or optional.</p> <p>The ISO defines in detail the Driving License (mDL) use case, but the concepts have been designed so that other mobile attestations/documents, e.g., PID, with a separate set of data elements, can also make use of the engagement and retrieval protocols described in the ISO.</p> <p>The ISO data model is based on elements with unique identifiers within a namespace. The number of elements can vary, and the model is indifferent to the value and data format of each element. As such the data model described by the ISO is generic and can be applied to any kind of document/credential.</p> <p></p> <p>Figure 18: ISO/IEC 18013-5 data model</p> <p>As per ISO, a mobile doc is organized as shown below:</p> <p>Doctype (e.g., \"org.iso.18013.5.1.mDL\") Namespace (e.g., \"org.iso.18013.5.1\")</p> <ul> <li>Data Items with unique identifiers (any number)</li> </ul> <p>Domestic namespace (optional)</p> <ul> <li>Other Domestic Data Items (any number)</li> </ul> <p>Mobile security object (MSO)</p> <p>The issuer data authentication is implemented by way of a digital signature over the mobile doc data, calculated by the issuing authority using a public-private (asymmetric) key pair.</p> <p>The issuing authority calculates a message digest for each data element present on the mobile doc and includes all digests in the mobile security object (MSO). The issuing authority infrastructure then digitally signs the MSO using a private key that is kept secret and adds the digital signature to the mobile doc data.</p> <p>The public key associated with the private key used for the digital signature is provided as part of a certificate. When the mobile doc is presented to a mobile doc reader, the mobile doc reader retrieves this certificate and performs the ISO specified verification procedure.</p> <p>Namespace Versioning: The number \"1\" in the namespace used by the mDL use case allows to be incremented in future versions of the standard. Within this namespace, only elements defined by the ISO for the mDL use case may be used. The same approach could be applied to any kind of document/credential. To accommodate domestic data, an issuing authority may define its own domestic namespace.</p> <p>Encoding of data structures and data elements: The CDDL (Concise Data Definition Language) as specified in RFC 8610 is used to express CBOR and JSON-encoded data structures. CBOR structures are encoded according to RFC 7049. JSON structures are encoded according to RFC 8259. RFC 7049 describes the rules to be followed for CBOR. For more details see ISO/IEC 18013-5 section 8.1 \"Encoding of data structures and data elements\". See: mobile-document-request-api</p> <p>Data elements: Each data element is described by the following fields:</p> <ul> <li>Identifier: e.g., birth_date</li> <li>Meaning: e.g., Date of birth</li> <li>Definition: e.g., Day, month, and year on which the mDL holder was   born. If unknown, approximate date of birth:</li> <li>Presence: e.g., M or O</li> <li>Encoding format: e.g., tstr, tdate, full-date, enum, uint, bool,   bstr (e.g., for portrait or other biometrics)</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#isoiec-18013-5-security","title":"ISO/IEC 18013-5 Security","text":"<p>ISO/IEC 18013-5 defines a Mobile Security Object (MSO) for the purpose of verifying the integrity and authenticity of mDL data as provided to verifying parties by the Holder's mobile device.</p> <p>The MSO contains digest values for each data element contained within the mDL, along with the mDL device key and validity information.</p> <p>At the time of issuance or update, the Issuing Authority (IA) cryptographically signs the entire MSO data structure with the IA private key (the IA public key is distributed as part of the mDL Master Lists). This information set allows any verifier to check the validity of the mDL data passed during the transaction and verify that it has been signed by a trusted issuer though the validation of the IA signature.</p> <p>In ISO/IEC 18013-5 the portrait is the only data element for verifying that the person presenting the mDL is the mDL holder. Depending on the transaction details, in an unattended transaction (unsupervised flow) this data element may not be able to serve the purpose of confirming that the person presenting the mDL is the mDL holder.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#iso-for-vc-implementations","title":"ISO for VC Implementations","text":"<p>An implementation of the ISO/IEC 18013-5 would require a careful reading of the ISO and the referenced RFCs (Request for Changes). A starting point could be existing implementations and deployments like for example the following:</p> <ul> <li>identity-credential</li> <li>IdentityCredentialStore</li> <li>digital-identities-mdl   (a project specific to mDL started under NIST   in parallel to EUDIW)</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#w3c-for-verifiable-credentials","title":"W3C for Verifiable Credentials","text":"<p>This section provides a short overview of the W3C standards that are related to, or have been designed for, the Verifiable Credentials domain. W3C uses the JSON-LD data model, a JSON representation of the W3C RDF framework.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#w3c-for-vc-data-model","title":"W3C for VC Data Model","text":"<p>Figure 20 below provides the context of the W3C JSON-LD specification that defines the W3C Linked Data Model.</p> <p></p> <p>Figure 19: Main specs in the JSON-LD context and W3C VC</p> <p>JSON-LD is a JSON representation of the W3C RDF framework and is used along with the JWT and JWS RFCs for the specification and implementation of the W3C Verifiable Credentials Data Model. JSON-LD is a concrete JSON based syntax of the RDF (Resource Definition Framework) framework (see Figure below).</p> <p></p> <p>Figure 20: An RDF graph with two nodes (Subject and Object) and a Predicate</p> <p>JSON-LD uses the following keys for specifying a node:</p> <ul> <li>@id: Used to uniquely identify a node.</li> <li>@type: Used to set the type of a node or the datatype of a typed   value.</li> </ul> <p>The context is defined using \"@context\" (as a resource or inline).</p> <p>Example can be generated using the online-playground</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#selective-disclosure-of-verifiable-credentials","title":"Selective Disclosure of Verifiable Credentials","text":"<p>The presentation of a selected subset of attributes from a particular credential or the aggregation of attributes from several verifiable attestations are typical use cases of verifiable presentations.</p> <p>The selective disclosure capability enables a holder to create a verifiable presentation by selecting a subset of the attributes of a verifiable credential or by merging attributes from multiple verifiable attestations. For example, ISO/IEC 18013-5 enables this capability for the mDL by managing each attribute as independent.</p> <p>This section describes schemes providing this capability in a more generic way than the approach followed by ISO/IEC 18013-5 but still requiring a specific issuance approach and signature-scheme.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#selective-disclosure-for-jwts-sd-jwt","title":"Selective Disclosure for JWTs (SD-JWT)","text":"<p>Selective Disclosure enables the holder to have a credential with many claims, and only release the claims necessary to the interaction. Selective Disclosure enables minimal data disclosure.</p> <p>See the latest SD-JWT draft and the following implementations:</p> <ul> <li>eu-digital-identity-wallet   SD-JWT</li> </ul>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#bbs-signature-scheme","title":"BBS Signature Scheme","text":"<p>BBS is a digital signature scheme that supports signing multiple messages whilst producing a single output digital signature. Through this capability, the possessor of a signature can generate proofs that selectively disclose subsets of the originally signed set of messages, whilst preserving the verifiable authenticity and integrity of the messages. Furthermore, these proofs are said to be zero-knowledge in nature as they do not reveal the underlying signature; instead, what they reveal is a proof of knowledge of the undisclosed signature.</p> <p>See latest draft: bbs-signature</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#camenisch-lysyanskaya-signature-scheme-zero-knowledge-proofs","title":"Camenisch-Lysyanskaya Signature Scheme / Zero Knowledge Proofs","text":"<p>Specifies a scheme that can be used to construct efficient anonymous credential systems as well as group signature and identity escrow schemes. It provides efficient protocols that allow one to prove in zero-knowledge the knowledge of a signature on a committed (or encrypted) message and to obtain a signature on a committed message.</p> <p>See for example: Signature Schemes and Anonymous Credentials</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#protection-against-relying-party-collusion","title":"Protection against Relying Party Collusion","text":"<p>To mitigate the risk of Relying Party collusion, it is possible to put in place policies that will enable the Wallet to generate a new public key for each document to be used for transactions with different Relying Parties and to limit the number of transactions that the key can be used.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#technologies","title":"Technologies","text":"<p>This section provides a short overview of technologies related to, or have been designed for, the Verifiable Attestations domain.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#qr-code","title":"QR Code","text":"<p>QR Code presentation/reading constitutes an innovative short-message exchange mechanism based on visual encoding and proximity reading by a scanner/reader. The message exchange is limited in size by the QR Code display and the optical reader resolution. The QR code can also be transferred to the device over the Internet and scanned by a proximity QR reader from the device display.</p> <p>The outstanding capability provided by the QR Code in the VC domain, and utilized by VC related protocols, is its capability of crossing network boundaries. VC requests and responses can be transferred between not connected networks.</p> <p>Typically, a QR Code contains a signed message (for example the Covid certificate, a ticket, or a URL) delivered by the issuer. This is useful but does not allow verifiable presentations using selective disclosure. Selective disclosure of attributes requires the QR Code generator on the device. Such generators are already available on mobile apps stores. Also, open-source libraries for QR code generation do exist and the EUDIW could base its implementation on these.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#nfc-tag","title":"NFC Tag","text":"<p>Unlike QR Codes that are passive, NFC Tags are able to react appropriately when activated by a device like a smartphone.</p> <p>NFC is a method of wireless data transfer that allows smartphones and other devices to exchange data with NFC tags when in close-proximity and have the NFC tag process the data. The NFC technology powers contactless payments via mobile wallets or contactless cards.</p> <p>An NFC-enabled smartphone uses an NFC controller chip connected to an NFC antenna. The device controller scans periodically its proxy environment for any NFC tags. Upon detection, it's able to exchange data with NFC tags. Actually, the tag is powered by the device via electromagnetic induction between the two antennas.</p>"},{"location":"Reference%20Implementation/hld/EUDI-Wallet-NiScy_hld_q3_25/#annex-2-low-level-design-aspects","title":"Annex 2 - Low Level Design Aspects","text":"<p>The low-level design aspects of the EUDI Wallet are described by the Low Level Design document (LDD: eudi-wallet-lld.md) which is maintained under the same git repository with this document (HLD: eudi-wallet-hld.md).</p> <p>Both documents are maintained under: eudi-doc-reference-implementation-architecture.git.</p>"},{"location":"Reference%20Implementation/hld/HLDFigures/","title":"Index","text":"<p>Home</p>"},{"location":"Reference%20Implementation/hld/HLDFigures/#index-of-reference-implementationhldhldfigures","title":"Index of Reference Implementation/hld/HLDFigures","text":""},{"location":"Reference%20Implementation/lld/","title":"Index","text":"<p>Home</p>"},{"location":"Reference%20Implementation/lld/#index-of-reference-implementationlld","title":"Index of Reference Implementation/lld","text":"<ul> <li>EUDI-Wallet-NiScy_lld_q3_25</li> <li>LLDFigures</li> </ul>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/","title":"EUDI Wallet NiScy lld q3 25","text":"<p>Home</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#low-level-design-of-the-eudi-wallet-reference-implementation","title":"Low-Level design of the EUDI Wallet Reference Implementation","text":""},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#purpose-of-this-document","title":"Purpose of this document","text":"<p>The purpose of the Comprehensive Low-Level Design document is to detail the implementation of the high-level design. This document provides a thorough description of individual software components, such as classes, modules, functions, and methods, including their roles, responsibilities, and interactions. It covers the logical architecture, data structures, data processing procedures, and error handling mechanisms. Additionally, the document includes API specifications, integration details, and information on software configuration settings and deployment requirements, supplemented by deployment diagrams illustrating the software's deployment architecture.</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#glossary-acronyms-and-reference-documents","title":"Glossary, Acronyms and Reference Documents","text":"<p>This section provides a comprehensive list of the technical terms, abbreviations, or acronyms used throughout this document, along with their definitions or explanations.</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#abbreviations-and-acronyms","title":"Abbreviations and acronyms","text":"ACRONYM DEFINITION ARF Architecture and Reference Framework document [R01] EAA Electronic Attestation of Attributes EUDI European Union Digital Identity EUDIW EUDI Wallet MS Member State PID Person Identification Data QEAA Qualified Electronic Attestation of Attributes VC Verifiable Credentials W3C World Wide Web Consortium <p>[]{#_Toc212641577 .anchor}Table 1: List of Abbreviations and Acronyms</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#definitions","title":"Definitions","text":"<p>The following definitions are listed to provide clarity on important terms used throughout the document. It shall be noted that the listed definitions are in alignment with the terminology used in [R01] EUDI Architecture and Reference Framework.</p> Term Description PID A set of data, issued in accordance with Union or national law, enabling the identity of a natural or legal person, or of a natural person representing a natural or legal person, to be established. - eIDAS 2.0. PID Provider A Member State or legal entity providing Person Identification Data to Users. [R01] Issuer A Person Identification Data Provider issuing PID or a (Qualified) Trust Service Provider issuing (Q)EAA. In the case of the EUDI Wallet there may be multiple Issuers for PID and (Q)EAA. [R01] Attestation A set of one or more claims made by an issuer. [VC11] Verifiable Credential A verifiable credential is a tamper-evident credential that has authorship that can be cryptographically verified. Verifiable attestations can be used to build verifiable presentations, which can also be cryptographically verified. [VC11] Presentation Data derived from one or more verifiable attestations, issued by one or more issuers, that is shared with a specific verifier. [VC11] Verifiable Presentation Tamper-evident presentation encoded in such a way that authorship of the data can be trusted after a process of cryptographic verification. Certain types of verifiable presentations might contain data that is synthesized from, but do not contain, the original verifiable attestations (for example, zero-knowledge proofs). [VC11] <p>[]{#_Toc212641578 .anchor}Table 2: Definitions</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#reference-and-applicable-documents","title":"Reference and Applicable Documents","text":"ID Document Version R01 EUDI Architecture and Reference Framework 2.6.0 VC11 Verifiable Credentials Data Model 2.0 HLD EUDIW High Level Design Document 2.0 DIF_PEX DIF Presentation Exchange Specification 2.0.0 <p>[]{#_Toc212641579 .anchor}Table 3: Reference Documents</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#introduction","title":"Introduction","text":"<p>This document provides a detailed design and plan on how the EUDI Wallet will be built, and how it will ensure that the final product meets the intended design specifications.</p> <p>The context for this document has been set by the Architecture and Reference Framework document (ARF) and the high-level design view by the [EUDI Wallet HLD document](https://github.com/eu-digital-identity-wallet/eudi-doc-reference-implementation-architecture/blob/main/eudi-wallet-hld.md).</p> <p>The target audience of this document is the community of the EUDI Wallet developers, including the developers of the EUDI Wallet reference implementation. This document, along with the reference implementation, will be part of the deliverables to be shared with the Member States (MS) for supporting the development of their own solutions.</p> <p>The EUDI Wallet Reference Implementation is built based on the Architecture Reference Framework and aims at showcasing a robust and interoperable platform for digital identification, authentication and electronic signatures based on common standards across the European Union.</p> <p>This section:</p> <ul> <li>Translates the high-level architecture and requirements into a   detailed and comprehensive design of individual software components,   modules, and functions. It focuses on the technical aspects of the   software design and provides a blueprint of how the software system   will be implemented.</li> <li>Defines the detailed specifications of the individual software   components, including data structures, algorithms, the interfaces   between components, their dependencies, and the error handling and   exception handling procedures.</li> <li>Considers the constraints and requirements of the software system,   such as performance, scalability, and maintainability. It also   considers factors such as security, reliability, and robustness.</li> </ul> <p>The use cases in the scope for this document are those defined by the ARF and its annexes.</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#reusable-building-blocks","title":"Reusable Building Blocks","text":"<p>This section presents a set of building blocks and patterns used or to be used by the LLD of the EUDI Wallet components implementing the relevant VC protocols. The current set includes building blocks and patterns classified under the following categories.</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#enablers-and-facilitators","title":"Enablers and Facilitators","text":"<p>This section lists the enabling technologies, standards and patterns that collectively constitute a reusable toolbox for specifying, understanding and implementing the protocols in the VC domain.</p> <p>End-user focused technologies, creative ideas and standards:</p> <ol> <li>The internet and the capabilities of the browser (e.g.\u00a0universality,     security, redirection, exchanges by value or by reference, post for     secrecy, deep links for launching native apps, etc.) as well as the     browser usage for security reasons by Native Apps as described by     RFC-8252.</li> <li>Cryptography, verifiable claims/credentials, Selective Disclosure,     Zero Knowledge Proofs, Derived Claims.</li> <li>Mobile, other portable devices, micro-devices (IoT).</li> <li>Flexible transport layers/protocols (NFC, BLE, WiFi, QR Code, etc.)</li> <li>Focused standards (IETF, OpenID and W3C specs, JWT, LD-JWT, VC-JWT,     CBOR, etc.).</li> <li>Business Drivers for Digitizing Physical Credentials (e.g.\u00a0security     and privacy by default and huge costs savings for society).</li> <li>Trusted Execution Environments (TEE) for assuring data     confidentiality during processing.</li> </ol> <p>The outstanding enabler for establishing a real trusted operational environment for the VC domain is the Trusted Execution Environment (TEE). The role and the need for the TEE enabler is clearly understood by the community and a lot of work is focused on this direction. This is the core element for enabling a real trusted operational environment. Once TEEs become broadly available on mobiles, the cloud and portables, the impact on the community is expected to be comparable to that of cryptography. TEEs will assure the confidentiality of the data during processing (currently data can remain confidential at rest using encryption and at transit using TLS but not during processing).</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#message-exchange-patterns-in-the-context-of-vc-protocols","title":"Message Exchange Patterns in the Context of VC Protocols","text":"<p>The specifications and the implementations of the VC and identity related protocols are based on message exchanges. The available message exchange patterns include:</p> <ul> <li>Message exchanges over HTTP (request/response/redirect) on top of   various physical and transport layers (TCP/IP, NFC, BLE). Redirects   can indirectly deliver a received message from one party to the next   (a party responding to a request can redirect to any next), a   capability that is critical for the implementation of some VC   protocols or use-cases.</li> <li>An HTTP response may contain a message, or a URI in which case a   second call is required to retrieve the message (indirect message   exchange, that is, by reference, not by value).</li> <li>QR Codes provides a simple and powerful mechanism for exchanging   messages between parties and between networks for proximity flows.</li> </ul> <p>The messages exchanged in the VC domain are typically structured as JSON, include attestations/claims along with their metadata, and are signed and encrypted constructing an opaque token. The data elements included in the exchanges (mandatory and optional) are defined by the relevant case specifications (e.g., PID, mDL, Diploma).</p> <p>All the messages exchanged in the VC domain are typically encoded, signed and encrypted by the sender and verified by the receiver. Typically, both the sender and the receiver need access to trusted registries for verifying signatures.</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#vc-relevant-protocols-and-specifications","title":"VC Relevant Protocols and Specifications","text":"<p>VC Relevant Protocols and Specifications in the scope of this release:</p> <ul> <li>OAuth2</li> <li>OpenID4VP</li> <li>DIF Presentation Exchange   v2</li> <li>SD-JWT</li> <li>SD-JWT-VC</li> <li>JAR</li> <li>JARM</li> <li>ISO-18013-5</li> <li>[ISO-23220-4](https://www.iso.org/standard/86785.html)</li> </ul>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#vc-relevant-data-models-specifications","title":"VC Relevant Data Models Specifications","text":"<p>VC Relevant Data Models in the scope of this release:</p> <ul> <li>ISO-18013-5-DM</li> <li>W3C-VC-DM</li> </ul>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#security-best-practices","title":"Security Best Practices","text":"<p>Beyond the trust framework that must be in place for the VC domain, additional measures are required. For this domain, most of the security related concerns/measures should be based-on and refer-to the relevant IETF standards.</p> <p>Examples of relevant IETF standards are:</p> <ul> <li>RFC-6819: OAuth 2.0   Threat Model and Security Considerations, January 2013</li> <li>RFC-7636: Proof Key for Code   Exchange by OAuth Public Clients, September 2015</li> <li>RFC-7800:   Proof-of-Possession Key Semantics for JSON Web Tokens (JWTs), April   2016</li> <li>draft-ietf-oauth-security-topics:   OAuth 2.0 Security Best Current Practice.</li> </ul> <p>These IETF standards constitute the baseline on the Security Best Practices since they reflect the status of the internet and hence are based on universal knowledge and experience in this domain. Of course, some security related concerns may additionally require actions from governments and other organizations.</p> <p>RFC 9396, \"OAuth 2.0 Rich Authorization Requests_, Published May 2023\" introduces standardized transactions with banks, health centers, etc. using a new authorization details object (in addition to the access and ID tokens). This will lead far beyond the authentication/authorization (which will still be needed of course). The security of such transactions must follow the same approach.</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#proposed-design-approach-of-eudi-wallet-app-components","title":"Proposed design approach of EUDI Wallet App Components","text":"<p>The proposed architectural style/pattern for new App Components (not libraries) is the one described by the Hexagonal Architecture, known also as the Ports and Adapters Pattern.</p> <p>At high level this architecture defines again layers, like the traditional architecture (persistence/domain/presentation), but the layers do not sit one over the other, but one wraps and protects the other:</p> <ul> <li>environment: initiates some process for a purpose or provides some   external functionality (e.g.\u00a0persistence) to the application.</li> <li>adapters: implement a way to exchange data with the application   via its ports/interfaces (typically by implementing the exposed   ports/interfaces). Adapters that provide input/stimulus are called   driving adapters whereas those triggered by the application are   called driven adapters (e.g.\u00a0for persistence)</li> <li>ports: the incoming/outgoing or driving/driven interfaces of   the application.</li> <li>business domain: data models, business rules, services and   processes (i.e. use cases) in a particular business context   (e.g.\u00a0verifiable credentials). Data exchanges happen only via ports.</li> </ul> <p>The purpose/emphasis of this architectural style is to make the application's business domain more stable, more easily testable and long-lived. The interactions with the business domain occur only via clearly defined ports/interfaces (actually a universal principle).</p> <p>For the proposed design approach for Lib Components see section 4.8 Proposed design approach of EUDI Lib Components.</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#proposed-implementation-approach-of-eudi-wallet-app-components","title":"Proposed implementation approach of EUDI Wallet App Components","text":"<p>As an example, the App Component https://github.com/eu-digital-identity-wallet/eudi-srv-web-verifier-endpoint-23220-4-kt uses Spring Boot with WebFlux which simplifies building reactive Restful web services.</p> <p>The implementation of the referenced application shows the above simplification statement and therefore, the same approach is proposed for the implementation of all new App Components that need reactive Restful web services (practically all for the VC domain).</p> <p>For low-end devices (e.g.\u00a0for IoT) the above approach could be used for building a prototype for the App Component. The actual App Component could keep only the essential parts or use the Vert-x library or be re-implemented under the guidance of the prototype.</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#proposed-design-approach-of-eudi-lib-components","title":"Proposed design approach of EUDI Lib Components","text":"<p>The hexagonal architectural style described by the previous two sections for App Components makes little sense for library components. Libraries provide functions implementing simple or complex algorithms.</p> <p>The App Components implement use cases and hence also any flow activities and processes. Thanks to the asynchronous reactive frameworks/libs described by the previous sections, the implementation of flows/processes has been simplified.</p> <p>The libraries are responsible for implementing the functions used by the App Components. Libraries, or library partitions/packages, are typically structured within two layers:</p> <ul> <li>A Library API layer describing the function definitions and the data   model used by these function definitions;</li> <li>An internal implementation layer that implements the algorithms and   any additional data elements used by the internal function   definitions.</li> </ul> <p>The algorithms to be implemented by the libraries in the VC domain are/must-have-been specified by approved standards/specifications. These standards/specifications include the difficult part of the design. Any remaining design activities depend on the type of algorithm to be implemented. Identifying and factoring out into a shared library reusable patterns and approaches is one. Approaches for improving performance is a second.</p> <p>It is proposed to factor out from App Components any non-flow and non-trivial functions into libraries. There are benefits (e.g.\u00a0separation of concerns, potential for re-usability, improved understandability) even if a library is used originally by only one App Component.</p> <p>For conceptual integrity each library must solve/simplify a cohesive set of problems in a semantic context. Hence, the proposal is one library per semantic context.</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#eudi-wallet-components-lld","title":"EUDI Wallet Components LLD","text":"<p>The LLD of each component will be described in this chapter. Please note that the naming convention used for the EUDI Wallet Components is documented by the [architecture decision record, ADR-11](https://github.com/eu-digital-identity-wallet/eudi-doc-reference-implementation-architecture/blob/main/decisions/0011-library-naming-conventions.md).</p> <p>In this section an initial view of each component directly from its developers is provided. The reader may also find links to the GitHub repositories in the following section where additional detailed information for each module can be found.</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#eudi-wallet-core-android-and-wallet-kit-ios-libraries","title":"EUDI Wallet Core (Android) and Wallet Kit (iOS) Libraries","text":"<p>The EUDI Wallet Core (Android) and Wallet Kit (iOS) Coordinator Libraries constitute an integral element within the Wallet Coordinator Component, as detailed in the High-Level Architecture documentation. The library serves the purpose of:</p> Feature Coverage Document management Documents' Key creation and management with Android Keystore by default \u2705 Support for custom SecureArea implementations \u2705 Support for multiple SecureArea implementations \u2705 Support for multiple credentials for the same document \u2705 Document issuance Support for\u00a0OpenId4VCI (draft 15)\u00a0document issuance \u2705 Authorization Code Flow \u2705 Pre-authorization Code Flow \u2705 Support for mso_mdoc format \u2705 Support for sd-jwt-vc format \u2705 Support credential offer \u2705 Support for DPoP JWT in authorization \u2705 Support for JWT proof types \u2705 Support for deferred issuing \u2705 Support for batch issuing \u2705 Proximity document presentation Support for ISO-18013-5 device retrieval \u2705 QR device engagement \u2705 NFC device engagement \u2705 BLE data transfer \u2705 NFC data transfer \u274c Wifi-Aware data transfer \u274c Remote document presentation OpenId4VP (draft 24)\u00a0document transfer \u2705 ClienID scheme: preregistered, x509_san_uri, x509_san_dns, redirect_uri \u2705 PresentationDefinition, DCQL \u2705 <p>The EUDI Wallet Core (Android) and Wallet Kit (iOS) Coordinator Libraries serve as a coordinator layer between the UI app and the Wallet libraries. Currently, coordinates issuing, proximity and remote presentation libraries. The library is a part of the EUDI Wallet Reference Implementation project.</p> <p>The initial implementation provides Proximity and Remote Flows for the EUDI Wallet. It is based on the following specifications:</p> <ul> <li>ISO/IEC 18013-5 -- Published</li> <li>Presentation Exchange v2.0.0 - Published</li> <li>OpenID4VP -- Draft 24</li> <li>ISO 18013-7 - Draft</li> <li>SIOPv2 -- Draft</li> </ul> <p>The primary programming languages employed for the development of the libraries are Native Kotlin for Android and native Swift for iOS (as specified in the ADR decisions, namely ADR-0004 and ADR-0005).</p> <p>The latest Wallet core and Wallet kit release also include a logger method that allows one to specify the logger. If the logger is not provided, the default logger will be used. It is also possible to set logLevels.</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#proximity-sharing-libraries","title":"Proximity Sharing Libraries","text":"<p>The EUDI ISO/IEC 18013-5 Data Transfer Library is mainly part of the [Proximity Presentation Service](https://github.com/eu-digital-identity-wallet/eudi-doc-reference-implementation-architecture/blob/main/eudi-wallet-hld.md#67-proximity-presentation-service) component, as detailed in the High-Level Architecture documentation, but also covers a part of the remote presentation through RestAPI.</p> <p>This library provides a set of classes to manage the transfer of documents in an EUDI ISO/IEC 18013-5 Wallet.</p> <p>The library supports the following devices engagement methods for proximity presentation:</p> <ul> <li>QR code</li> <li>NFC tag (Android)</li> </ul> <p>and the Reverse engagement with app link for the remote presentation.</p> <p>Data transfer of the documents is done using BLE (Bluetooth low energy) for the proximity case and via HTTP protocol for the remote case.</p> <p>Additionally, Transfer Manager incorporates reader authentication, ensuring the trustworthiness of the verifier (reader) device.</p> <p>Reader authentication is accomplished by verifying the following:</p> <ul> <li>Certificate path validation: Verifying the certificate path from the   device's certificate to a trusted root certificate</li> <li>Certificate's profile validation: Examines the attributes and   constraints defined in the certificate profile to ensure that they   meet the predefined criteria for a trusted certificate</li> <li>CRL validation: Checking the Certificate Revocation List to verify   that the certificate has not been revoked or compromised.</li> </ul> <p>The above verification tasks can be accomplished by the Trust Management Libraries.</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#remote-presentation-libraries","title":"Remote Presentation Libraries","text":""},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#eudi-siopv2-openid4vp-library","title":"EUDI SIOPv2 OpenId4VP Library","text":"<p>The EUDI SIOPv2 OpenId4VP Library is part of the [Remote Presentation Service](https://github.com/eu-digital-identity-wallet/eudi-doc-reference-implementation-architecture/blob/main/eudi-wallet-hld.md#68-remote-presentation-service) component, as detailed in the High-Level Architecture documentation.</p> <p>The library supports OpenId4VP (draft 24) protocols. In particular, the library focuses on the wallet's role using those two protocols with the profile constraints included in ISO 23220-4 and ISO-18013-7.</p> <p>This library depends on <code>eudi``-lib-``jvm``-presentation-exchange-kt</code><code>.</code></p> <p>For the exchanges the library uses the interfaces of Self Issued OpenID Provider v2 (SIOPv2 - draft 13). SIOPv2 remains the only method currently available for exchanges. There are no alternative approaches currently. Should a new method become available in the future, an update will be provided accordingly.</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#presentation-exchange-library","title":"Presentation Exchange Library","text":"<p>The Presentation Exchange Library (eudi-lib-jvm-presentation-exchange-kt) implements the functionality described by the DIF Presentation Exchange v2 specification DIF_PEX.</p> <p>The [DIF_PEX] spec defines a generic and flexible Json based API for requesting and receiving claims. Overall, the [DIF_PEX] spec defines a concrete approach that enables Verifiers to describe proof requirements (in their Presentation Definition requests), and Holders to provide submissions of proof (in their Presentation Submission responses) that are aligned with the respective requirements submitted by the Verifiers. The acceptance decision is on the verifiers.</p> <p>The OpenID4VP (https://openid.net/specs/openid-4-verifiable-presentations-1_0-24.htmlhttps://openid.net/specs/openid-4-verifiable-presentations-1_0.html) protocol relies on [DIF_PEX] for constructing the VC presentation requests and responses.</p> <p>The [DIF_PEX] specification defines the Json Schema of the exchanges and their parts:</p> <ul> <li>presentation-definition.json<ul> <li>presentation-definition-envelope.json</li> <li>input-descriptor.json</li> <li>submission-requirements.json (array of submission-requirements.json)</li> </ul> </li> <li>presentation-submission.json</li> </ul>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#eudi-sd-jwt-library","title":"EUDI SD-JWT library","text":"<p>This library implements SD-JWT\u00a0draft12. Use cases supported:</p> <ul> <li>Issuance: As an Issuer use the library to issue a SD-JWT (in Combined   Issuance Format)</li> <li>Holder Verification: As Holder verify a SD-JWT (in Combined Issuance   Format) issued by an Issuer</li> <li>Presentation Verification: As a Verifier verify SD-JWT in Combined   Presentation Format or in Envelope Format</li> <li>Recreate initial claims: Given a SD-JWT recreate the original claims</li> </ul>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#eudi-wallet-data-storage-and-cryptographic-management-libraries","title":"EUDI Wallet Data Storage and Cryptographic Management Libraries","text":"<p>The EUDI Document Management library is part of the [Cryptographic Management and Data Storage Services](https://github.com/eu-digital-identity-wallet/eudi-doc-reference-implementation-architecture/blob/main/eudi-wallet-hld.md#69-cryptographic-management-and-data-storage-services). This library provides a set of classes to manage documents in an EUDI Wallet.</p> <p>As defined in the EUDIW High Level Design document, the Secure Cryptographic Interface (SCI), which is a Programmable interface used to manage cryptographic assets and functions and serves the communication between the Cryptographic Keys Management System Service and the Wallet Coordinator (part of the Cryptographic Management and Data Storage Services component), is enabled through the new wallet core and kit built-in components are:</p> <ul> <li>KeystoreSecureArea for storing and managing the documents' keys</li> <li>StorageEngine for storing the documents' data</li> </ul> <p>Creating a new document requires the document format and the create key settings. The create key settings can be used to specify the way the keys are created. When using the built-in KeystoreSecureArea implementation of the library, the wallet, getDefaultCreateDocumentSettings() extension can be used to create an instance of the appropriate CreateDocumentSettings class. After the document is created, the user must retrieve the document's data from the issuer and store it in the wallet using the storeIssuedDocument method.</p> <p>For the Android Implementation: It defines the interfaces for DocumentManager and Document classes and provides a default standard implementation of the DocumentManager interface using Android Identity Credential API. It also provides a sample implementation of the DocumentManager interface that can be used to load sample documents and test the library. It supports:</p> <ul> <li>Use of AndroidKeyStore for generating documents' keys</li> <li>Use of Android StrongBox for storing private/public keys</li> <li>Storage encryption for documents</li> </ul> <p>For the iOS Implementation: It provides keychain storage for wallet documents.</p> <p>Currently, Elliptic Curve P-256 is supported for document keys. Support for secure enclave storage is also included.</p> <p>The libraries include also an interface to extend and build upon in order to store documents to external storage cards, UICC, or other secure storage.</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#eudi-verifier-endpoint","title":"EUDI Verifier Endpoint","text":"<p>The EUDI Verifier Endpoint is a Web application (Backend Restful service) that acts as a Verifier/RP trusted end-point.</p> <p>For the presentation request and response submission it uses the Presentation Exchange Library. This component has been designed following the hexagonal architectural style (i.e.\u00a0ports and adapters) and uses the Spring WebFlux framework for its implementation.</p> <p>This is a Web application (Backend Restful service) that acts as a Verifier/RP trusted end-point. This backend service is accompanied by a Web UI application implemented here.</p> <p>In the GitHub section Run all verifier components together a developer may see how to boot both applications together.</p> <p>Application exposes two APIs</p> <ul> <li>Verifier   API</li> <li>Wallet   API</li> </ul> <p>The Verifier API, supports two operations:</p> <ul> <li>Initialize   Transaction,   where Verifier may define whether it wants to request a SIOP or   OpenID4VP or combined request</li> <li>Get Wallet   response,   where Verifier receives depending on the request an id_token,   vp_token, or an error</li> </ul> <p>An Open API v3 specification of these operations is available here. Currently, there is an Open API v3 specification available only for the verifier logs.</p> <p>The Wallet API, provides the following main operations</p> <ul> <li>Get Request   Object   according JWT Secured Authorization Request</li> <li>Get Presentation   Definition   according to OpenId4VP in case of using presentation_definition_uri</li> <li>Direct   Post   according to OpenID4VP direct_post</li> </ul> <p>Please note that</p> <ul> <li>Both APIs need to be exposed over HTTPS.</li> <li>Verifier API needs to be protected to allow only authorized access.</li> </ul> <p>Both of those concerns have not been tackled by the current version of the application, since in current version it is merely a development tool, rather a production application.</p> <p>Additionally, the verifier supports event logging for testing purposes. The log of events that occurred throughout the whole process. The transaction_id\u00a0is an identifier assigned to each Transaction\u00a0(result of calling the\u00a0initialization endpoint) and it is used in the\u00a0VerifierApi\u00a0related endpoints.</p> <p>Developers can also check the source-code for the details. The library is implemented in Kotlin and includes examples that help understanding the process.</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#eudi-android-holder-verifier-demo-applications","title":"EUDI Android Holder - Verifier Demo Applications","text":"<p>The Verifier is a Web application (Backend Restful service) that allows triggering and managing the presentation use case (cross device, remote presentation scenario).</p> <p></p> <p>Figure 1: OpenID4VP Verifier</p> <p>The purpose of this repository is to demo the flow of communication between a verifier mobile application and a wallet mobile application as depicted in ISO 23220-4, Appendix B. Towards this purpose two applications are built in the context of this repository: a Verifier android application and, a Wallet/Holder android application.</p> <p>The Verifier application acts as a user agent that integrates with a web backend service implemented in eudi-srv-web-verifier-endpoint. The Verifier mobile application is used to initialize an authentication request and pass it to the Wallet/Holder android application. The wallet application integrates with verifier's backend web service to retrieve any additional data and finally posts the response with the generated payload. The wallet's response is displayed on the verifier's mobile application screen.</p> <p>The integration of the two apps is based on eudi-lib-jvm-siop-openid4vp-kt library that implements the OpenID4VP / SIOP v2 authentication protocols.</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#eudi-issuing-library","title":"EUDI Issuing Library","text":"<p>The EUDI Issuing Library (OpenId4VCI) is part of the [Issuance Service](https://github.com/eu-digital-identity-wallet/eudi-doc-reference-implementation-architecture/blob/main/eudi-wallet-hld.md#64-issuance-service) and the [Signature/Seal Service](https://github.com/eu-digital-identity-wallet/eudi-doc-reference-implementation-architecture/blob/main/eudi-wallet-hld.md#65-signatureseal-service) component, as detailed in the High-Level Architecture documentation.</p> <p>The Android and iOS libraries support the OpenId4VCI (draft 15) protocol. In particular, the library focuses on the wallet's role in the protocol to:</p> <ul> <li>Resolve credential issuer metadata</li> <li>Resolve metadata of the authorization server protecting issuance   services</li> <li>Resolve a credential offer presented by an issuer service</li> <li>Negotiate authorization of a credential issuance request</li> <li>Submit a credential issuance request</li> </ul> <p>The issuing library underwent testing with internal test issuers in the organization.</p> <p>The EUDI Wallet Issuer is available online in https://issuer.eudiw.dev/ and the EUDI Wallet Tester Issuer is available in https://tester.issuer.eudiw.dev/.</p> <p>The EUDIW Issuer is an implementation of the PID and (Q)EAA Provider service. This service is currently undergoing a transition from OpenId4VCI draft 13 to draft 15 of the specification. The table below shows which components support which draft version.</p> Feature Coverage [Authorization Code flow draft]{.underline} \u2705 Support for credential configuration id, scope, (draft 13) [Pre-authorized code flow]{.underline} \u2705 (draft 13) [Credential Offer]{.underline} \u2705 authorization_code , \u2705 pre-authorized_code (draft 13) Dynamic Credential Request \u2705 (draft 13) mso_mdoc format \u2705 SD-JWT-VC format \u2705 W3C VC DM \u274c [Token Endpoint]{.underline} \u2705 (draft 13) [Credential Endpoint]{.underline} \u2705 Including proofs and repeatable invocations, (draft 15) Credential Issuer MetaData \u2705 Unsigned metadata, (draft 15) [Nonce endpoint]{.underline} \u2705 (draft 15) [Deferred Endpoint]{.underline} \u2705 (draft 15) Proof \u2705 JWT Credential response encryption \u2705 (draft 15) [Notification Endpoint]{.underline} \u2705 Pushed authorization request \u2705 Wallet authentication \u2705 public client Demonstrating Proof of Possession (DPoP) \u274c PKCE \u2705 <p>Additionally, the PID Issuer is an implementation of of a credential issuing service, according to OpenId4VCI - draft15, with the following coverage:</p> Feature Coverage Authorization Code flow \u2705 Using a suitable OAuth 2.0 server Pre-authorized code flow \u274c mso_mdoc format \u2705 SD-JWT-VC format \u2705 Except revocation list &amp; meta W3C VC DM \u274c Credential Offer \u2705 authorization_code , \u274c pre-authorized_code [Credential Endpoint]{.underline} Yes, including multiple proofs, encryption, repeatable invocations [Credential Issuer MetaData]{.underline} Yes, using scopes, and signed_metadata Deferred Endpoint \u2705 Nonce Endpoint \u2705 Notification Endpoint \u2705 Proof \u2705 JWT (jwk, x5c, did:key, did:jwk) - Except Key Attestation \u274c Data Integrity Proof \u274c Key Attestation"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#rqes1","title":"rQES[^1]","text":""},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#trust-provider-signer-authenticating-and-authorizing-using-remote-presentation-protocol","title":"Trust Provider Signer: authenticating and authorizing using Remote Presentation protocol","text":"<p>TrustProvider Signer is a remote signing service provider and client using authentication based on remote presentation by OpenId4VP.</p> <p>Currently, it includes the following features:</p> <ul> <li>Create an Account: Allows users to create new accounts within the   program.</li> <li>Authentication using OpenId4VP: Enables authentication through   OpenId4VP.</li> <li>Create Certificates: Enables authenticated users to create new   certificates and their associated key pairs.</li> <li>Sign Documents: Allows an authenticated user to digitally sign   documents.</li> </ul>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#rqes-wallet-driven-signing","title":"rQES: Wallet Driven Signing","text":"<p>EUDIW Wallet driven rQES is available for the EUDI Wallet ecosystem. A long set of reusable modules and libraries have been implemented and are available to enable the end-user to start a signing from inside of his EUDI Wallet instance. UI components are available to enable this as well as an SDK for rQES libraries specifically as a coordinating module namely the Wallet core (Android) and Wallet kit (iOS). Furthermore, both low level libraries are available for rQES management on the side of the EUDI Wallet and for the rQES services that are running on the server side.</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#rqes-server-initiated-signing-integrated","title":"rQES: Server initiated signing integrated","text":"<p>Server based initiated signing will be also enabled pushing/requesting signing authorization from the EUDI Wallet.</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#wallet-apps-and-uis","title":"Wallet Apps and UIs","text":"<p>There are EUDI Wallet apps available for Android and iOS. The apps consume the SDK called EUDIW Wallet core Wallet core and Wallet kit for Android and iOS respectively. A list of available libraries to facilitate remote presentation, proximity, and issuing test/demo functionality following specification of the ARF include ARF protocols and details are depicted in the main readme of the repositories. Currently they include:</p> <ul> <li>OpenID4VP - draft 24 (remote presentation), presentation exchange   v2.0,</li> <li>ISO18013-5 (proximity presentation),</li> <li>OpenID4VCI draft 15(issuing)</li> <li>Document Signing using OpenID4VP</li> </ul> <p>The application allows the configuration of multiple analytics providers. You can configure the following:</p> <ol> <li>Initializing the provider (e.g. Firebase, Appcenter, etc...)</li> <li>Screen logging</li> <li>Event logging</li> </ol> <p>The apps are end to end compatible to be used with online issuer (issuer.eudiw.dev), verifier service (verifier.eudiw.dev), signing service and verifier app for Android.</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#relying-party-registration-service","title":"Relying Party Registration Service","text":"<p>The Relying Party Registration Service provides two main functionalities:</p> <ul> <li>Register a new Relying Party, issuing the Relying Party Instance   certificate and keypair in pkcs#12 (P12) format.</li> <li>List the certificates issued and enable their revocation.</li> </ul>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#list-of-repositories","title":"List of Repositories","text":""},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#eudi-wallet-libraries-in-github","title":"EUDI Wallet Libraries in GitHub","text":""},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#wallet-core-android-and-wallet-kit-ios-coordinator-libraries","title":"Wallet Core (Android) and Wallet Kit (iOS) Coordinator Libraries","text":"Repository Description Wallet Core (Android) Implementation of the EUDI Wallet Core library for Android that serves as a coordinator layer between the UI app and the Wallet libraries. Currently, coordinates issuing, proximity and remote presentation libraries. Wallet Kit (iOS) Implementation of the EUDI Wallet Kit library for iOS that serves as a coordinator layer between the UI app and the Wallet libraries. Currently coordinates issuing, proximity and remote presentation libraries. <p>Visual representations of iOS and Android libraries are showcased, providing insights into their interconnections. These graphics offer a comprehensive overview of the libraries' structure and composition. For additional exploration and access to in-depth documentation, links to the repositories are included in the tables below.</p> <p></p> <p>Figure 2: Android Wallet Core Libraries Graph</p> <p></p> <p>Figure 3: iOS Wallet Kit Libraries Graph</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#proximity-sharing-ios-libraries","title":"Proximity Sharing iOS Libraries","text":"Repository Description mDoc Security (iOS) Implementation of mDoc security mechanisms according to ISO/IEC 18013-5. mDoc Data Transfer (iOS) Implementation of the mDoc data-transfer library according to ISO/IEC 18013-5. mDoc Data Model (iOS) Implementation of the mDoc data-model according to ISO/IEC 18013-5."},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#proximity-sharing-android-libraries","title":"Proximity Sharing Android Libraries","text":"Repository Description mDoc Data Transfer (Android) This library provides a set of classes to manage the transfer of documents in an EUDI ISO 18013-5 Android Wallet."},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#remote-presentation-ios-libraries","title":"Remote Presentation iOS Libraries","text":"Repository Description Presentation Exchange (iOS) Implementation of DIF Presentation Exchange v2 specification in Swift. SIOPv2 &amp; OpenID4VP protocols (iOS) Implementation of SIOPv2 and OpenID4VP (draft 24) protocols (wallet's role) in Swift. SD-JWT (iOS) SD-JWT library for creating and verifying SD-JWT in JVM Swift."},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#remote-presentation-android-libraries","title":"Remote Presentation Android Libraries","text":"Repository Description Presentation Exchange (Android) Implementation of DIF Presentation Exchange v2 specification in Kotlin. SIOPv2 &amp; OpenID4VP protocols (Android) Implementation of SIOPv2 and OpenID4VP (draft 24) protocols (wallet's role) in Kotlin. SD-JWT (Android) SD-JWT library for creating and verifying SD-JWT in JVM Kotlin."},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#issuing-ios-libraries","title":"Issuing iOS Libraries","text":"Repository Description OpenId4VCI (iOS) Implementation of credential management supporting the OpenId4VCI (draft 15) protocol."},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#issuing-android-libraries","title":"Issuing Android Libraries","text":"Repository Description OpenId4VCI (Android) Implementation of credential management supporting the OpenId4VCI (draft 15) protocol."},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#eudi-wallet-tester-for-issuer","title":"EUDI Wallet Tester for Issuer","text":"Repository Description EUDI Wallet Tester for Issuer The EUDIW Wallet Tester (for Issuer) allows to test the OID4VCI (draft 13) flow with an Issuer, in a Web GUI."},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#trust-list-provider","title":"Trust List Provider","text":"Repository Description Trust List Provider A Trusted List Provider (TLP) is a body responsible for maintaining, managing, and publishing a Trusted List."},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#podofo","title":"PoDoFo","text":"Repository Description PoDoFo PoDoFo is a free portable C++ library to work with the PDF file format."},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#wallet-data-storage-and-cryptographic-management-ios-libraries","title":"Wallet Data Storage and Cryptographic Management iOS Libraries","text":"Repository Description mDoc Document Storage (iOS) Storage for keys and wallet documents"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#wallet-data-storage-and-cryptographic-management-android-libraries","title":"Wallet Data Storage and Cryptographic Management Android Libraries","text":"Repository Description mDoc Document Storage (Android) This library provides a set of classes to manage documents and their cryptographic keys in an EUDI Android Wallet."},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#wallet-trust-management-android-libraries","title":"Wallet Trust Management Android Libraries","text":"Repository Description Trust Manager (Android) This library provides functionality for validation of certificate paths, digital signatures, digest values, DocType consistency, and the ValidityInfo structure."},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#token-status-list-specification-for-android","title":"Token Status List Specification for Android","text":"Repository Description Statium Android A library for checking the status of a credential in Kotlin multiplatform, supporting Token Status List specification"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#token-status-list-specification-for-ios","title":"Token Status List Specification for iOS","text":"Repository Description https://github.com/eu-digital-identity-wallet/eudi-lib-kmp-statiumStatium iOS A library for checking the status of a credential in swift, supporting Token Status List specification"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#wallet-ui-app-and-demo-app-for-android-and-ios","title":"Wallet UI App and demo App for Android and iOS","text":"Repository Description UI / Demo App (Android) Implementation of wallet UI app for Android. Currently, it also includes Demo App, demonstrating the following capabilities: Proximity presentation, Remote Presentation and issuing of PID and mDL. UI / Demo App (iOS) Implementation of wallet UI app for iOS. Currently, it also includes Demo App, demonstrating the following capabilities: Proximity presentation, and Remote Presentation and issuing of PID and mDL."},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#verifier-apps-and-services","title":"Verifier Apps and Services","text":"Repository Description Web Verifier Demo Web Verifier UI application (Frontend) that acts as a Verifier/RP trusted end-point. Available at https://verifier.eudiw.dev Restful API (web-services) Demo Web Verifier application (Backend Restful service) that acts as a Verifier/RP trusted end-point. Available at https://verifier-backend.eudiw.dev EUDI Verifier Core (Android) EUDI Core Verifier SDK for Android that provides the resources to develop an application to verify an mDoc according to the ISO 18013-5 standard."},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#issuing-apps-and-services","title":"Issuing Apps and Services","text":"Repository Description OpenId4VCI issuer (Python) An implementation of a credential issuing service, according to OpenId4VCI (draft 15), in Python. Available at https://issuer.eudiw.dev/ OpenId4VCI issuer (Kotlin) An implementation of a credential issuing service, according to OpenId4VCI (draft 15), in JVM Kotlin. Available at https://issuer-backend.eudiw.dev/ Attestation Status List and Attestation Revocation List (Python) Python library designed to issue and manage revocation status using Attestation Status Lists and Attestation Revocation Lists."},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#rqes-remote-electronic-signing-application","title":"rQES: Remote Electronic Signing Application","text":"Repository Description Web Trusted Signer Provider TrustProvider Signer is a remote signing service provider and client. The trustprovider signer can be accessed using the EUDI Wallet through OID4VP presentation of the PID. Available at https://trustprovider.signer.eudiw.dev/ EUDI Wallet driven signer QTSP Implementation of a wallet-driven and rp-centric QTSP for the remote Qualified Electronic Signature component of the EUDI Wallet. The QTSP provides endpoints based on the CSC API v2.0 specification and supports authentication via OpenID4VP. EUDI Wallet-driven external SCA Implementation of a wallet-driven SCA for the remote Qualified Electronic Signature component of the EUDI Wallet. The SCA provides endpoints that allow to calculate the hash value of a document and obtain the signed document given the signature value. Available at https://walletcentric.signer.eudiw.dev/ EUDI Wallet-driven rQES web tester A Wallet Tester Web Service for the Wallet-Driven release of the remote Qualified Electronic Signature (rQES) component. Centric rQES SCA A REST API server implementing the RP-centric SCA for the remote Qualified Electronic Signature (rQES) component of the EUDI Wallet. rQES RI -- RP centric -- Relying Party test site A Relying Party (RP) Web Service for the RP-centric release of the remote Qualified Electronic Signature (rQES) component. EUDI Wallet-driven Relying Party Implementation of Relying Party (RP) Web Service for the Wallet-driven release of the remote Qualified Electronic Signature (rQES) component."},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#section-1-unnumbered","title":"{#section-1 .unnumbered}","text":""},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#rqes-low-level-libraries","title":"rQES: Low Level Libraries","text":"Repository Description EUDI rQES CSC library (Kotlin) This is a Kotlin library, targeting JVM, that supports the\u00a0Cloud Signature Consortium API (version 2)\u00a0protocol. EUDI rQES CSC library (Swift) This is a Swift library, targeting JVM, that supports the\u00a0Cloud Signature Consortium API (version 2)\u00a0protocol."},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#rqes-core-and-kit-libraries","title":"rQES: Core and Kit Libraries","text":"Repository Description EUDI Remote Qualified Electronic Signature (RQES) Core library for Android This module provides the core functionality for the EUDI Wallet for Android, focusing on the Remote Qualified Electronic Signature (RQES) service.\u00a0 EUDI Remote Qualified Electronic Signature (RQES) Kit library for iOS This module provides the core functionality for the EUDI Wallet for iOS, focusing on the Remote Qualified Electronic Signature (RQES) service."},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#rqes-ui-libraries","title":"rQES: UI Libraries","text":"Repository Description EUDI Remote Qualified Electronic Signature (RQES) UI library for Android This module provides the core and UI functionality for the EUDI Wallet for Android implementation, focusing on the Remote Qualified Electronic Signature (RQES) service. EUDI Remote Qualified Electronic Signature (RQES) UI library for iOS This package provides the core and UI functionality for the EUDI Wallet for iOS implementation, focusing on the Remote Qualified Electronic Signature (RQES) service."},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#relying-party-registration-service_1","title":"Relying Party Registration Service","text":"Repository Description Relying Party registration service The Relying Party Registration Service registers Relying Parties, issuing certificates and keypairs for authentication with Wallet Instances. It also manages issued certificates, including listing and revocation. Demo Web Relying Party Registration to register a new Relying Party, available at https://registry.serviceproviders.eudiw.dev and Tester Relying Party, available at https://tester.relyingparty.eudiw.dev."},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#disclaimer","title":"Disclaimer","text":"<p>The released software is a development release version:</p> <ul> <li>The initial development release is an early endeavor reflecting the   efforts of a short timeboxed period, and by no means can be considered   as the final product.</li> <li>The initial development release may be changed substantially over   time, might introduce new features but also may change or remove   existing ones, potentially breaking compatibility with your existing   code.</li> <li>The initial development release is limited in functional scope.</li> <li>The initial development release may contain errors or design flaws and   other problems that could cause system or other failures and data   loss.</li> <li>The initial development release has reduced security, privacy,   availability, and reliability standards relative to future releases.   This could make the software slower, less reliable, or more vulnerable   to attacks than mature software.</li> <li>The initial development release is not yet comprehensively documented.</li> <li>Users of the software must perform sufficient engineering and   additional testing in order to properly evaluate their application and   determine whether any of the open-sourced components is suitable for   use in that application.</li> <li>We strongly recommend not putting this version of the software into   production use.</li> <li>Only the latest version of the software will be supported</li> </ul>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#license","title":"License","text":""},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#libraries-license","title":"Libraries License","text":"<p>All libraries are subject to the Apache License, Version 2.0.</p> <p>Copyright \u00a9 2023 European Commission  </p> <p>*Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at  </p> <p>http://www.apache.org/licenses/LICENSE-2.0 </p> <p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.*</p>"},{"location":"Reference%20Implementation/lld/EUDI-Wallet-NiScy_lld_q3_25/#reference-applications-license","title":"Reference Applications License","text":"<p>All the reference applications are subject to the EUPL, Version 1.2.</p> <p>Copyright \u00a9 2023 European Commission  </p> <p>Licensed under the EUPL, Version 1.2 or - as soon they will be approved by the European Commission - subsequent versions of the EUPL (the \"Licence\"); You may not use this work except in compliance with the Licence. </p> <p>You may obtain a copy of the Licence at: https://joinup.ec.europa.eu/software/page/eupl </p> <p>Unless required by applicable law or agreed to in writing, software distributed under the Licence is distributed on an \"AS IS\" basis, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the Licence for the specific language governing permissions and limitations under the Licence.</p>"},{"location":"Reference%20Implementation/lld/LLDFigures/","title":"Index","text":"<p>Home</p>"},{"location":"Reference%20Implementation/lld/LLDFigures/#index-of-reference-implementationlldlldfigures","title":"Index of Reference Implementation/lld/LLDFigures","text":""},{"location":"Resources/","title":"Resources","text":"<p>Home / Resources</p>"},{"location":"Resources/#eudi-wallet-resources","title":"EUDI Wallet Resources","text":"<p>To support your introduction to the EUDI Wallet, we\u2019ve gathered essential resources that provide a comprehensive foundation. Dive into technical specifications, explore the regulatory framework, and gain insights from real-world pilot projects. These materials are designed to help you understand the EUDI Wallet from all critical perspectives.</p>"},{"location":"Resources/#master-the-architecture-and-reference-framework","title":"Master the Architecture and Reference Framework","text":"<p>Discover the key specifications and guidelines needed to develop an interoperable EUDI Wallet solution. This framework provides a solid foundation based on common standards and best practices to ensure seamless integration and functionality. </p> <p>The Architecture and Reference Framework (ARF) outlines the specifications required to develop an interoperable European Digital Identity (EUDI) Wallet Solution based on common standards and practices. It defines high-level requirements to ensure consistent implementation across Member States.</p> <p>The Architecture and Reference Framework (ARF) is a work in progress that is continuously updated. It reflects the collaborative efforts among the 27 Member States, the European Commission, and, where relevant, private sector operators.</p> <p>Review the latest updates on the ARF</p>"},{"location":"Resources/#delve-into-the-applicable-technical-standards-and-specifications","title":"Delve into the applicable Technical Standards and Specifications","text":"<p>The European Digital Identity Wallet initiative is supported by ongoing work to define and align relevant standards and technical specifications with the relevant Implementing Acts establishing the European Digital Identity Framework. For more information, please refer to the following resources:</p> <p>List of Standards and Technical Specifications</p>"},{"location":"Resources/#discover-the-eudi-wallet-reference-implementation","title":"Discover the EUDI Wallet Reference Implementation","text":"<p>The EUDI Wallet Reference Implementation consists of open-source code libraries and a reference application, which are publicly available and ready for Member States and stakeholders to use in building their own applications.</p> <p>Its goal is to showcase a robust and interoperable platform for digital identification, authentication and electronic signatures based on common standards across the European Union.</p> <p>The Reference Implementation can be used by wallet providers, issuers and Relying Parties as a basis for their own solution. It also includes a set of testing tools to support testing and ensure that your implementation meets functional requirements.</p> <p>Check GitHub for more details and the repositories</p>"},{"location":"Resources/Architecture%20and%20Reference%20Implementation/","title":"Architecture and Reference Implementation","text":"<p>Home</p>"},{"location":"Resources/Architecture%20and%20Reference%20Implementation/#architecture-and-reference-framework","title":"Architecture and Reference Framework","text":"<p>The Architecture and Reference Framework (ARF) outlines the specifications required to develop an interoperable European Digital Identity (EUDI) Wallet Solution based on common standards and practices. It defines high-level requirements to ensure consistent implementation across Member States.</p> <p>The Architecture and Reference Framework (ARF) is a work in progress that is continuously updated. It reflects the collaborative efforts among the 27 Member States, the European Commission, and, where relevant, private sector operators.</p> <p>Review the latest version of the ARF</p>"},{"location":"Resources/Architecture%20and%20Reference%20Implementation/#check-out-the-roadmap-to-see-what-is-coming-next","title":"Check out the roadmap to see what is coming next","text":"<p>New epics are analysed in the ARF. The ARF roadmap provides a transparent view of the new epics currently being discussed or planned for the future. Its purpose is to promote open communication and collaboration in our community.</p> <p>View the ARF roadmap</p>"},{"location":"Resources/Architecture%20and%20Reference%20Implementation/#contributions-and-discussion","title":"Contributions and discussion","text":"<p>We welcome contributions to the ARF. Whether it's fixing a bug, proposing a new feature, or improving documentation, we appreciate any and all contributions that can help make the ARF better. Read the contribution guidelines. </p> <p>Join the discussion on ARF</p>"},{"location":"Resources/Large-Scale%20Pilots/","title":"Large Scale Pilots","text":"<p>Home</p>"},{"location":"Resources/Large-Scale%20Pilots/#eudi-wallet-large-scale-pilots","title":"EUDI Wallet Large-Scale Pilots","text":"<p>In May 2023, four Large-Scale Pilot projects were launched to rigorously test and prepare the EU Digital Identity Wallet for secure and seamless deployment. These Pilots involve approximately 360 entities, including private companies and public authorities, from 26 Member States, Norway, Iceland, and Ukraine. The projects are co-funded by European Commission grants and guided by EUDI Wallet technical specifications. Running until 2025, the pilots are structured as consortia, combining public and private sector expertise across the EU.</p> <p>The Pilots aim to validate the wallet's functionality in real-life scenarios, by gathering feedback on the reference implementation to enhance its security, interoperability, and overall design. These efforts focus on practical use cases that Europeans encounter daily, spanning 11 key areas such as accessing government services, opening bank accounts, and facilitating travel.</p> Pilot Focus EUDI Wallet Consortium (EWC) Focuses on Digital Travel Credentials, building on the reference wallet application to streamline cross-border travel. POTENTIAL Explores innovations across six digital identity sectors, including governmental services, banking, telecommunications, and healthcare. NOBID Led by Nordic and Baltic countries with Germany and Italy, this pilot tests the EUDI Wallet in payments. DC4EU Targets education and social security, supporting the integration of cross-border digital service infrastructures within a trust framework."},{"location":"Resources/Regulation/","title":"Regulation","text":"<p>Home</p>"},{"location":"Resources/Regulation/#eudi-wallet-regulation","title":"EUDI Wallet Regulation","text":"<p>Regulation (EU) 2024/1183  establishing the European Digital Identity Framework has entered into force. The framework mandates Member States to provide EU Digital Identity (eID) Wallets to citizens within 24 months of Implementing Acts adoption. </p> <p>All the Implementing Acts  that have been adopted until now, and lay down the rules for the core functionalities and certification of the eID Wallets. </p>"},{"location":"Resources/Standards/","title":"Standards","text":"<p>Home</p>"},{"location":"Resources/Standards/#standards","title":"Standards","text":"<p>EUDI Wallet Reference Implementation is based on the latest standards of ISO, OpenID and ETSI. Key standards include:</p> <ul> <li>ISO/IEC 18013-5 \u2013 International standard for mobile driving license (mDL) and digital credentials.</li> <li>OpenID4VP &amp; OpenID4VCI \u2013 OpenID standards for Verifiable Presentations (VP) and Verifiable Credential Issuance (VCI), ensuring secure authentication and credential exchange.</li> <li>ETSI TS 119 432 - Electronic Signatures and Infrastructures (ESI); Protocols for remote digital signature creation.</li> <li>CSC - Cloud Signature Consortium (CSC) API v2.0 specification.</li> </ul>"},{"location":"Resources/Technical%20Specifications%20and%20Standards/","title":"Technical Specifications and Standards","text":"<p>Home</p>"},{"location":"Resources/Technical%20Specifications%20and%20Standards/#essential-standards-and-technical-specifications-sts","title":"Essential Standards and Technical Specifications (STS)","text":"<p>The EUDI Wallet is supported by a defined set of standards and technical specifications considered essential for its implementation. These essential standards form the minimum foundation needed to ensure secure issuance, presentation, authentication, signing, and certification of digital identity credentials. Each essential standard is referenced with a link to its corresponding GitHub ticket for transparency and traceability.</p>"},{"location":"Resources/Technical%20Specifications%20and%20Standards/#purpose","title":"Purpose","text":"<p>The European Digital Identity Wallet (EUDI Wallet) relies on a comprehensive set of standards and technical specifications (STS). Out of nearly 200 STS tracked across the ecosystem, a core subset has been identified as essential for the Wallet itself.</p> <p>These essentials form the backbone of the Wallet\u2019s ability to securely issue, present, authenticate, sign, and certify digital identity credentials. They are marked in the GitHub tracker with both the <code>essential</code> and <code>Wallet</code> labels.</p>"},{"location":"Resources/Technical%20Specifications%20and%20Standards/#scope","title":"Scope","text":"<p>This document provides a non-technical overview of the essential standards underpinning the EUDI Wallet. It is intended for decision-makers, implementers, and stakeholders who need to understand why these specific standards matter and how they support the Wallet\u2019s functionality.</p> <p>The essential standards are organised by high-level categories that align with the main actors and concerns across the EUDI Wallet ecosystem. Each section groups the essential standards accordingly.</p>"},{"location":"Resources/Technical%20Specifications%20and%20Standards/#categories","title":"Categories","text":""},{"location":"Resources/Technical%20Specifications%20and%20Standards/#wallet-providers","title":"Wallet Providers","text":"<p>These requirements are the responsibility of the entities building and managing the EUDI Wallet solutions. They cover the core functionalities, security, user interface elements, and lifecycle management of the wallet.</p> # Title Status Articles CIR SDO 1 ISO/IEC 18013-5 - Mobile driving licence (mDL) application, First edition, 2021-09 #84 Jul, 2026 Art 5a(23) ICF, Art 5a(23) P&amp;I, Art 5a(23) PID/EAA CIR (EU) 2024/2977, CIR (EU) 2024/2979, CIR (EU) 2024/2982 ISO 2 ETSI DTS 119 602 - Trusted lists; Data model #278 Oct, 2025 Art 22(5) ETSI 3 ETSI EN 319 142-1 - Electronic Signatures and Infrastructures (ESI); PAdES digital signatures; Part 1: Building blocks and PAdES baseline signatures , V1.2.1 (2024-01) #69 \u2705 Done Art 5a(23) ICF CIR (EU) 2024/2979 ETSI 4 ETSI TS 119 412-6 Electronic Signatures and Trust Infrastructures (ESI); Certificate Profiles; Part 6: Certificate profile requirements for PID, Wallet, EAA, QEAA, and PSBEAA providers #421 Oct, 2025 ETSI 5 ETSI TS 119 432 V1.2.1 (2020-10) - Electronic Signatures and Infrastructures (ESI); Protocols for remote digital signature creation #68 Nov, 2025 Art 5a(23) ICF ETSI 6 ETSI TS 119 472-3 - Profiles for EAA/PID Issuance #398 Nov, 2025 Art 5a(23), Art 5a(23) PID/EAA ETSI 7 ETSI TS 119 475 - Electronic Signatures and Trust Infrastructures (ESI); Relying party attributes supporting EUDI Wallet user's authorisation decisions #287 Oct, 2025 Art 5a, Art 5b ETSI 8 ETSI TS 119 612 V2.4.1 (2025-08) - Electronic Signatures and Infrastructures (ESI); Trusted Lists #41 Nov, 2025 Art 22(5), Art 5a(23) ICF ETSI 9 W3C VCDM Verifiable Credentials Data Model and Representations, version 2.0, Manu Sporny et al #115 Nov, 2025 Art 5a(23) ICF, Art 5a(23) P&amp;I, Art 5a(23) PID/EAA CIR (EU) 2024/2977, CIR (EU) 2024/2979 W3C 10 OIDF OpenID for Verifiable Presentations 1.0 #2 \u2705 Done Art 5a(23) ICF, Art 5a(23) P&amp;I OIDF 11 OIDF OpenID4VC High Assurance Interoperability Profile 1.0 - Editor's draft #4 Dec, 2025 Art 5a(23) ICF, Art 5a(23) P&amp;I OIDF 12 OpenID for Verifiable Credential Issuance 1.0 #3 \u2705 Done Art 5a(23) ICF, Art 5a(23) P&amp;I OIDF 13 IETF SD-JWT-based Verifiable Credentials (SD-JWT VC) #9 Mar, 2026 Art 5a(23) PID/EAA IETF 14 IETF Token Status List (TSL) draft-ietf-oauth-status-list-12 #11 Dec, 2025 Art 5a(23) ICF IETF 15 CSC - Architectures and protocols for remote signature applications version 2.1.0.1 #29 Nov, 2025 Art 5a(23) P&amp;I CSC 16 EC TS01 v1.0 (2025-04) Specification of EUDI Wallet Trust Mark #18 \u2705 Done Art 5a EC 17 EC TS03 V1.0 (2025-08) Specification of Wallet Unit Attestations (WUA) used in issuance of PID and Attestations #17 \u2705 Done Art 5a(23) ICF EC 18 EC TS07 v1.0 (2025-07) - Specification of common interface for data deletion requests to Relying Parties #20 \u2705 Done Art 5a(23) P&amp;I EC 19 EC TS08 V.095 2025-07 Specification of common interface for lodging complaints to DPAs #19 \u2705 Done Art 5a(23) ICF, Art 5a(23) P&amp;I EC 20 EC TS09 V 1.0 (2025-07) - Specification of Wallet-to-Wallet interactions #22 \u2705 Done Art 5a(23) P&amp;I EC 21 EC TS10 v 1.0 (2025-08) - Data Portability and Download (export) #24 \u2705 Done Art 5a(4)(f), Art 5a(4)(g) EC 22 ENISA EUCC Guidelines Cryptography v.2 (2025-05) #415 \u2705 Done CIR (EU) 2024/2981, CIR (EU) 2024/482 ENISA"},{"location":"Resources/Technical%20Specifications%20and%20Standards/#member-states-registrars","title":"Member States &amp; Registrars","text":"<p>These requirements are for the public bodies that establish the legal and trust infrastructure. They focus on establishing registries, notifying the Commission, and defining national policies.</p> # Title Status Articles CIR SDO 1 ETSI DTS 119 602 - Trusted lists; Data model #278 Oct, 2025 Art 22(5) ETSI 2 ETSI TS 119 612 V2.4.1 (2025-08) - Electronic Signatures and Infrastructures (ESI); Trusted Lists #41 Nov, 2025 Art 22(5), Art 5a(23) ICF ETSI 3 EC TS02 v0.9 (2025-04) Specification of systems enabling the notification and subsequent publication of Provider information #23 Nov, 2025 Art 5a(23) We EC 4 EC TS05 V1.0 (2025-06) Common Formats and API for Relying Party Registration Information #14 \u2705 Done Art 5b.11 EC 5 EC TS06 v1.0 (2025-06) Common set of Relying Party information to be registered #16 \u2705 Done Art 5b(2)\u00a9 EC 6 ENISA EUCC Guidelines Cryptography v.2 (2025-05) #415 \u2705 Done CIR (EU) 2024/2981, CIR (EU) 2024/482 ENISA"},{"location":"Resources/Technical%20Specifications%20and%20Standards/#attestation-pid-providers","title":"Attestation &amp; PID Providers","text":"<p>These requirements are for the organizations that issue digital credentials to the wallet. This includes requirements for identity verification, issuance protocols, data formats, and revocation policies.</p> # Title Status Articles CIR SDO 1 ISO/IEC 18013-5 - Mobile driving licence (mDL) application, First edition, 2021-09 #84 Jul, 2026 Art 5a(23) ICF, Art 5a(23) P&amp;I, Art 5a(23) PID/EAA CIR (EU) 2024/2977, CIR (EU) 2024/2979, CIR (EU) 2024/2982 ISO 2 ETSI DTS 119 602 - Trusted lists; Data model #278 Oct, 2025 Art 22(5) ETSI 3 ETSI TS 119 412-6 Electronic Signatures and Trust Infrastructures (ESI); Certificate Profiles; Part 6: Certificate profile requirements for PID, Wallet, EAA, QEAA, and PSBEAA providers #421 Oct, 2025 ETSI 4 ETSI TS 119 461 V2.1.1 (2025-02) - Electronic Signatures and Trust Infrastructures (ESI); Policy and security requirements for trust service components providing identity proofing of trust service subjects #271 Nov, 2025 Art 19a(2), Art 24(5), Art 5a(24), Art 8(3), Art: 24(1c) CIR (EU) 2025/1566 ETSI 5 ETSI TS 119 472-1 - Electronic Signatures and Trust Infrastructures (ESI); Profiles for Electronic Attestations of Attributes; Part 1 - General requirements #284 Dec, 2025 Art 45d - f, Art 45e(2), Art 5a ETSI 6 ETSI TS 119 472-3 - Profiles for EAA/PID Issuance #398 Nov, 2025 Art 5a(23), Art 5a(23) PID/EAA ETSI 7 ETSI TS 119 612 V2.4.1 (2025-08) - Electronic Signatures and Infrastructures (ESI); Trusted Lists #41 Nov, 2025 Art 22(5), Art 5a(23) ICF ETSI 8 W3C VCDM Verifiable Credentials Data Model and Representations, version 2.0, Manu Sporny et al #115 Nov, 2025 Art 5a(23) ICF, Art 5a(23) P&amp;I, Art 5a(23) PID/EAA CIR (EU) 2024/2977, CIR (EU) 2024/2979 W3C 9 OIDF OpenID4VC High Assurance Interoperability Profile 1.0 - Editor's draft #4 Dec, 2025 Art 5a(23) ICF, Art 5a(23) P&amp;I OIDF 10 OpenID for Verifiable Credential Issuance 1.0 #3 \u2705 Done Art 5a(23) ICF, Art 5a(23) P&amp;I OIDF 11 IETF SD-JWT-based Verifiable Credentials (SD-JWT VC) #9 Mar, 2026 Art 5a(23) PID/EAA IETF 12 IETF Selective Disclosure for JWTs (SD-JWT) version 22 #28 Sep, 2025 Art 5a(23) PID/EAA IETF 13 IETF Token Status List (TSL) draft-ietf-oauth-status-list-12 #11 Dec, 2025 Art 5a(23) ICF IETF 14 EC TS03 V1.0 (2025-08) Specification of Wallet Unit Attestations (WUA) used in issuance of PID and Attestations #17 \u2705 Done Art 5a(23) ICF EC 15 EC TS11 Specification of interfaces and formats for the catalogue of Attestation Rulebooks and attributes #21 Oct, 2025 Art 45e(2) EC 16 ENISA EUCC Guidelines Cryptography v.2 (2025-05) #415 \u2705 Done CIR (EU) 2024/2981, [CIR (EU) 2024/482(https://eur-lex.europa.eu/eli/reg_impl/2024/482/oj/eng) ENISA"},{"location":"Resources/Technical%20Specifications%20and%20Standards/#relying-parties","title":"Relying Parties","text":"<p>These requirements are for the services and entities that accept and use the EUDI Wallet. They cover how they must register, authenticate themselves to the wallet, request user attributes, and handle user data.</p> # Title Status Articles CIR SDO 1 ISO/IEC 18013-5 - Mobile driving licence (mDL) application, First edition, 2021-09 #84 Jul, 2026 Art 5a(23) ICF, Art 5a(23) P&amp;I, Art 5a(23) PID/EAA CIR (EU) 2024/2977, CIR (EU) 2024/2979, CIR (EU) 2024/2982 ISO 2 ETSI DTS 119 602 - Trusted lists; Data model #278 Oct, 2025 Art 22(5) ETSI 3 ETSI EN 319 142-1 - Electronic Signatures and Infrastructures (ESI); PAdES digital signatures; Part 1: Building blocks and PAdES baseline signatures , V1.2.1 (2024-01) #69 \u2705 Done Art 5a(23) ICF CIR (EU) 2024/2979 ETSI 4 ETSI TS 119 411-8 V1.1.1 (2025-10) - Electronic Signatures and Trust Infrastructures (ESI); Policy and security requirements for Trust Service Providers issuing certificates; Part 8: Access Certificate Policy for EUDI Wallet Relying Parties #286 Nov, 2025 Art 5a(23) ICF, Art 5b.11 ETSI 5 ETSI TS 119 431-1 V1.3.1 (2024-12) - Electronic Signatures and Infrastructures (ESI); Policy and security requirements for trust service providers; Part 1: TSP service components operating a remote QSCD / SCDev #66 Nov, 2025 Art 29a(2)/39(a), Art 5a(23) ICF CIR (EU) 2025/1567 ETSI 6 ETSI TS 119 432 V1.2.1 (2020-10) - Electronic Signatures and Infrastructures (ESI); Protocols for remote digital signature creation #68 Nov, 2025 Art 5a(23) ICF ETSI 7 ETSI TS 119 472-2 Electronic Signatures and Trust Infrastructures (ESI); Profiles for Electronic Attestation of Attributes; Part 2: Profiles for EAA/PID Presentations to Relying Party #285 Oct, 2025 Art 5b.11 ETSI 8 ETSI TS 119 475 - Electronic Signatures and Trust Infrastructures (ESI); Relying party attributes supporting EUDI Wallet user's authorisation decisions #287 Oct, 2025 Art 5a, Art 5b ETSI 9 ETSI TS 119 612 V2.4.1 (2025-08) - Electronic Signatures and Infrastructures (ESI); Trusted Lists #41 Nov, 2025 Art 22(5), Art 5a(23) ICF ETSI 10 W3C VCDM Verifiable Credentials Data Model and Representations, version 2.0, Manu Sporny et al #115 Nov, 2025 Art 5a(23) ICF, Art 5a(23) P&amp;I, Art 5a(23) PID/EAA CIR (EU) 2024/2977, CIR (EU) 2024/2979 W3C 11 OIDF OpenID for Verifiable Presentations 1.0 #2 \u2705 Done Art 5a(23) ICF, Art 5a(23) P&amp;I OIDF 12 OIDF OpenID4VC High Assurance Interoperability Profile 1.0 - Editor's draft #4 Dec, 2025 Art 5a(23) ICF, Art 5a(23) P&amp;I OIDF 13 IETF SD-JWT-based Verifiable Credentials (SD-JWT VC) #9 Mar, 2026 Art 5a(23) PID/EAA IETF 14 IETF Token Status List (TSL) draft-ietf-oauth-status-list-12 #11 Dec, 2025 Art 5a(23) ICF IETF 15 CSC - Architectures and protocols for remote signature applications version 2.1.0.1 #29 Nov, 2025 Art 5a(23) P&amp;I CSC 16 EC TS05 V1.0 (2025-06) Common Formats and API for Relying Party Registration Information #14 \u2705 Done Art 5b.11 EC 17 EC TS06 v1.0 (2025-06) Common set of Relying Party information to be registered #16 \u2705 Done Art 5b(2)\u00a9 EC 18 ENISA EUCC Guidelines Cryptography v.2 (2025-05) #415 \u2705 Done CIR (EU) 2024/2981, [CIR (EU) 2024/482(https://eur-lex.europa.eu/eli/reg_impl/2024/482/oj/eng) ENISA"},{"location":"Resources/Technical%20Specifications%20and%20Standards/#protocols-interoperability","title":"Protocols &amp; Interoperability","text":"<p>These requirements define the common communication standards and protocols that ensure the entire system works together seamlessly across borders. This covers how different components interact with each other.</p> # Title Status Articles CIR SDO 1 ISO/IEC 18013-5 - Mobile driving licence (mDL) application, First edition, 2021-09 #84 Jul, 2026 Art 5a(23) ICF, Art 5a(23) P&amp;I, Art 5a(23) PID/EAA CIR (EU) 2024/2977, CIR (EU) 2024/2979, CIR (EU) 2024/2982 ISO 2 ETSI EN 319 142-1 - Electronic Signatures and Infrastructures (ESI); PAdES digital signatures; Part 1: Building blocks and PAdES baseline signatures , V1.2.1 (2024-01) #69 \u2705 Done Art 5a(23) ICF CIR (EU) 2024/2979 ETSI 3 ETSI TS 119 412-6 Electronic Signatures and Trust Infrastructures (ESI); Certificate Profiles; Part 6: Certificate profile requirements for PID, Wallet, EAA, QEAA, and PSBEAA providers #421 Oct, 2025 ETSI 4 ETSI TS 119 431-1 V1.3.1 (2024-12) - Electronic Signatures and Infrastructures (ESI); Policy and security requirements for trust service providers; Part 1: TSP service components operating a remote QSCD / SCDev #66 Nov, 2025 Art 29a(2)/39(a), Art 5a(23) ICF CIR (EU) 2025/1567 ETSI 5 ETSI TS 119 432 V1.2.1 (2020-10) - Electronic Signatures and Infrastructures (ESI); Protocols for remote digital signature creation #68 Nov, 2025 Art 5a(23) ICF ETSI 6 ETSI TS 119 461 V2.1.1 (2025-02) - Electronic Signatures and Trust Infrastructures (ESI); Policy and security requirements for trust service components providing identity proofing of trust service subjects #271 Nov, 2025 Art 19a(2), Art 24(5), Art 5a(24), Art 8(3), Art: 24(1c) CIR (EU) 2025/1566 ETSI 7 ETSI TS 119 472-2 Electronic Signatures and Trust Infrastructures (ESI); Profiles for Electronic Attestation of Attributes; Part 2: Profiles for EAA/PID Presentations to Relying Party #285 Oct, 2025 Art 5b.11 ETSI 8 ETSI TS 119 472-3 - Profiles for EAA/PID Issuance #398 Nov, 2025 Art 5a(23), Art 5a(23) PID/EAA ETSI 9 ETSI TS 119 612 V2.4.1 (2025-08) - Electronic Signatures and Infrastructures (ESI); Trusted Lists #41 Nov, 2025 Art 22(5), Art 5a(23) ICF ETSI 10 W3C VCDM Verifiable Credentials Data Model and Representations, version 2.0, Manu Sporny et al #115 Nov, 2025 Art 5a(23) ICF, Art 5a(23) P&amp;I, Art 5a(23) PID/EAA CIR (EU) 2024/2977, CIR (EU) 2024/2979 W3C 11 W3C Web Authentication: An API for accessing Public Key Credentials, Level 2, Jeff Hodges et al, April 2021 (W3C Recommendation) #314 \u2705 Done Art 5a(23) ICF CIR (EU) 2024/2979 W3C 12 OIDF OpenID for Verifiable Presentations 1.0 #2 \u2705 Done Art 5a(23) ICF, Art 5a(23) P&amp;I OIDF 13 OIDF OpenID4VC High Assurance Interoperability Profile 1.0 - Editor's draft #4 Dec, 2025 Art 5a(23) ICF, Art 5a(23) P&amp;I OIDF 14 OpenID for Verifiable Credential Issuance 1.0 #3 \u2705 Done Art 5a(23) ICF, Art 5a(23) P&amp;I OIDF 15 IETF SD-JWT-based Verifiable Credentials (SD-JWT VC) #9 Mar, 2026 Art 5a(23) PID/EAA IETF 16 IETF Selective Disclosure for JWTs (SD-JWT) version 22 #28 Sep, 2025 Art 5a(23) PID/EAA IETF 17 IETF Token Status List (TSL) draft-ietf-oauth-status-list-12 #11 Dec, 2025 Art 5a(23) ICF IETF 18 CSC - Architectures and protocols for remote signature applications version 2.1.0.1 #29 Nov, 2025 Art 5a(23) P&amp;I CSC 19 CSC API Data Model for remote signature applications, V 0.5.0 pre-release #403 Nov, 2025 Art 5a(23) P&amp;I CSC 20 EC TS03 V1.0 (2025-08) Specification of Wallet Unit Attestations (WUA) used in issuance of PID and Attestations #17 \u2705 Done Art 5a(23) ICF EC 21 EC TS09 V 1.0 (2025-07) - Specification of Wallet-to-Wallet interactions #22 \u2705 Done Art 5a(23) P&amp;I EC"},{"location":"Resources/Technical%20Specifications%20and%20Standards/#data-models-attestation-rules","title":"Data Models &amp; Attestation Rules","text":"<p>These requirements define the structure and meaning of the data being exchanged. This includes HLRs for PIDs, Attestation Rulebooks, and Catalogues, ensuring that the information exchanged is consistent and understandable across the entire ecosystem.</p> # Title Status Articles CIR SDO 1 ETSI TS 119 472-1 - Electronic Signatures and Trust Infrastructures (ESI); Profiles for Electronic Attestations of Attributes; Part 1 - General requirements #284 Dec, 2025 Art 45d - f, Art 45e(2), Art 5a ETSI 2 EC TS11 Specification of interfaces and formats for the catalogue of Attestation Rulebooks and attributes #21 Oct, 2025 Art 45e(2) EC"},{"location":"Resources/Technical%20Specifications%20and%20Standards/#technical-specifications","title":"Technical Specifications","text":"<p>While the EUDI Wallet relies primarily on recognised standards and technical specifications (STS), certain implementation details require additional, fast-track guidance.</p> <p>To bridge these gaps, the European Commission, in collaboration with the European Digital Identity Cooperation Group and the European Standards Organisations (ESO), develops complementary technical specifications.</p> <p>These EC-authored specifications:</p> <ul> <li>address short-term implementation needs not yet covered by existing standards,</li> <li>provide concrete guidance on interfaces, data formats, and trust mechanisms, and</li> <li>serve as input for future standardisation under ESO responsibility.</li> </ul> <p>All technical specifications are published openly on GitHub, following a transparent and collaborative drafting process that allows stakeholders to comment and contribute.</p> <p>Explore the technical specifications repository:</p> <ul> <li>Technical Specifications to support EUDI Wallet implementation</li> </ul>"},{"location":"Test/","title":"Test","text":"<p>Home / Test</p>"},{"location":"Test/#test-your-solution","title":"Test your Solution","text":"<p>In this section, you will find a set of pre-built testing tools to support you in validating your EUDI Wallet solution. These tools include an issuer, a verifier, and a wallet application, enabling you to assess interoperability and compliance with functional requirements. Whether you are developing a wallet, an issuer, or a verifier, you can test your solution against the corresponding tools to ensure seamless integration within the EUDI Wallet ecosystem.</p>"},{"location":"Test/#test-with-the-wallet-application","title":"Test with the Wallet Application","text":"<p>Instructions are provided on how to install the EUDI Wallet Application on your mobile phone (Android or iOS) and initialise it through issuing and presenting attestations.</p>"},{"location":"Test/#test-with-the-issuer","title":"Test with the Issuer","text":"<p>Test various issuance flows of OpenID4VCI with your wallet.</p>"},{"location":"Test/#test-with-the-online-verifier","title":"Test with the Online Verifier","text":"<p>Test how your wallet implementation responds to a credential request from a verifier. </p>"},{"location":"Test/#test-with-the-proximity-verifier","title":"Test with the Proximity Verifier","text":"<p>Use the Proximity Verifier app to test and validate your wallet implementation.</p>"},{"location":"Test/Issuer/","title":"Issuer","text":"<p>Home / Test</p>"},{"location":"Test/Issuer/#issuer","title":"Issuer","text":"<p>As part of the testing tools, we offer an issuer, that allows you to test various issuance flows of OpenID4VCI with your wallet:</p> <ul> <li>Credential Offer</li> <li>Credential Offer Pre-Authorization</li> <li>Credential Offer Deferred</li> <li>Credential Offer Dynamic</li> </ul> <p>You can test the issuance of credentials in both mDoc and SD-JWT formats. The test tools include a variety of credential types.</p> Tool Description Basic issuer Basic issuer that supports all issuance flows, in both mDoc and SD-JWT formats. Includes several credential types. Available at https://issuer.eudiw.dev/. Advanced issuance tester A more comprehensive issuance tester that enables following the different steps in the issuance flow. Supports all issuance flows, in both mDoc and SD-JWT formats. Includes several credential types.  Available at https://tester.issuer.eudiw.dev/. Locally installed Issuer Install the issuer locally. Allows you to add new credential types.  See Installation instructions and instructions on how to add new credential types."},{"location":"Test/Online%20Verifier/","title":"Online Verifier","text":"<p>Home / Test</p>"},{"location":"Test/Online%20Verifier/#online-verifier","title":"Online Verifier","text":"<p>Test how your wallet implementation responds to a credential request from a verifier. </p> <p>The test service provides extensive capabilities to test various credentials, including PID. You can also create custom credential requests tailored to your specific needs.</p> <p>Test service supports both mDoc and SD-JWT formats.</p> <p>There are two options available:</p> <ul> <li>https://verifier.eudiw.dev/ </li> <li>https://tester.relyingparty.eudiw.dev/</li> </ul>"},{"location":"Test/Proximity%20Verifier/","title":"Proximity Verifier","text":"<p>Home / Test</p>"},{"location":"Test/Proximity%20Verifier/#proximity-verifier","title":"Proximity Verifier","text":"<p>The Proximity Verifier (also referred as mDoc Verifier) is an Android application based on the <code>appverifier</code> from the Google Identity Credential library, implementing ISO/IEC 18013-5:2021.</p>"},{"location":"Test/Proximity%20Verifier/#purpose","title":"Purpose","text":"<p>The Proximity Verifier app is provided to help developers test and validate their wallet implementations.</p>"},{"location":"Test/Proximity%20Verifier/#modifications","title":"Modifications","text":"<p>Starting from the original code of the <code>appverifier</code> here, the following modifications have been made (the code is not currently publicly available):</p> <ul> <li>Support for requesting EU Documents:</li> <li>Personal Identification Data (PID) document, according to the ARF PID RuleBook.</li> <li>Age Verification (Pseudonym) document.</li> <li>IACA Certificates: Updated to support EUDI Wallet IACAs as trusted certificates.</li> <li>Reader Authentication Certificate.</li> </ul>"},{"location":"Test/Proximity%20Verifier/#install-the-verifier","title":"Install the Verifier","text":"<p>The app is available for download from the App Center, here.</p>"},{"location":"Test/Proximity%20Verifier/#important-note","title":"Important Note","text":"<p>The Proximity Verifier app is a testing tool for developers to validate their wallet implementations.  It is not intended for production use.  The app may contain bugs or other issues that affect its functionality on different mobile devices or Android versions. These issues will be addressed in the upcoming open-source library, which will be available for developers to build their own verifier applications.</p>"},{"location":"Test/Wallet%20Application/","title":"Wallet Application","text":"<p>Home / Test / Wallet Application</p>"},{"location":"Test/Wallet%20Application/#wallet-application","title":"Wallet Application","text":"<p>The EUDI Wallet application is available for download to your phone. The app is available for both Android and iOS devices.</p>"},{"location":"Test/Wallet%20Application/Android/","title":"Android","text":"<p>Home / Test / Wallet Application</p>"},{"location":"Test/Wallet%20Application/Android/#install-the-wallet-application","title":"Install the Wallet Application","text":""},{"location":"Test/Wallet%20Application/Android/#minimum-device-requirements","title":"Minimum Device Requirements","text":"<ul> <li>API level 26.</li> </ul>"},{"location":"Test/Wallet%20Application/Android/#installation","title":"Installation","text":"<p>You can download the application here</p> <p>For the proximity flow, you will also need to download the Android Verifier app. More information can be found here</p>"},{"location":"Test/Wallet%20Application/Android/#app-launch","title":"App Launch","text":"<ol> <li>Launch the application</li> <li>You will be presented with a welcome screen where you will be asked to create a PIN for future logins.</li> </ol>"},{"location":"Test/Wallet%20Application/iOS/","title":"iOS","text":"<p>Home / Test / Wallet Application</p>"},{"location":"Test/Wallet%20Application/iOS/#install-the-wallet-application","title":"Install the Wallet Application","text":""},{"location":"Test/Wallet%20Application/iOS/#minimum-device-requirements","title":"Minimum Device Requirements","text":"<ul> <li>Any device that supports iOS 16.0</li> </ul>"},{"location":"Test/Wallet%20Application/iOS/#setup","title":"Setup","text":"<ol> <li>Download and install Xcode and its associated tools by following the official setup guide. Using the latest stable version is recommended.</li> <li>Clone the iOS repository using the following command:     <code>git clone git@github.com:eu-digital-identity-wallet/eudi-app-ios-wallet-ui.git</code></li> <li> <p>Make sure you have access to the dependencies below:</p> <ul> <li>iso18013-data-model</li> <li>iso18013-data-transfer</li> <li>iso18013-security</li> <li>wallet-storage</li> <li>wallet-kit</li> <li>openid4vp-swift</li> <li>presentation-exchange-swift</li> <li>openid4vci-swift</li> </ul> </li> <li> <p>To run the app on a device, select your app scheme and press Run. Additionally, you need to supply your own provisioning profile and signing certificate in the Signing &amp; Capabilities tab of your app target.</p> </li> </ol> <p>You will also need to download the Android Verifier app. More information can be found here</p>"},{"location":"Test/Wallet%20Application/iOS/#app-launch","title":"App Launch","text":"<ol> <li>Launch the application</li> <li>You will be presented with a welcome screen where you will be asked to create a PIN for future logins.</li> </ol>"},{"location":"Use%20Cases/","title":"Index","text":"<p>Home</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/","title":"Mobile Driving License","text":"<p>Home / Use Cases / Mobile Driving License</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/#mobile-driving-license-toolkit","title":"Mobile Driving License Toolkit","text":"<p>Welcome to the Mobile Driving License (mDL) Implementation Toolkit.</p> <p>This guide is designed to provide comprehensive technical guidance for the implementers of the mobile Driving License (mDL) Use Case. It targets a technical audience, including:</p> <ul> <li>EU Member States: Specifically, the issuers and verifiers responsible for implementing mDL solutions.</li> <li>Wallet Providers: Entities developing and providing European Digital Identity (EUDI) Wallets.</li> <li>mDL Verifiers (Relying Parties): Public and private sector entities that will verify the mDL, such as police officers.</li> </ul> <p>This toolkit aligns with the EUDI Wallet Architecture and Reference Framework (ARF), which provides the technical foundation to ensure interoperability, security, and privacy for the EUDI Wallet ecosystem. The development of the ARF is strategically driven by real-world use cases, including the mDL, to ensure the user experience and technical requirements are effectively addressed. The mDL is a significant use case for the EUDI Wallet, allowing users to request, store, and present a mobile Driving Licence to prove their driving privileges in both online and offline scenarios. This toolkit will guide you through the process of building and integrating a compliant and interoperable mDL solution.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/#solution-overview","title":"Solution Overview","text":"<p>This section provides a high-level overview of the mDL solution within the broader EUDI Wallet ecosystem.  It introduces the use case and outlines the legal and technical foundations.</p> <p> Learn more about the mDL solution</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/#architecture-overview","title":"Architecture Overview","text":"<p>This section describes the high-level architecture of the EUDI Wallet ecosystem, detailing its core components and how they interact to enable the mobile Driving License (mDL) use case. It provides the technical foundation to ensure interoperability, security, and privacy for all actors involved.</p> <p> Learn more about the mDL architecture</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/#guides","title":"Guides","text":"<p>This section offers practical, step-by-step guides and technical specifications for implementing the mDL. It covers the entire lifecycle of an mDL, from issuance to presentation and verification. </p> <p> Discover the mDL guides</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/#reference-implementation-roadmap-for-mdl","title":"Reference Implementation Roadmap for mDL","text":"<p>The EUDI Wallet and the mDL solution are continuously evolving. This section provides insights into the future development roadmap, including planned updates and the integration of new features.</p> <p> [Find more about the mDL roadmap](TBD)</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/#feedback","title":"Feedback","text":"<p>This toolkit is a living document that will be regularly updated based on feedback from the community of implementers. </p> <p> [Provide your feedback](TBD) </p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/","title":"mDL Architecture","text":"<p>Home / Use Cases / Mobile Driving License / mDL Architecture</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/#high-level-architecture-of-the-mdl-target-solution","title":"High-level Architecture of the mDL Target Solution","text":"<p>The design options form the mDL Use Case target solution are implemented by the software components presented in the following figure. The components of the target solution are presented by role of the EUDI Wallet ecosystem as laid out by chapter 3 of the [ARF]. </p> <p></p> <p>The components are distinguished in the following types based on the provider of each component: </p> <ul> <li>The components depicted in green colour are the target solution software libraries/components provided by the Commission  as part of the EUDI Wallet Reference Implementation which is based on a modular architecture composed of a set of business agnostic, re-usable components. </li> <li>The components depicted in white colour are considered prerequisites to the target solution to function and they are provided by the organizations/entities acting as service providers such as mDL Issuers and mDL Verifiers.</li> <li>Finally, the components in grey colour are part of services provided by the Commission\u2019s eIDAS Dashboard. </li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/EUDI%20Wallet/","title":"EUDI Wallet","text":"<p>Home / Use Cases / Mobile Driving License / mDL Architecture</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/EUDI%20Wallet/#eudi-wallet","title":"EUDI Wallet","text":"<p>According to Article 5.2 of 4<sup>th</sup> Driving License Directive mDL shall be issued to the European Digital Identity Wallets as electronic attestations of attributes. Therefore, mDL can only be issued to an active EUDI Wallet instance. </p> <p>The reference architecture of the EUDI Wallet ecosystem and its components is presented in section 4.3 of ARF.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/Proximity%20Verifier/","title":"Proximity Verifier","text":"<p>Home / Use Cases / Mobile Driving License / mDL Architecture</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/Proximity%20Verifier/#proximity-verifier-mobile-application-mdl-reader","title":"Proximity Verifier mobile application (mDL Reader)","text":"<p>The mDL Reader is a mobile application that can request, receive, and verify the integrity and authenticity of an mDL for proximity presentation flows. It is controlled by an mDL Verifier, which is a person or organization.</p> <p>The mDL reader implements the proximity presentation flow with the EUDI Wallet. ISO/IEC 18013-5 specifies the interfaces between:</p> <ul> <li> the mDL (wallet) and mDL reader and</li> <li> the mDL reader and the issuing authority infrastructure. </li> </ul> <p> The interface of the mDL reader and the issuing authority infrastructure (online/server data retrieval) is excluded (not supported) from the mDL target solution since it allows the issuing authority to have knowledge when the mDL holder presents the mDL to a specific mDL verifier. This is prohibited explicitly by articles 5a.16 and 5a.5(b) of [eIDAS] and [ARF] Annex 2 High level requirement \u201cProxId_02\u201d that states explicitly \u201cWallet Solutions, PID Providers, Attestation Providers, Wallet Providers, and Relying Parties SHALL NOT support server retrieval as specified in ISO/IEC 18013-5 for requesting and presenting PID or attestation attributes\u201d. Therefore, this method is excluded (not supported) from the mDL target solution</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/Remote%20Verifier%20Web/","title":"Remote Verifier Web","text":"<p>Home / Use Cases / Mobile Driving License / mDL Architecture</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/Remote%20Verifier%20Web/#remote-verifier-web-application","title":"Remote Verifier web application","text":"<p>The components required by the (Remote) mDL Verifier Organization are described below. The mDL Verifier Organization needs to integrate in its infrastructure and IT systems the mDL Verifier component that offers the main remote mDL verification functionality. The specific components that comprise the mDL target solution are the following: </p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/Remote%20Verifier%20Web/#remote-mdl-verifier-client","title":"(Remote) mDL Verifier Client:","text":"<ul> <li>runs in the web browser and provides the user interface for initiating and managing the presentation flow. </li> <li>renders and submits the presentation requests to the wallet. </li> <li>interacts with the Digital Credential API of the web browser to manage the presentation requests and responses. </li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/Remote%20Verifier%20Web/#remote-mdl-verifier-backend","title":"(Remote) mDL Verifier Backend:","text":"<ul> <li>is the server-side component of the mDL Verifier application that directly interacts with the Wallet via the frontend. </li> <li>sends presentation requests, compliant with the OpenID4VP specification, to the Wallet via the browser's Digital Credentials API </li> <li>receives the encrypted presentation response containing the requested attributes from the Wallet (forwarded by the browser) </li> <li>performs the trust relationships checks. </li> <li>integrates with the mDL Verifier Organization backend systems to inform about the requested mDLs claims and verification checks. </li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/Remote%20Verifier%20Web/#mdl-verifier-organization-backend-systems","title":"mDL Verifier Organization backend systems:","text":"<ul> <li>It requests from the mDL Verifier Backend to initiate the mDL remote presentation flow, </li> <li>It receives from the mDL Verifier Backend the requested mDL attributes and validation and verification checks. </li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/mDL%20Issuing%20Authority/","title":"mDL Issuing Authority","text":"<p>Home / Use Cases / Mobile Driving License / mDL Architecture</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/mDL%20Issuing%20Authority/#mdl-issuing-authority","title":"mDL Issuing Authority","text":"<p>The components required by the mDL Issuing Authority are described below. The mDL Issuing Authority needs to integrate in its infrastructure and IT systems the mDL Issuer component that offers the main mDL issuance functionality. The specific components that comprise the mDL target solution are the following:</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/mDL%20Issuing%20Authority/#issuer-client-and-backend","title":"Issuer Client and Backend","text":"<ul> <li>The mDL Issuing Authority shall offer a service to the driving licence owner to request the issuance of the mDL.</li> <li>This service implements the \u201cissuer initiated\u201d issuance flow which is optional (as justified below) and consequently makes this service optional as well.</li> <li>The Issuer Client interacts with the mDL Issuer component to request the Credential Offer that will be sent to the EUDI Wallet via either a QR code (cross device) or URI (same device).</li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/mDL%20Issuing%20Authority/#oauth2-authorization-server","title":"OAuth2 Authorization Server","text":"<ul> <li>This component protects the mDL Issuer which acts as a resource server using Access Tokens as defined in OAuth 2.0 specification.</li> <li>The component shall comply with the OpenID4VCI where the existing OAuth 2.0 mechanisms are extended as described in section 3.2 of OpenID4VCI.</li> <li>OAuth 2.0 Authorization Server is responsible for authenticating and authorizing the End User according to policies established in the mDL Issuing Authority.</li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/mDL%20Issuing%20Authority/#mdl-issuer","title":"mDL Issuer","text":"<ul> <li>This is the core component responsible for issuing the mDLs to the EUDI Wallet.</li> <li>It implements the Credential Endpoint of the OpenID4VCI specification.</li> <li>The Credential Endpoint issues one or more mDLs upon presentation of a valid Access Token representing the approval of the End User.</li> <li>The component interacts with the Driving Licence Authentic Source to retrieve the details (claims) of the mDL.</li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/mDL%20Issuing%20Authority/#driving-licence-authentic-source","title":"Driving Licence Authentic Source","text":"<ul> <li>This component provides to the mDL Issuer component the details (claims) of the driving licence of a holder.</li> <li>Authentic Sources are public or private repositories or systems, recognised or required by law, containing attributes about natural or legal persons (ARF 3.10). The Driving Licence Authentic Source component represents these repositories or systems for the mDL Use Case.</li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/mDL%20Issuing%20Authority/#issuing-authority-ca-iaca","title":"Issuing Authority CA (IACA)","text":"<ul> <li>Issuing Authority CA is the certificate authority operated by or on behalf of an issuing authority ([ISO/IEC 18013-5] section 3.14).</li> <li>The IACA issues the IACA root certificate, IACA link certificate, and mDL document signer certificate.</li> <li>It serves as the root of trust for all mDL verifiers to securely validate the integrity and authenticity of mDLs issued by the respective Issuing Authority (IA).</li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/mDL%20Issuing%20Authority/#revocation-lists-manager","title":"Revocation Lists Manager","text":"<ul> <li>The mDL Issuer Organisation uses this component to manage (create and update) the revocation status list or revocation identifier list of the mDLs.</li> <li>It creates a status list and identifier list. The Manager component supports both revocation list types (status and identifier).</li> <li>When an mDL is issued, then mDL Issuer component must register it in the status list using this component\u2019s API. It shall register its unique identifier (e.g., a serial number, a unique hash, or an index) and position in the list and then initialize it (e.g. set to \u201cVALID\u201d or \u201c0\u201d).</li> <li>When an mDL is revoked then the mDL Issuer shall invoke this component\u2019s API to either add the unique identifier in the identifier list or set the status to \u201cINVALID\u201d or \u201c1\u201d in the status list.</li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Architecture/mDL%20Issuing%20Authority/#revocation-lists-publisher","title":"Revocation Lists Publisher","text":"<ul> <li>The mDL Issuer Organisation uses this component to generate, sign, publish by making available to the public the revocation status list and/or revocation identifier list of the mDLs.</li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/","title":"Index","text":"<p>Home</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/#mobile-driving-license-guides","title":"Mobile Driving License Guides","text":""},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/#wallet-provider-guide","title":"Wallet Provider Guide","text":"<p>As a Wallet Provider you can find here practical, step-by-step guides and technical specifications for implementing a Wallet supporting the mDL.</p> <p> Discover the wallet provider guides</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/#mdl-issuer-guide","title":"mDL Issuer Guide","text":"<p>As an mDL Issuer you can find here practical, step-by-step guides and technical specifications for implementing an mDL Issuing Authority.</p> <p> Discover the mDL issuer guides</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/#mdl-verifier-guide","title":"mDL Verifier Guide","text":"<p>As an mDL Verifier you can find here practical, step-by-step guides and technical specifications for implementing an mDL Reader and mDL Remote Verifier.</p> <p> Discover the mDL verifier guides</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/Wallet%20Provider/","title":"Index","text":"<p>Home</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/Wallet%20Provider/#index-of-use-casesmobile-driving-licensemdl-guideswallet-provider","title":"Index of Use Cases/Mobile Driving License/mDL Guides/Wallet Provider","text":"<ul> <li>Getting started</li> <li>Wallet Developers Workflow</li> <li>Wallet Provider Specs</li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/Wallet%20Provider/Getting%20Started/","title":"Getting Started","text":"<p>Home / Use Cases / Mobile Driving License / mDL Guides / Wallet Provider</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/Wallet%20Provider/Getting%20Started/#wallet-provider-getting-started","title":"Wallet Provider Getting Started","text":"<p>This guide provides the technical framework, requirements and detailed instructions necessary for implementing EUDI Wallet Provider solutions within the European Digital Identity (EUDI) Wallet ecosystem to support Mobile Driving Licence (mDL) use cases.</p> <p>The foundation for this implementation is the Architecture and Reference Framework (ARF), which is intended to create uniform conditions for the implementation of the eIDAS 2 Regulation. The provided reference implementation acts as the Wallet Unit, supporting all compliant mDL flows.</p> <p>This guide details the steps required to configure and operate a Wallet Unit using the reference implementation to ensure interoperability, security, and privacy across the European Union, with specific focus on supporting the mDL attestation requirements.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/Wallet%20Provider/Getting%20Started/#who-is-this-guide-for","title":"Who is this guide for","text":"<p>This guide is primarily targeted at technical professionals responsible for designing and building EUDI Wallet Provider solutions that support mDL use cases. This includes developers, solution architects, and engineers from Member State organisations or entities mandated or recognized by Member States to provide Wallet Solutions to Users.</p> <p>The target audience could also expand to other stakeholders who require a deep technical understanding of Wallet Provider responsibilities within the EUDI Wallet ecosystem. </p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/Wallet%20Provider/Getting%20Started/#how-to-use-this-guide","title":"How to use this guide","text":"<p>No new requirements are imposed by the mDL use case on EUDI wallets. However, for an overview, this guide is structured to mirror the implementers' hub sections, providing similar navigation. The main body of this guide focuses on the lifecycle and technical implementation details relevant to EUDI Wallet Provider operations for mDL support, by including:</p> <ul> <li>the foundational technical and organisational steps required before beginning implementation</li> <li>mDL support implementation, including attestation issuance and presentation flows</li> <li>the process of registering and notifying your entity as a Wallet Provider</li> <li>where to get the reference implementation libraries and SDKs</li> <li>tools and procedures necessary for conformance testing and validation of the implemented Wallet Solution</li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/Wallet%20Provider/Getting%20Started/#links-to-essential-resources","title":"Links to essential resources","text":"<p>To ensure seamless operation and mutual recognition across the Union, all compliant Wallet Providers implemented using this guide SHALL support the Wallet Provider specifications.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/Wallet%20Provider/Wallet%20Developers%20Workflow/","title":"Wallet Developers Workflow","text":"<p>Home / Use Cases / Mobile Driving License / mDL Guides / Wallet Provider</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/Wallet%20Provider/Wallet%20Developers%20Workflow/#technical-deep-dive-wallet-developers-workflow","title":"Technical Deep Dive - Wallet Developers Workflow","text":"<p>According to Article 5.2 of the 4<sup>th</sup> Driving License Directive, mDL shall be issued to the European Digital Identity Wallets as electronic attestations of attributes. Therefore, mDL can only be issued to an active EUDI Wallet instance, which has to comply with all requirements in the eIDAS 2 Regulation.</p> <p>All baseline requirements outlined in the ARF are applicable to EUDI Wallets. The mDL use case introduces specific technical requirements (defined in the mDL Rulebook, Annex 3.2 of the ARF) regarding the attribute schema, encoding, and supported protocols.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/Wallet%20Provider/Wallet%20Developers%20Workflow/#development-pre-requisites","title":"Development pre-requisites","text":"<p>The reference implementation's preconditions listed in the relevant section on the implementer's hub do apply to the Wallet Provider.</p> <p>Nevertheless, this section outlines essential integration dependencies and pre-requisites for Member State organisations or entities mandated or recognized by Member States to successfully launch their EUDI Wallet Provider solution using the EUDI Wallet Reference Implementation for mDL support.</p> <p>Platform Requirements</p> <p>Your EUDI Wallet implementation must support the following platform specifications:</p> <p>Android Implementation</p> <ul> <li>Target Operating Systems: Android 10.0+ (API 29+)</li> <li>Programming Language: Kotlin</li> <li>Development Framework: Native Android</li> </ul> <p>iOS Implementation</p> <ul> <li>Target Operating Systems: iOS 17+</li> <li>Programming Language: Swift</li> <li>Development Framework: Native iOS</li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/Wallet%20Provider/Wallet%20Developers%20Workflow/#mdl-core-functionalities","title":"mDL Core Functionalities","text":"<p>The mDL Use Case target solution for the EUDI Wallet shall support the following core functionalities. </p> <p>mDL Attestation Issuance</p> <p>Your EUDI Wallet implementation must support issuance of the mDL according to the OpenID4VCI v1.0 specification based on ARF and ISO/IEC 18013-5 (CBOR) standard for remote flows based on specifications from the 4<sup>th</sup> Driving License Directive.</p> <p>Remote Presentation Flow Implementation</p> <p>Your EUDI Wallet must support remote presentation flow with requirements as follows:</p> <p>Data retrieval not based on user agent (Digital Credentials API)</p> <ul> <li>Shall be according to ISO/IEC 18013-5 (CBOR), OpenID4VP v1.0 specification instead of ISO/IEC 18013-7 (Annex B) where Draft 18 of OpenID4VP is used</li> </ul> <p>Data retrieval based on user agent (Digital Credentials API) - Optional</p> <ul> <li>According to ISO/IEC 18013-5 (CBOR), ISO/IEC 18013-7 (Annex C \u2013 Digital credentials API retrieval)</li> <li>According to OpenID4VP (Appendix A. OpenID4VP over the Digital Credentials API)</li> </ul> <p>Proximity Presentation Flow Implementation</p> <p>Your EUDI Wallet must support proximity presentation flow of the mDL according to ISO/IEC 18013-5 (CBOR) standard.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/Wallet%20Provider/Wallet%20Developers%20Workflow/#trust-and-security-implementation","title":"Trust and Security Implementation","text":"<p>Your EUDI Wallet implementation must include the following trust and security mechanisms:</p> <p>Trust Relationships</p> <ul> <li>Authenticate mDL Issuer using the access certificate (IACA)</li> <li>Verify authenticity of mDL attestations</li> <li>Download mDL Issuer Access CA Trusted Lists from relevant Trusted List Providers</li> <li>Check registration certificates or online services of Registrars</li> </ul> <p>Security Mechanisms</p> <ul> <li>Implement session encryption (mandatory for proximity flows)</li> <li>Support mDL issuer data authentication</li> <li>Enable mdoc authentication (device binding) to prevent cloning of the mDL</li> <li>Implement mdoc Reader authentication for proximity flows (mandatory) and remote flows (optional)</li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/Wallet%20Provider/Wallet%20Developers%20Workflow/#wallet-provider-registration","title":"Wallet Provider Registration","text":"<p>To operate as a trusted Wallet Provider within the EUDI Wallet ecosystem, your organisation must complete the registration and notification process as specified in the ARF.</p> <p>Registration Process</p> <p>Register your organisation as a Wallet Provider with the national authorities in your Member State, ensuring compliance with all certification requirements for Wallet Solutions (see ARF section 7 - Certification and Risk Management).</p> <p>Notification and Publication</p> <p>The Member State is responsible for notifying the Wallet Provider to the European Commission, enabling cross-border recognition and interoperability within the EUDI Wallet ecosystem.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/Wallet%20Provider/Wallet%20Developers%20Workflow/#libraries-sdks","title":"Libraries &amp; SDKs","text":"<p>The EUDI Wallet Reference Implementation provides key reusable components to accelerate deployment. Please refer to the relevant section for detailed instructions on how to build and test the Wallet Provider.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/Wallet%20Provider/Wallet%20Provider%20Specs/","title":"Wallet Provider Specs","text":"<p>Home / Use Cases / Mobile Driving License / mDL Guides / Wallet Provider</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/Wallet%20Provider/Wallet%20Provider%20Specs/#wallet-provider-specifications","title":"Wallet Provider Specifications","text":"<p>The following are considered necessary capabilities of the EUDI Wallet reference implementation for the mDL Use Case:</p> Specification Optionality Description and Reference mDL Verifiable Credentials ISO/IEC 18013-5 (CBOR) Mandatory [4<sup>th</sup> Driving License Directive] Annex I, Part C  [ARF], High Level Requirement:\u00a0 mDL_01 [ARF] \u201cAnnex 3.02 - mDL Rulebook\u201d mDL Data Model Mandatory As above Attestation Issuance Interface (AII) Credential Issuance API according to OpenID4VCI v1.0 specification Mandatory Refer to Issuer relevant specification Issuance Initiation Issuer-initiated Optional Refer to Issuer relevant specification Wallet-initiated Mandatory Refer to Issuer relevant specification Issuer Authorization Pre-Authorized Code Flow Optional Refer to Issuer relevant specification Authorization Code Flow Mandatory Refer to Issuer relevant specification Number of VCs per issuance request One verifiable credential per issuance request Mandatory Refer to Issuer relevant specification Multiple same verifiable credentials per issuance request (Batch Issuance) Mandatory Refer to Issuer relevant specification Time of issuance Immediate Issuance Optional (1) Refer to Issuer relevant specification Deferred Issuance Optional (1) Refer to Issuer relevant specification Additional issuance flows Dynamic Issuance (synchronous\u00a0or just-in-time) Optional Refer to Issuer relevant specification Re-issuance Mandatory Refer to Issuer relevant specification Topology for Issuance (issuer-initiated) flows Same device Optional Refer to Issuer relevant specification Cross device Optional Refer to Issuer relevant specification Issuance Trust Relationships Authenticate mDL Issuer\u00a0using the access certificate (IACA) Mandatory ARF section 6.6.2.1 point 1 and section 6.6.2.2 Verify authenticity of mDL Mandatory ARF section 6.6.2.1 point 5 and section 6.6.2.5 Download the mDL Issuer Access CA Trusted List(s) from the relevant Trusted List Provider(s) Mandatory ARF section 6.6.2.2 Checks registration certificate or the online service of the Registrar indicated in the access certificate Mandatory ARF section 6.6.2.2 specifies that \u201cWallet Unit checks the registration information contained in the registration certificate (if available in the Issuer metadata) or in the online service of the Registrar indicated in the access certificate\u201d mDL presentation policy Store locally the mDL presentation policy Mandatory ARF section 6.6.2.1 point 7 and section 6.6.2.7 Presentation Interface (PI) Proximity Flow: Presentation Request (of verifiable credentials according to ISO/IEC 18013-5 standard) Mandatory Refer to Proximity Verifier relevant specification Remote Flow: Presentation Request (of verifiable credentials) according to ISO 18013 -7 Annex B (OpenID4VP specification) Mandatory Refer to Remote Verifier relevant specification                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        OpenID4VP version 1.0 will be supported instead of Draft 18 which is specified in ISO 18013-5 Annex B Remote Flow: Presentation Request (of verifiable credentials) according to ISO 18013 -7 Annex C Optional Refer to Remote Verifier relevant specification ARF in section 4.4.3.1 states that \u201cThe use of this API by Wallet Units and Relying Parties is optional\u201d Remote Flow: Presentation Request (of verifiable credentials) according to OpenID4VP specification in combination with the Digital Credentials API Optional Refer to Remote Verifier relevant specification                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             ARF in section 4.4.3.1 states that \u201cThe use of this API by Wallet Units and Relying Parties is optional\u201d Topology for Presentation Flow Cross device (for proximity and remote flows) Mandatory Refer to Remote Verifier relevant specification                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Refer to Proximity Verifier relevant specification Same device (for remote flow) Mandatory Refer to Remote Verifier relevant specification Presentation Flows Remote Mandatory Refer to Remote Verifier relevant specification Proximity Mandatory Refer to Proximity Verifier relevant specification Initialization for Proximity Presentation Flow mDL reader using NFC Optional Refer to Proximity Verifier relevant specification Device engagement technologies for Proximity Presentation Flow NFC Conditional (1) According to Table 1 in ISO/IEC 18013-5 QR Code Conditional (1) According to Table 1 in ISO/IEC 18013-5 NFC Device engagement technology support for Proximity Presentation Flow Static Handover Conditional (2) According to section 6.3.2.3 in ISO/IEC 18013-5, If the EUDI Wallet supports NFC for device engagement then it shall support Static Handover, Negotiated Handover, or both Negotiated Handover Conditional (2) As above Data Retrieval Methods for Proximity Presentation Flow Offline (device) retrieval Mandatory Refer to Proximity Verifier relevant specification Online (server) retrieval N/A This method does not apply to the EUDI Wallet. Message encoding for Proximity Presentation Flow mdoc Request/Response messages encoded with CBOR Mandatory Refer to Proximity Verifier relevant specification Data Transmission/ Device Retrieval for Proximity Presentation Flow NFC Conditional (1) According to Table 2 in ISO/IEC 18013-5 BLE Conditional (1) According to Table 2 in ISO/IEC 18013-5 Wi-Fi Aware Optional According to Table 2 in ISO/IEC 18013-5 Data Device Retrieval using BLE for Proximity Presentation Flow mdoc central client mode Optional Section 8.3.3.1.1.1 in ISO/IEC 18013-5 implies that this mode is optional. mdoc peripheral server mode Optional As above BLE L2CAP Optional Refer to Proximity Verifier relevant specification Security Mechanism and Trust Relationships for Device Retrieval for Proximity/Remote (DC API) Presentation Flow Session Encryption Mandatory (assumed) for proximity  Conditional for remote For offline interactions, a session-based encryption mechanism directly encrypts the mDL response Issuer data authentication Mandatory According to ISO/IEC 18013-5. section 9.1.2 the purpose of issuer data authentication is to confirm that the mdoc data is issued by the issuing  authority and that it has not changed since issuance. According to section 9.1.2 in ISO/IEC 18013-5. Section 9.3.1 applies also specifying as a mandatory capability Issuer data authentication is implemented by way of a digital signature over mDL data, using a public-private (asymmetric) key pair. mdoc authentication (device binding) Mandatory According to section 9.1.3 in ISO/IEC 18013-5 the security objective of mDL authentication is to prevent cloning of the mDL and to mitigate man in the middle attacks. mdoc Reader authentication Mandatory for proximity Optional for remote According to section 9.1.4 in ISO/IEC 18013-5 mDL Reader authentication uses information stored in the mDL Reader to confirm that the mDL Reader and the mDL Reader Request are authenticated. Section 7.1.2 states that \u201cAn mDL may require mdoc reader authentication (see 9.1.4) before releasing data elements not marked as mandatory in Table 5. An mDL shall not require mdoc reader authentication as a precondition for the release of any of the mandatory data elements. An mDL may offer functionality to the mDL holder to pre-authorize the release of mandatory data elements selected by the mDL holder to mDL readers using mdoc reader authentication.\u201d Disclosure options Selective Disclosure Mandatory Refer to Proximity Verifier relevant specification Digital Credentials Query Language (DCQL) Mandatory OpenID4VP v1.0 chapter 6 specifies a JSON-encoded query language that allows the Verifier to request Presentations that match the query. OpenID4VP introduced DCQL in Draft 22. Therefore, DCQL is not supported in Draft 18. Authorization Response for Remote Presentation Flow Support encrypted Authorization Response Mandatory Refer to Remote Verifier relevant specification End-User authentication using SIOP v2 Excluded / Not Supported Refer to Remote Verifier relevant specification Policy-based Checks Revocation (of mDL) Mandatory ARF in Annex 2 VCR_19 states that \u201cA Wallet Unit SHOULD regularly check the revocation status of its PIDs, attestations, and WUAs, and notify the User if a PID, attestation, or WUA (i.e., the Wallet Unit itself), is revoked.\u201d Digital Credentials API for Remote Presentation Flow Device Request Optional Refer to Remote Verifier relevant specification  DC API is optional according to ARF section 4.4.3.1 Device Response Optional Refer to Remote Verifier relevant specification   Refer above for optionality HPKE single shot encryption /decryption Optional Refer to Remote Verifier relevant specification Refer above for optionality Session Transcript Optional Refer to Remote Verifier relevant specification  Refer above for optionality SerializedOrigin in Session Transcript Optional Refer above for optionality  Annex C.5 in ISO/IEC 18013-57 states that the mdoc (wallet) shall use the origin received from the user agent to determine the SerializedOrigin value. If the mdoc (wallet) does not receive the origin from the user agent, it shall abort the transaction <p><sup>(1) Support for at least one of these methods is mandatory</sup> </p> <p><sup>(2) Support for one of the handover methods or both</sup> </p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Issuer/","title":"Index","text":"<p>Home</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Issuer/#index-of-use-casesmobile-driving-licensemdl-guidesmdl-issuer","title":"Index of Use Cases/Mobile Driving License/mDL Guides/mDL Issuer","text":"<ul> <li>Getting Started</li> <li>mDL Issuance Workflow</li> <li>mDL Issuer Specs</li> <li>mDL Revocation Specs</li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Issuer/Getting%20Started/","title":"Getting Started","text":"<p>Home / Use Cases / Mobile Driving License / mDL Guides / mDL Issuer</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Issuer/Getting%20Started/#mdl-issuer-getting-started","title":"mDL Issuer Getting Started","text":"<p>This guide provides the technical framework, requirements and detailed instructions necessary for implementing national Mobile Driving Licence (mDL) issuance solutions within the European Digital Identity (EUDI) Wallet ecosystem. </p> <p>The foundation for this implementation is the Architecture and Reference Framework (ARF), which is intended to create uniform conditions for the implementation of the eIDAS 2 Regulation. The provided reference implementation acts as the Attestation Issuer (or mDL Issuer), supporting all compliant attestation issuance flows.</p> <p>This guide details the steps required to configure and operate an mDL Issuer (Attestation Provider) using the reference implementation to ensure interoperability, security, and privacy across the European Union.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Issuer/Getting%20Started/#who-is-this-guide-for","title":"Who is this guide for","text":"<p>This guide is primarily targeted at technical professionals responsible for designing and building national mDL issuance solutions. This includes developers, solution architects, and engineers from Member State organizations or mandated bodies undertaking the role of a PuB-EAA Provider (Electronic attestation of attributes issued by or on behalf of a public sector body responsible for an authentic source) or an Attestation Provider, since the mDL may be issued in this capacity.</p> <p>The target audience could also expand to other stakeholders who require a deep technical understanding of the mDL solution within the EUDI Wallet ecosystem. Specifically, anyone wishing to understand how the requirements for mDL issuance align with real-world mDL use cases will find this information relevant.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Issuer/Getting%20Started/#how-to-use-this-guide","title":"How to use this guide","text":"<p>This guide is structured to mirror the implementers' hub sections providing similar navigation. The main body of this guide focuses on the lifecycle and technical implementation details relevant to the Mobile Driving Licence (mDL) Issuance, by including:</p> <ul> <li>the foundational technical and organizational steps required before beginning implementation</li> <li>the detail implementation guide on how to issue an mDL to a Wallet Unit</li> <li>the mechanisms and how to revoke an mDL</li> <li>the process of registering and notifying your entity as an mDL Issuer</li> <li>where to get the reference implementation libraries and SDKs </li> <li>tools and procedures necessary for conformance testing and validation of the implemented mDL Issuer solution</li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Issuer/Getting%20Started/#links-to-essential-resources","title":"Links to essential resources","text":"<p>To ensure seamless operation and mutual recognition across the Union, all compliant mDL issuance solutions implemented using this guide SHALL support the mDL Issuance and mDL Revocation core technical specifications.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Issuer/mDL%20Issuance%20Workflow/","title":"mDL Issuance Workflow","text":"<p>Home / Use Cases / Mobile Driving License / mDL Guides / mDL Issuer</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Issuer/mDL%20Issuance%20Workflow/#technical-deep-dive-mdl-issuance-workflow","title":"Technical Deep Dive - mDL Issuance Workflow","text":""},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Issuer/mDL%20Issuance%20Workflow/#development-pre-requisites","title":"Development pre-requisites","text":"<p>\u03a4his section outlines essential integration dependencies and pre-requisites procedures for a national authority or organization (acting as the mDL Issuer) to successfully launch its mDL issuance solution using the EUDI Wallet Reference Implementation.</p> <p>For the technical team to successfully deploy the mDL Issuer, integration with the following external national infrastructure components is required: </p> <p>- Authentic Source Integration for Claims Acquisition</p> <p>The mDL Issuing Authority is required to issue mDLs containing accurate claims about the subject. The ability to verify attributes typically relies on establishing an interface with the relevant Authentic Sources (public or private repositories containing person mDL attributes).</p> <p>Your implementation must ensure the mDL Issuer component is configured to retrieve authenticated data needed for the mDL claims from your designated Authentic Source. </p> <p>- OAuth 2.0 Authorization Server Setup (for OpenID4VCI)</p> <p>The mDL Issuer supports authenticating the end-user via an OAuth2 server. The OAuth2 server handles the initial authentication and consent flows, notably supporting the Authorization Code Flow.</p> <p>You must integrate your existing national OAuth2 server (or deploy a compliant one) to handle user identification and access controls before the issuance process begins. </p> <p>- Access Certificate provision</p> <p>To ensure the Wallet Unit can trust the mDL Issuer, the Issuer must obtain and manage an Access Certificate from a designated Access Certificate Authority (CA). This certificate serves as proof of the Issuer's authenticity and validity, which is presented to the Wallet Unit during the mDL issuance process. </p> <p>You must establish the procedures for obtaining and integrating this certificate into your operational environment.</p> <p>- Becoming a Trust mDL Issuer</p> <p>For successful cross-border operation, your national mDL Issuance Authority must be recognized as a trusted entity within the EUDI ecosystem. This status is achieved by registering with a national Registrar (Trusted List Provider). Upon successful registration, the Issuing Authority's trust anchors (public keys) are included in the relevant Trusted List/VICAL(Verified Issuer Certificate Authority List). Wallet Units across the EU use these published trust anchors to validate the authenticity of the mDLs you issue</p> <p>You shall complete the registration and notification process to establish the Issuer's identity and trust anchors within the EUDI framework. This is described in Becoming trust issuer section.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Issuer/mDL%20Issuance%20Workflow/#issuance-of-an-mdl","title":"Issuance of an mDL","text":"<p>The issuance process reuses the underlying protocols supported by the EUDI Wallet Reference Implementation Issuer, notably OpenID for Verifiable Credential Issuance (OpenID4VCI).</p> <p>- Preparation and Configuration </p> <p>Follow the documented steps to configure your Issuer and define the mDL schema and data models. The Issuer supports the necessary format for mDL: mso_mdoc (ISO/IEC 18013-5 compliant).</p> <p>- User Authorization Flow </p> <p>Implement the required OpenID4VCI flow, typically the Authorization Code flow (recommended for high assurance, incorporating PKCE/PAR) or the Pre-authorized Code flow. This flow verifies the user's identity via the integrated OAuth2 Server.</p> <p>- Credential Data Integration </p> <p>Ensure the system retrieves required claims about the user (e.g., data points like name, date of birth, driving privileges) from the Authentic Source.</p> <p>- Proof of Possession (Binding) </p> <p>The issuance process incorporates proof of possession, cryptographically binding the issued mDL to the user's Wallet Secure Cryptographic Device (WSCD) key. The Issuer verifies that the key pair is genuinely protected by the WSCD.</p> <p>- Delivery </p> <p>The authenticated and cryptographically bound mDL is delivered as a Verifiable Credential via the Credential Endpoint. The Issuer handles specialized features like batch issuance or deferred issuance if required.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Issuer/mDL%20Issuance%20Workflow/#revocation-an-mdl","title":"Revocation an mDL","text":"<p>Revocation is an essential component of the trust model. The mDL Issuing Authority is the sole party responsible for executing the revocation of an mDL.</p> <p>- Revocation Mechanism Implementation </p> <p>Since mDLs are attestations valid for longer than 24 hours, the Issuer SHALL use either a  Status List or a Revocation Identifier List mechanism. You can use the provided Revocation Lists Manager component to manage (create and update) the revocation status list or revocation identifier list.</p> <p>If you decide to implement the Status List mechanism then when an mDL is issued, the mDL Issuer component must register it in the status list using this component\u2019s API. It shall register its unique identifier (e.g., a serial number, a unique hash, or an index) and position in the list and then initialize it (e.g. set to \u201cVALID\u201d or \u201c0\u201d). </p> <p>If you decide to implement either mechanism then when an mDL is revoked the mDL Issuer shall invoke this component\u2019s API to either add the unique identifier in the identifier list or set the status to \u201cINVALID\u201d or \u201c1\u201d in the status list.</p> <p>- Embedding Revocation Information </p> <p>Ensure that the issued mDL includes revocation information (a URL pointing to the status/revocation list and an identifier/index for that specific attestation).</p> <p>- The mDL Issuer SHALL revoke an mDL when</p> <ul> <li> The security of the mDL or the mDL Issuing Authority infrastructure has been compromised.</li> <li> The value of one or more attributes in the mDL changes (triggering re-issuance and revocation of the old mDL).</li> <li> Upon explicit request from the mDL subject (recommended action).</li> </ul> <p>- Revocation Publication</p> <p>You can use the provided Revocation Lists Publisher to publish and make available the chosen revocation mechanism which is either the Status List or the Revocation Identifier List so that Relying Parties and Wallets can verify the mDL's validity prior to presentation.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Issuer/mDL%20Issuance%20Workflow/#becoming-trust-issuer","title":"Becoming trust issuer","text":"<p>The process of establishing trust is formalized through registration and transparency in the ecosystem.</p> <p>- Registration </p> <p>The nationally appointed mDL Provider shall be added to the national Registrar (Trusted List Provider). This step may include specifying the types of attestations (e.g., mDL) that the provider intends to issue.</p> <p>- Access Certificate Acquisition </p> <p>Obtain the necessary Access Certificate from the designated Access Certificate Authority (CA). This certificate is used to authenticate the mDL Issuer's actions to the Wallet.</p> <p>- Notification and Publication </p> <p>The Member State is responsible for notifying the mDL Provider and its trust anchors to the European Commission. These trust anchors are subsequently included in a Trusted List or/and VICAL.</p> <p>- Relying Party Verification </p> <p>The inclusion of your trust anchors in the Trusted List/VICAL enables Relying Parties to perform signature validation on the mDLs you issue, confirming their authenticity. Wallet Units also rely on the Access Certificate Authority Trusted List to authenticate you during the issuance request.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Issuer/mDL%20Issuance%20Workflow/#libraries-sdks","title":"Libraries &amp; SDKs","text":"<p>The EUDI Wallet Reference Implementation provides key reusable components to accelerate deployment. Please refer to the relevant section for detailed instructions on how to build and test the mDL Issuer and Revocation List Manager and Publisher.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Issuer/mDL%20Issuer%20Specs/","title":"mDL Issuer Specs","text":"<p>Home / Use Cases / Mobile Driving License / mDL Guides / mDL Issuer</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Issuer/mDL%20Issuer%20Specs/#mdl-issuer-specifications","title":"mDL Issuer Specifications","text":"<p>The following are considered necessary capabilities of the reference implementation of the remote issuer web application for the mDL Use Case:</p> Specification Optionality Description and Reference mDL Verifiable Credentials ISO/IEC 18013-5 (CBOR) Mandatory [ARF], High Level Requirement:\u00a0 mDL_01  [ARF] \u201cAnnex 3.02 - mDL Rulebook\u201d [4<sup>th</sup> Driving License Directive] Annex I, Part C mDL Data Model Mandatory As above mDL Issuance Profile Profile of OpenID4VCI to issue mDL Mandatory ARF in High Level Requirements ISSU_01 specify HAIP as the profile for the OpenID4VCI protocol. HAIP profiles issuance only for SD-JWT VC but not for ISO mdoc. Therefore, an mDL profile for OpenID4VCI protocol needs to be specified to set the requirements for the existing specifications to enable interoperability among Issuers and Wallets of mDLs where a high level of security and data protection is required. Attestation Issuance Interface (AII) Credential Issuance API according to OpenID4VCI v1.0 specification Mandatory [ARF] \u201c4.3.3 Wallet Unit interfaces and protocols\u201d mentions that the \u201cAttestation Issuance Interface (AII) complies with the [OpenID4VCI] standard\u201d. The version 1.0 of OpenID4VCI shall be implemented. Initiation Issuer-initiated Optional According to OpenID4VCI v1.0, section 3.1 the Credential Offer endpoint of the mDL Issuer is optional. This endpoint supports the issuer-initiated flow and therefore this flow is optional. Wallet-initiated Mandatory Since the issuer-initiated flow (above) is optional according to the specification, consequently the wallet-initiated flow is mandatory. The wallet-initiated flow uses directly the Credential endpoint of the mDL Issuer. Authorization OAuth Authorization Server according to OpenID4VCI v1.0 Mandatory Each organization acting as mDL Issuer has its own mechanism to authenticate the End User. Each organization\u2019 Credential Issuer has to be protected by an OAuth Authorization Server according to OpenID4VCI v1.0 section 3.2.  ARF section 6.6.2.1 point 2 specifies that the mDL Issuing Authority authenticates the user, meaning is sure about the identity of the User. The method by which the user is identified and authenticated is specific to each mDL Issuing Authority.  Additionally. ISO/IEC 18013-5 in section E.2.4.2 specifies that \u201cIssuing authorities are responsible for the accurate provisioning of mDL to the proper mDL holder to achieve their target Identity Assurance Level as defined within their regional trust frameworks\u201d Pre-Authorized Code Flow Optional According to OpenID4VCI v1.0, section 3.5, point (2) and section 4.1.1, the pre-authorized code is delivered to the End User by the Credential Offer endpoint which is optional. Consequently, this flow is also optional.  Please note that OpenID4VCI v1.0 in section 12.4 lists several vulnerabilities for this flow. Authorization Code Flow Mandatory According to OpenID4VCI v1.0, section 3.4, the authorization code flows have two variations: wallet-initiated and issuer-initiated. Also in point 2, the wallet has to determine the Authorization Endpoint to send an Authorization Request (point 3) in order to get authenticated and receive the Access Token. In issuer-initiated flow (point 1b) the wallet gets the Authorization Endpoint from the Credential Offer Endpoint which is optional. Therefore, the issuer-initiated authorization flow is optional.  In wallet-initiated flow (point 1a) the Credentials to be issued are pre-configured and so the Authorization Endpoint. In this case the wallet does not use the optional Credential Offer to determine the Authorization Endpoint since it is already pre-configured. After receiving the Access Code, the wallet uses the mandatory Credential Endpoint. Therefore, the wallet-initiated authorization flow is mandatory since it does not use the optional endpoints. Driving Licence Authentic Source Integration Integration with the Driving Licence Authentic Source Mandatory The mDL Issuer is responsible to issue mDL as verifiable credentials. The mDL claims shall be retrieved from the Driving Licence Authentic Source (ARF 3.10) Number of VCs per issuance request One verifiable credential per issuance request Mandatory The issuance of one credential per issuance request is a fundamental capability of the OpenID4VCI protocol, serving as a baseline or default option. OpenID4VCI section 8 specifies that \u201cThe Credential Endpoint issues one or more Credentials of the same Credential Configuration and Credential Dataset\u201d Multiple same verifiable credential instances per issuance request (Batch Issuance) Mandatory OpenID4VCI in section 11.2.4 defines the \u201cbatch_credential_issuance\u201d parameter as optional for the issuer. ARF in High Level Requirements ISSU_04 and ISSU_64 specify the batch issuance as a mandatory capability of the attestation providers and wallets. Time of issuance Immediate Issuance Optional (1) OpenID4VCI in section 8 (and 3.1) defines the Credential Endpoint as mandatory. This endpoint could respond with the requested credential either immediately or in a deferred manner. Therefore, the immediate issuance could be considered as optional. Deferred Issuance Optional (1) OpenID4VCI in section 9 (and 3.1) defines the Deferred Credential endpoint as optional Additional issuance flows Dynamic Issuance (synchronous\u00a0or just-in-time) Optional Refer to ARF section 6.6.5.2.4 and Discussion topic \u201cB - Re-issuance and batch issuance of PIDs and Attestations\u201d section 3.4  The dynamic issuance is a capability of the EUDI Wallet ecosystem and OpenID4VCI, particularly for addressing data protection concerns and ensuring fresh credentials. It is not explicitly specified as a mandatory requirement for all issuance processes. Re-issuance Mandatory ARF in High Level Requirements ISSU_63 specify the re-issuance as a mandatory capability of the attestation providers and wallet Topology for issuer-initiated flows Same device Optional According to OpenID4VCI section 3.3.3, both same and cross device flows refer on how the End User receives the Credential Offer from the Credential Issuer. The Credential Offer endpoint is optional and consequently both these flows are considered optional. Cross device Optional As above mDL presentation policy Provide mDL presentation policy Mandatory ARF in High Level Requirements ISSU_37 and ISSU_38 specifies that the mDL Provider, SHALL have a policy describing which of the methods A, B, C, or D (or any other methods as well), it will use to limit the number of times a Wallet Unit may present a single mDL. mDL Revocation Include Revocation status list bit position within the mDL structure Optional (1) The specification for mDL revocation via a dedicated status list is expected to be introduced in a future version of ISO/IEC 18013-5. Consequently, mDL Issuers for revocable mDLs shall include the necessary status list bit position within the mDL structure, in anticipation of this future standard update. ARF section 6.6.3.7 specifies that \u201cAttestation Provider includes revocation information in the PID or attestation, if it is valid for longer than 24 hours.\u201d Include Revocation identifier reference within the mDL structure Optional (1) The specification for mDL revocation via an identifierlist is expected to be introduced in a future version of ISO/IEC 18013-5. Consequently, mDL Issuers for revocable mDLs shall include the necessary identifier reference \u00a0\u00a0\u00a0\u00a0within the mDL structure, in anticipation of this future standard update.   ARF section 6.6.3.7 specifies that \u201cAttestation Provider includes revocation information in the PID or attestation, if it is valid for longer than 24 hours.\u201d Trust Relationships The issuer shall authenticate and validate the Wallet Unit during the issuance flow Mandatory ARF section 6.6.2.1 point 3 and section 6.6.2.3 The issuer shall verify that the Wallet Provider did not revoke the Wallet Unit. Mandatory ARF section 6.6.2.1 point 4 and section 6.6.2.4 The issuer shall download the Wallet Provider Trusted List(s) it needs from the relevant Trusted List Provider(s) Mandatory ARF section 6.6.2.3.1 specifies that \u201cAttestation Providers: they must accept all Wallet Solutions and hence must possess all Wallet Provider Trusted Lists\u201d The issuer shall verify the signature over the WUA, using the Wallet Provider trust anchor obtained from the Trusted List. Mandatory ARF section 6.6.2.3.1 The issuer shall verify that the Wallet Unit possesses the private key belonging to the public key in the WUA Mandatory ARF section 6.6.2.3.1 The issuer may be able to obtain a proof that the WSCD described in the WUA protects both the WUA private key and the private key of the new PID or attestation Optional ARF section 6.6.2.3.3 The issuer shall implement device binding Mandatory ARF section 6.6.3.8 specifies that \u201cAttestation Provider implements device binding by including a cryptographic public key in the PID or attestation and signing it\u201d mDL Reader Interface server data retrieval method Excluded / not supported The interface of the mDL reader and the issuing authority infrastructure can be used only for the server data retrieval method. The server data retrieval method allows the issuing authority to have knowledge when the mDL holder presents the mDL to a specific mDL verifier. This is prohibited explicitly by articles 5a.16 and 5a.5(b) of [eIDAS v2] and \u00a0ARF] Annex 2 High level requirement \u201cProxId_02\u201d. Therefore, this method is excluded (not supported) from the mDL target solution. MS notifications A Member State, other than the one issuing a driving license, imposing a driving disqualification shall immediately notify the Member State which issued the driving license Excluded / not supported [4<sup>th</sup> Driving License Directive] in the last sentence of Annex I, Part C mandates the notification obligations of Member States. This requirement is expected to be fulfilled in an out-of-band method and therefore is excluded from the mDL Use Case specifications. <p><sup>(1)</sup> Support for one of the methods or both.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Issuer/mDL%20Revocation%20Specs/","title":"mDL Revocation Specs","text":"<p>Home / Use Cases / Mobile Driving License / mDL Guides / mDL Issuer</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Issuer/mDL%20Revocation%20Specs/#revocation-lists-manager-and-publisher-specifications","title":"Revocation Lists Manager and Publisher Specifications","text":"<p>The following are considered necessary capabilities of the Revocation Lists components for the mDL Use Case:</p> Specification Optionality Description and Reference Revocation List Management Set up (create) a status list or identifier list Mandatory The system sets up a new status list or identifier list to support the mDLs revocation functionality. Register Request handling (Associate an mDL with a pointer in the status list) Mandatory When an mDL is issued, the system must receive and process requests to register its unique identifier (e.g., a serial number, a unique hash) with a status list pointer. Upon issuance, the mDL's status is initialized to \"valid\" (or equivalent, e.g., a \"0\" bit in a bitstring) to the corresponding position in the status list.  This method applies only for the status list. Revocation Request handling Mandatory The system must receive and process requests via API calls to revoke an mDL by the Authentic Source or related component. Upon revocation, the system  updates the status of the specific mDL in its internal database (e.g., changing a bit from 0 to 1, or marking an entry as revoked).  Or adds the identifier in the identifier list Manual mDL Revocation Optional The system shall allow administrative controls to manually change an mDL\u2019s status in the status list or add the identifier in the identifier list. The component offers an endpoint for the mDL revocation that needs to be modified accordingly to support this feature. mDL Revocation by mDL subjects Optional The system shall allow the mDL holder to revoke his/her own mDL by presenting the mDL to be revoked as authentication mechanism. Search mDL Excluded / not supported The system does not store mDL claims (data elements) and therefore cannot support the search and view mDL status operations. This is responsibility of the Authentic Source. View mDL Status Excluded / not supported As above Audit Logging Mandatory The system shall keep logging of all status changes, API requester and when initiated them. Revocation List Generation/Publication Generate revocation list Mandatory Periodically or upon changes, the system aggregates the status of all issued mDLs into the status list format (e.g., a bitstring) or identifier list. Encode MSO revocation list as status list Mandatory According to ISO 18013-5 2<sup>nd</sup> version section 9.1.2.6: \u201cTwo mechanisms can be used to encode the revocation information: as an identifier list or as a status list\u201d Encode MSO revocation list as identifier list Mandatory As above COSE_Sign1 structure Mandatory According to ISO 18013-5 2<sup>nd</sup> version section 9.1.2.6 \u201cThe MSO revocation list is a COSE_Sign1 structure that indicates whether a particular MSO is revoked or not.\u201d Cryptographic Signing Mandatory The generated revocation list must be digitally signed by the mDL Issuing Authority to ensure its authenticity and integrity for Verifiers. Revocation List Publication Mandatory The signed revocation list is published to a publicly accessible endpoint at the URL referenced within the issued mDLs Version/History Management Mandatory The system manages different versions of the revocation list, ensuring that Verifiers can access the correct, up-to-date list. The component keeps a history of changes. Revocation List monitoring Optional Monitoring to ensure revocation lists are being published successfully and are accessible. Error Reporting Optional Alerts for failures in updates, list generation, or publication of the revocation list."},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Verifier/","title":"Index","text":"<p>Home</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Verifier/#index-of-use-casesmobile-driving-licensemdl-guidesmdl-verifier","title":"Index of Use Cases/Mobile Driving License/mDL Guides/mDL Verifier","text":"<ul> <li>Getting Started</li> <li>mDL Reader Specs</li> <li>mDL Remote Verifier Specs</li> <li>mDL Verifier Workflow</li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Verifier/Getting%20Started/","title":"Getting Started","text":"<p>Home / Use Cases / Mobile Driving License / mDL Guides / mDL Verifier</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Verifier/Getting%20Started/#mdl-verifier-getting-started","title":"mDL Verifier getting started","text":"<p>This guide provides the technical framework, requirements and detailed instructions necessary for implementing Mobile Driving Licence (mDL) verification solutions within the European Digital Identity (EUDI) Wallet ecosystem.</p> <p>The foundation for this implementation is the Architecture and Reference Framework (ARF), which is intended to create uniform conditions for the implementation of the eIDAS 2 Regulation. The provided reference implementation supports both proximity and remote mDL verification scenarios, acting as Relying Party Instances that can verify mDL attestations presented by EUDI Wallet Units.</p> <p>This guide details the steps required to configure and operate an mDL Verifier (Relying Party) using the reference implementation to ensure interoperability, security, and privacy across the European Union.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Verifier/Getting%20Started/#who-is-this-guide-for","title":"Who is this guide for","text":"<p>This guide is primarily targeted at technical professionals responsible for designing and building mDL verification solutions. This includes developers, solution architects, and engineers from both public and private sector organizations implementing Relying Party services that need to verify mobile Driving Licences.</p> <p>The target audience could also expand to other stakeholders who require a deep technical understanding of the mDL verification solution within the EUDI Wallet ecosystem. Specifically, anyone wishing to understand how the requirements for mDL verification align with real-world mDL use cases will find this information relevant.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Verifier/Getting%20Started/#how-to-use-this-guide","title":"How to use this guide","text":"<p>This guide is structured to mirror the implementers' hub sections providing similar navigation. The main body of this guide focuses on the lifecycle and technical implementation details relevant to Mobile Driving Licence (mDL) verification, by including:</p> <ul> <li>the foundational technical and organizational steps required before beginning implementation</li> <li>the detailed implementation guide on how to verify an mDL presented by a Wallet Unit</li> <li>proximity and remote verification flow implementations</li> <li>where to get the reference implementation libraries and SDKs</li> <li>tools and procedures necessary for conformance testing and validation of the implemented mDL Verifier solution</li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Verifier/Getting%20Started/#links-to-essential-resources","title":"Links to essential resources","text":"<p>To ensure seamless operation and mutual recognition across the Union, all compliant mDL verification solutions implemented using this guide SHALL support the mDL Reader and mDL Remote Verifier  core technical specifications.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Verifier/mDL%20Reader%20Specs/","title":"mDL Reader Specs","text":"<p>Home / Use Cases / Mobile Driving License / mDL Guides / mDL Verifier</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Verifier/mDL%20Reader%20Specs/#mdl-reader-specifications","title":"mDL Reader Specifications","text":"<p>The specifications of the mDL reader are summarized in the table below:</p> Specification Optionality Description and Reference mDL Verifiable Credentials ISO/IEC 18013-5 (CBOR) Mandatory - [ARF], High Level Requirement:\u00a0 mDL_01  - [ARF] \u201cAnnex 3.02 - mDL Rulebook\u201d  -[4<sup>th</sup> Driving License Directive] Annex I, Part C mDL Data Model Mandatory As above Presentation Interface (PI) Presentation Request (of verifiable credentials according to ISO/IEC 18013-5 standard) Mandatory CIR 2024/2982 Topology Cross device Mandatory ARF section 4.4.1 defines that\u00a0\u00a0 proximity flow is when the User Device is physically near the Relying Part Instance. This implies that the flow occurs in different devices therefore the mDL reader can interact with the EUDI Wallet only in cross device scenario for the proximity flow (supervised or unsupervised).                                                                                                           The mDL Reader implements only ARF section \u201c4.4.2 Proximity presentation flows\u201d Same device N/A The same device flow is not applicable for the mDL Reader on the proximity flows as justified above. Presentation Flows Remote N/A The remote flow is not applicable for the mDL Reader since only the proximity flow is supported. Proximity Mandatory The mDL Reader implements only ARF section \u201c4.4.2 Proximity presentation flows\u201d Initialization mDL reader using NFC Optional The EUDI Wallet can be activated either by the mDL Holder (user) or it can be triggered by the mDL Reader using NFC according to ISO/IEC 18013-5 section 6.3.2.2. The standard does not specify if this is mandatory for the mDL Reader. Therefore, it is considered optional. Device engagement technologies NFC Mandatory According to Table 1 in ISO/IEC 18013-5 QR Code Mandatory According to Table 1 in ISO/IEC 18013-5 NFC Device engagement technology support Static Handover Mandatory The mDL reader shall support both handover methods according to the last sentence of section 6.3.2.3 of ISO/IEC 18013-5 Negotiated Handover Mandatory As above Data Retrieval Methods Offline (device) retrieval Mandatory According to Table 2 in ISO/IEC 18013-5 Online (server) retrieval Excluded / Not Supported The server data retrieval method allows the issuing authority to have knowledge when the mDL holder presents the mDL to a specific mDL verifier. This is prohibited explicitly by articles 5a.16 and 5a.5(b) of [eIDAS] and [ARF] Annex 2 High level requirement \u201cProxId_02\u201d. Therefore, this method is excluded (not supported) from the mDL target solution. Message encoding mdoc Request/Response messages encoded with CBOR Mandatory According to section 6.3.2.4 of in ISO/IEC 18013-5 \u201cWhen using device retrieval, the mDL and mDL reader communicate using mdoc request and mdoc response messages encoded with CBOR\u201d Data Transmission/ Device Retrieval NFC Mandatory According to Table 2 in ISO/IEC 18013-5 BLE Mandatory According to Table 2 in ISO/IEC 18013-5 Wi-Fi Aware Recommended According to Table 2 in ISO/IEC 18013-5 Data Device Retrieval using BLE mdoc central client mode Mandatory According to section 6.3.2.5 of\u00a0 ISO/IEC 18013-5 \u201cFor device retrieval using BLE, the mDL reader shall support the mdoc central client mode and mdoc peripheral server mode\u201d mdoc peripheral server mode Mandatory As above BLE L2CAP Optional According to section 6.3.2.5 of ISO/IEC 18013-5 that states \u201c\u2026The mDL and mDL reader may support the BLE 2CAP transmission profile...\u201d Data Server Retrieval WebAPI Excluded / Not Supported As per \u201cOnline (server) retrieval\u201d above OIDC Excluded / Not Supported As per \u201cOnline (server) retrieval\u201d above Security Mechanism and Trust Relationships for Device Retrieval Session Encryption Mandatory (assumed) Section 9.1.1 in ISO/IEC 18013-5 specifies that the session encryption applies to the device retrieval method. It does not specify explicitly it as mandatory. It is assumed that it is mandatory.                                                                                                                                                                                                                                                                                             Table 2 in ISO/IEC 18013-7 applies to remote presentation to an mDL reader over the internet and therefore is not applicable to the proximity flow. Issuer data authentication Mandatory As above for section 9.1.2 in ISO/IEC 18013-5. Section 9.3.1 applies also specifying as a mandatory capability. The verifier shall verify that the mDL Issuer did not revoke the mDL (Revocation of mDL) Mandatory ARF section 6.6.3.1, point 6 (and 6.3.6.7) The specification for mDL revocation via a status list or reference list is expected to be introduced in a future version of ISO/IEC 18013-5. Consequently, mDL Verifiers shall be capable to verify the validity status of the mDL by retrieving the status list or identifier list. ARF section 6.6.3.7 specifies that \u201cAttestation Provider includes revocation information in the PID or attestation, if it is valid for longer than 24 hours.\u201d mdoc authentication (device binding) Mandatory (assumed) As above for section 9.1.3 in ISO/IEC 18013-5 mdoc Reader authentication Mandatory (assumed) As above for section 9.1.4 in ISO/IEC 18013-5 Security Mechanism for Server Retrieval TLS 1.2 or higher Excluded / Not Supported As per \u201cOnline (server) retrieval\u201d above. JSON Web Signature (JWS). Excluded / Not Supported As per \u201cOnline (server) retrieval\u201d above Disclosure options Selective Disclosure Mandatory The interface between the mDL and the mDL Reader shall support the selective release of mDL data to an mDL Reader as per ISO/IEC 18013-5 section 6.2 point (d)                                                                                                                                                                                                                                                                                                                                 Additionally, ARF in High Level Requirements OIA_07 specify the support of selective disclosure of attributes from PIDs and attestations Policy-based Checks Certificate Revocation list Mandatory Section 9.3.3 in ISO/IEC 18013-5 specifies that \u201cmdoc reader shall have access to certificate revocation information\u201d.  An mDL reader needs access to the issuing authority\u2019s certificate authority (IACA) root certificate to verify issuer data authentication.  It checks the status of the Document Signing certificate and the IACA certificate against the published CRLs.                                                                                                               It confirms that the issuer\u2019s IACA certificate is present, and that it is listed as an issuer of the doctype \u201corg.iso.18013.5.1.mDL\u201d. ETSI LOTL support Mandatory The Reference Implementation supports ETSI trusted lists because of other use cases, see e.g. ARF Annex 2 requirement PuBPNot_03: \u201cThe format of the PuB-EAA Provider Trusted List SHALL comply with ETSI TS 119 612 v2.1.1 or with a suitable profile similarly derived from ETSI TS 102 231\u201d IACA retrieval via VICAL Mandatory [4<sup>th</sup> Driving License Directive] in Art. 5.7 mandates that the Commission shall adopt implementing acts [among others] for recognition of those driving licences by third country authorities. Annex C in ISO/IEC 18013-5 specifies the VICAL mechanism. It does not explicitly specify this mechanism as mandatory and therefore it is considered optional. This mechanism applies to the third countries"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Verifier/mDL%20Remote%20Verifier%20Specs/","title":"mDL Remote Verifier Specs","text":"<p>Home / Use Cases / Mobile Driving License / mDL Guides / mDL Verifier</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Verifier/mDL%20Remote%20Verifier%20Specs/#mdl-remote-verifier-specifications","title":"mDL Remote Verifier Specifications","text":"<p>The following are considered necessary capabilities of the reference implementation of the remote verifier web application for the mDL Use Case:</p> Specification Optionality Description and Reference mDL Verifiable Credentials ISO/IEC 18013-5 (CBOR) Mandatory - [4<sup>th</sup> Driving License Directive] Annex I, Part C [ARF], High Level Requirement:\u00a0 mDL_01   - [ARF] \u201cAnnex 3.02 - mDL Rulebook\u201d mDL Data Model Mandatory As above Presentation Interface (PI) Remote Flow: Presentation Request (of verifiable credentials) according to ISO 18013 -7 Annex B (OpenID4VP specification) Mandatory [ARF] \u201c4.3.3 Wallet Unit interfaces and protocols\u201d mentions that \u201cFor remote presentation flows (\u2026) the Wallet Instance implements the OpenID for Verifiable Presentation protocol [OpenID4VP] in combination with the [W3C Digital Credentials API]\u201d. Presentation in combination with the Digital Credentials API using ISO 18013-7 Annex C Optional As above and ISO 18013-7 Annex C                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ARF in section 4.4.3.1 states that \u201cThe use of this API by Wallet Units and Relying Parties is optional\u201d Presentation in combination with the Digital Credentials API using OpenID4VP, HAIP Optional As aboveOpenID4VP version 1.0 will be supported instead of Draft 18 which is specified in ISO 18013-5 Annex B                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ARF in section 4.4.3.1 states that \u201cThe use of this API by Wallet Units and Relying Parties is optional\u201d Topology Cross device Mandatory ARF section 4.4.1 defines Remote Same-Device Flow and Remote Cross-Device Flow Same device Mandatory As above Presentation Flows Remote Mandatory ARF section 4.4.1 defines the remote flows for Same-Device and Cross-Device Flow Proximity N/A The proximity flow is implemented by the mDL Reader and it is not applicable in the remote flow. Initiation Verifier initiated flow Mandatory ARF section 4.4.1 defines the remote flows where in both remote scenarios, the Verifier sends a presentation request to the Wallet.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           OpenID4VP in section 3.1 and 3.1 specifies that for same and cross device flow the verifier initiates the flow by sending the Authorization Request to the wallet. Authorization Request Selective Disclosure Mandatory ARF in High Level Requirements OIA_07 specify the support of selective disclosure of attributes from PIDs and attestations Digital Credentials Query Language (DCQL) Mandatory OpenID4VP v1.0 chapter 6 specifies a JSON-encoded query language that allows the Verifier to request Presentations that match the query. OpenID4VP introduced DCQL in Draft 22. Therefore, DCQL is not supported in Draft 18. Authorization Response Support encrypted Authorization Response Mandatory OpenID4VP section 5.10 specifies that the Wallet could require the Verifier to encrypt the Request Object End-User authentication using SIOP v2 Excluded / Not Supported OpenID4VP Appendix C specifies the presentation of Credentials combined with the End-User authentication using [SIOPv2].                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      It has already been removed from HAIP (editor's copy, draft 4, not yet published) \u00a0via https://github.com/openid/oid4vc-haip/pull/186 Digital credentials API retrieval Device Request Optional DC API is optional according to ARF section 4.4.3.1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            According to Annex C.2 in ISO/IEC 18013-7, the Request is a javascript object which contains the CBOR encoded DeviceRequest and EncryptionInfo Device Response Optional Refer above for optionality According to Annex C.3 in ISO/IEC 18013-7, the Response is a javascript object which contains the CBOR encoded EncryptedResponse HPKE single shot encryption /decryption Optional Refer above for optionality According to Annex C.4 in ISO/IEC 18013-7, HPKE (Hybrid Public Key Encryption) single-shot API is defined in RFC 9180 Session Transcript Optional Refer above for optionality  According to Annex C.5 in ISO/IEC 18013-7, the session transcript shall be used for encryption, mdoc authentication and mdoc reader authentication and it is structured as a CBOR array Trust Relationships The verifier shall verify the signature of the mDL (Issuer data authentication) Mandatory ARF section 6.6.3.1 point 5 specifies that \u201cThe Relying Party Instance verifies the signature of the PID or attestation. This ensures that the Relying Party can trust that the PID or attestation it receives is issued by an authentic Provider and has not been changed\u201d The verifier shall verify that the mDL Issuer did not revoke the mDL (Revocation of mDL) Mandatory ARF section 6.6.3.1, point 6 (and 6.3.6.7) The specification for mDL revocation via a status list or reference list is expected to be introduced in a future version of ISO/IEC 18013-5. Consequently, mDL Verifiers shall be capable to verify the validity status of the mDL by retrieving the status list or identifier list, based on status info element of the mso.  ARF section 6.6.3.7 specifies that \u201cAttestation Provider includes revocation information in the PID or attestation, if it is valid for longer than 24 hours.\u201d The verifier shall verify mDL device binding (mdoc authentication) Mandatory ARF section 6.6.3.1 point 7 (and 6.3.6.8) and Annex 2 OIA_02 specifies that \u201cThe Relying Party verifies that the PID Provider or Attestation Provider issued this PID or attestation to the same Wallet Unit that presented it to the Relying Party\u201d Policy-based Checks Certificate Revocation list Mandatory Section 9.3.3 in ISO/IEC 18013-5 specifies that \u201cmdoc reader shall have access to certificate revocation information\u201d.  A remote mDL verifier needs access to the issuing authority\u2019s certificate authority (IACA) root certificate to verify issuer data authentication. It checks the status of the Document Signing certificate and the IACA certificate against the published CRLs. Confirm that the issuer\u2019s IACA certificate is present, and that it is listed as an issuer of the doctype \u201corg.iso.18013.5.1.mDL\u201d. ETSI LOTL support Mandatory The Reference Implementation supports ETSI trusted lists because of other use cases, see e.g. ARF Annex 2 requirement PuBPNot_03 \u201cThe format of the PuB-EAA Provider Trusted List SHALL comply with ETSI TS 119 612 v2.1.1 or with a suitable profile similarly derived from ETSI TS 102 231\u201d IACA retrieval via VICAL Mandatory [4<sup>th</sup> Driving License Directive] in Article 5.7 mandates that the Commission shall adopt implementing acts [among others] for recognition of those driving licences by third country authorities. Annex C in ISO/IEC 18013-5 specifies the VICAL mechanism. It does not explicitly specify this mechanism as mandatory and therefore it is considered optional. This mechanism applies to the third countries"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Verifier/mDL%20Verifier%20Workflow/","title":"mDL Verifier Workflow","text":"<p>Home / Use Cases / Mobile Driving License / mDL Guides / mDL Verifier</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Verifier/mDL%20Verifier%20Workflow/#technical-deep-dive-mdl-verifier-workflow","title":"Technical Deep Dive - mDL Verifier Workflow","text":""},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Verifier/mDL%20Verifier%20Workflow/#development-pre-requisites","title":"Development pre-requisites","text":"<p>The reference implementation's preconditions listed in the relevant section on the implementer's hub do apply to the mDL Verifier. Nevertheless, this section outlines essential integration dependencies and pre-requisites procedures for organisations (acting as mDL Verifiers/Relying Parties) to successfully launch their mDL verification solution using the EUDI Wallet Reference Implementation.</p> <p>For the technical team to successfully deploy the mDL Verifier, integration with the following external infrastructure components is required:</p> <p>Trust Anchor Configuration</p> <p>The mDL Verifier must be configured to access and validate trust anchors from relevant Trusted Lists to verify the authenticity of mDL attestations. This includes:</p> <ul> <li>Integration with ETSI Trusted Lists (via the List of Trusted Lists - LOTL), which contains the trust anchors for all recognised mDL Issuers</li> <li>VICAL (Verified Issuer Certificate Authority List) integration for third-country recognition (optional, but recommended)</li> <li>Certificate Revocation List (CRL) access for certificate status validation of the Issuing Authority's key</li> </ul> <p>Your implementation must ensure the mDL Verifier component can retrieve and validate these trust relationships during the verification process.</p> <p>Relying Party Registration and Access Certificate</p> <p>To interact with EUDI Wallet Units, your organisation must register as a Relying Party with the national Registrar. Successful registration ensures your organisation's status is reflected in the relevant national/EU Trust Lists. Your organisation then obtains an Access Certificate from the designated Access Certificate Authority. This certificate enables:</p> <ul> <li>Authentication to Wallet Units during presentation requests (the verifier proves its identity).</li> <li>Verification of your organisation's legitimacy by the Wallet Unit (the wallet checks the verifier's certificate chain against the national/EU Trust Lists).</li> </ul> <p>Revocation Status Checking Infrastructure</p> <p>Your mDL Verifier must be capable of checking the revocation status of presented mDLs by:</p> <ul> <li>Accessing Status Lists or Revocation Identifier Lists published by mDL Issuers</li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Verifier/mDL%20Verifier%20Workflow/#verification-of-mdl","title":"Verification of mDL","text":"<p>The verification process supports both proximity and remote presentation flows, implementing the protocols specified in ISO/IEC 18013-5 and OpenID4VP respectively.</p> <p>Remote Verification Architecture:</p> <p>(Remote) mDL Verifier Client:</p> <ul> <li>runs in the web browser and provides the user interface for initiating and managing the presentation flow. </li> <li>renders and submits the presentation requests to the wallet. </li> <li>interacts with the Digital Credential API of the web browser to manage the presentation requests and responses. </li> </ul> <p>(Remote) mDL Verifier Backend:</p> <ul> <li>is the server-side component of the mDL Verifier application that directly interacts with the Wallet via the frontend. </li> <li>sends presentation requests, compliant with the OpenID4VP specification, to the Wallet via the browser's Digital Credentials API </li> <li>receives the encrypted presentation response containing the requested attributes from the Wallet (forwarded by the browser) </li> <li>performs the trust relationships checks. </li> <li>integrates with the mDL Verifier Organisation backend systems to inform about the requested mDLs claims and verification checks. </li> </ul> <p>mDL Verifier organisation backend systems: </p> <ul> <li>It requests from the mDL Verifier Backend to initiate the mDL remote presentation flow, </li> <li>It receives from the mDL Verifier Backend the requested mDL attributes and validation and verification checks. </li> </ul> <p>Data Retrieval Methods:</p> <ul> <li>Non-Digital Credentials API: Uses ISO/IEC 18013-5 (CBOR) and OpenID4VP v1.0 specification</li> <li>Digital Credentials API based: Uses ISO/IEC 18013-5 (CBOR) with ISO/IEC 18013-7 Annex C, or OpenID4VP in combination with Digital Credentials API</li> </ul> <p>Proximity Verification Flow (mDL Reader): The mDL Reader is a mobile application that can request, receive, and verify the integrity and authenticity of an mDL for proximity presentation flows. It is controlled by an mDL Verifier, which is a person or organisation. This section focuses explicitly on the mDL Reader. The mDL reader implements the proximity presentation flow with the EUDI Wallet. ISO/IEC 18013-5 specifies the interfaces between:</p> <ul> <li>the mDL (wallet) and mDL reader</li> <li>the mDL reader and the issuing authority infrastructure.</li> </ul> <p>The interface of the mDL reader and the issuing authority infrastructure (online/server data retrieval) is excluded (not supported) from the mDL target solution since it allows the issuing authority to have knowledge when the mDL holder presents the mDL to a specific mDL verifier. This is prohibited explicitly by articles 5a.16 and 5a.5(b) of [eIDAS] and [ARF] Annex 2 High level requirement \u201cProxId_02\u201d that states explicitly \u201cWallet Solutions, PID Providers, Attestation Providers, Wallet Providers, and Relying Parties SHALL NOT support server retrieval as specified in ISO/IEC 18013-5 for requesting and presenting PID or attestation attributes\u201d. Therefore, this method is excluded (not supported) from the mDL target solution.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Guides/mDL%20Verifier/mDL%20Verifier%20Workflow/#libraries-sdks","title":"Libraries &amp; SDKs","text":"<p>The EUDI Wallet Reference Implementation provides key reusable components to accelerate deployment. Please refer to the relevant section for detailed instructions on how to build and test the mDL Verifier.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Overview/","title":"mDL Overview","text":"<p>Home / Use Cases / Mobile Driving License / mDL Overview</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Overview/#mobile-driving-license-solution-overview","title":"Mobile Driving License Solution Overview","text":""},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Overview/#the-mobile-driving-license-use-case","title":"The Mobile Driving License Use Case","text":"<p>The European Parliament and the Council reached a provisional agreement on European Commission\u2019s initiative to modernise EU driving licence rules [4<sup>th</sup> Driving License Directive]. The new Directive on driving licences contains several key elements, including the introduction of digital EU driving licences that can be accessed on mobile phones or other digital devices, and used throughout the entire EU. It will be issued into the EU Digital Identity Wallet. After a brief transitionary period, digital driving licences will be issued by default in all Member States. The Commission is supporting Member States to implement EU mobile driving licences, one of such support measures is to provide an implementation toolbox to facilitate implementation of mDL</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Overview/#the-legal-basis","title":"The Legal Basis","text":"<p>The legal framework for the mDL within the EUDI Wallet ecosystem is established by several key pieces of EU legislation.</p> <p> [Find more about the mDL legal basis](TBD)</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Overview/#standards-and-protocols","title":"Standards and Protocols","text":"<p>To ensure security and interoperability across the EU, the mDL solution relies on a set of common standards and protocols.</p> <p> [Learn more about the mDL standards and protocols](TBD)</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Overview/Legal%20Basis/","title":"Legal Basis","text":"<p>Home / Use Cases / Mobile Driving License / mDL Overview</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Overview/Legal%20Basis/#the-legal-basis","title":"The Legal Basis","text":"<p>The following legal documents serve as the exclusive source of requirements for the mDL Use Case target solution:</p> <ul> <li>[eIDAS]: This EU regulation establishes a legal framework for electronic identification and trust services used across the Union to enable secure digital interactions. It outlines the requirements for Member States to recognize electronic identification schemes from other countries and to provide European Digital Identity Wallets.The eIDAS relevant Implementing Acts  are also considered as source of requirements on this document.</li> <li>[4<sup>th</sup> Driving License Directive]: The Council and the European Parliament proposal for a directive on driving licences (Article 5 and Annex I \u201cPart C: Specifications for the mobile driving licence\u201d).</li> </ul> <p>The Directive [4<sup>th</sup> Driving License Directive] lays down common rules on several aspects of the driving licence and defines that \u2018mobile driving licence\u2019 means a driving licence in its digital format, issued in accordance with Article 5 of the Directive. Additionally, Article 5.1 states that \u201cMember States shall issue mobile driving licences based on the Union standard specifications laid down in Annex I, Part C\u201d. The main rules specified in Article 5 and Annex I, Part C of this Directive that influence the target solution of the mDL Use Case are the following (the statements in emphasis (bold) imply features of the target solution):</p> <ul> <li> <p>Article 5:</p> <ul> <li>5.2: Mobile driving licences shall be issued to the European Digital Identity Wallets as electronic attestations of attributes in accordance with Regulation (EU) No 910/2014 of the European Parliament and of the Council.</li> <li>5.4: Member States shall ensure that the personal data necessary for the verification of the driving rights of the holder of the mobile driving licence is not retained by the verifier, unless retention is authorised by Union or national law.</li> <li>5.5: Member States shall inform the Commission of a list of issuers of mobile driving licences which they shall keep up to date. The Commission shall make these lists available to the public through a secure channel and in an electronically signed or sealed form suitable for automated processing.</li> <li>5.7: By [date of entry into force + 12 months], the Commission shall adopt implementing acts laying down detailed provisions concerning the visual appearance, interoperability, data and record updating standards, security, and organisational measures for the processing and protection of personal data, testing and the technical and security standards for the exchange and the trusted lists of trusted issuers of mobile driving licences for verifying mobile driving licences, including verification features and the interface with national systems. It shall, to the extent possible, take into account the general framework and technical specifications necessary for recognition of those driving licences by third country authorities. Those implementing acts shall be adopted in accordance with the examination procedure referred to in Article 22(2).</li> </ul> </li> <li> <p>Annex I, Part C</p> <ul> <li>The mobile driving licences and other relevant systems shall comply with the ISO/IEC 18013-5 standard on mobile driving licences and Regulation (EU) 910/2014.</li> <li>The Member States shall allow the holder of the driving licence to retrieve a mobile driving licence to their European Digital Identity Wallet.</li> <li>The European Digital Identity Wallet containing the mobile driving licence shall allow automatically or upon request the updating or re-issuing of the mobile driving licence.</li> <li>The European Digital Identity Wallets shall allow the holder of the driving licence to display or transmit to a third party all or part of the data contained in the mobile driving licence.</li> <li>Competent authorities of the Member States shall be authorised to request from European Digital Identity Wallets the data contained in the mobile driving licences in order to be able to ascertain the driving rights of the holder of the driving licence (verification).</li> <li>The information transmitted directly from the electronic attestation of the mobile driving licence stored in the European Digital Identity Wallet shall allow competent authorities to determine the driving rights of the holder of the mobile driving licence (verification), including any restrictions applicable in the Union or in the territory of a Member State.</li> <li>Member States shall not consider a mobile driving licence valid when it has expired or when it has been revoked.</li> <li>Where a Member decides to revoke a mobile driving licence, it shall enter information about this decision into a revocation list managed by that Member State or make it accessible to other Member States for the purpose of verification in a different way, free of charge and in an operable manner.</li> <li>A Member State, other than the one issuing a driving licence, imposing a driving disqualification shall immediately notify the Member State which issued the driving licence.  </li> </ul> </li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Overview/Standards%20and%20Protocols/","title":"Standards and Protocols","text":"<p>Home / Use Cases / Mobile Driving License / mDL Overview</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Overview/Standards%20and%20Protocols/#standards-and-protocols","title":"Standards and Protocols","text":"<p>The [4<sup>th</sup> Driving License Directive] clarifies that the mDL Use Case target solution shall comply with the ISO/IEC 18013-5 standard on mobile driving licences and since mDL can only be issued to EUDI wallets provided in accordance with Regulation (EU) 910/2014, some of the requirements applicable to EUDI wallets are also applicable to mDL providers. The latter requirements are further detailed by the Regulation (EU) 910/2014, including its implementing acts, in some cases, further detailed by the technical Architecture and Reference Framework (ARF).</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Overview/Standards%20and%20Protocols/#standards-and-specifications-references","title":"Standards and Specifications references","text":"<p>The mDL Use Case target solution is based on the following standards and specifications:</p> <ul> <li>[ISO/IEC 18013-5:2021(E)] is the international standard focused on implementing a Mobile Driving Licence (mDL) application on mobile devices. The provisional second version of this standard is referenced regarding the mDL revocation capabilities.</li> <li>ISO/IEC 18013-7 augments the capabilities of the mobile driving licence (mDL) standardized in ISO/IEC 18013-5 with the presentation of a mobile driving licence to a reader over the internet.</li> <li>OpenID for Verifiable Credential Issuance (OID4VCI): is a standardized protocol defining an API for issuing Verifiable Credentials. The protocol is built on top of the OAuth 2.0 framework, where the Wallet acts as an OAuth 2.0 Client to obtain authorization to receive credentials from a Credential Issuer, which acts as a Resource Server.</li> <li>OpenID for Verifiable Presentations (OpenID4VP): is the mandatory protocol for presenting attributes from attestations to a Relying Party (verifier) in remote (online) scenarios. It defines the message structures and transaction flows for a Wallet to respond to a presentation request from a Verifier over the internet.</li> <li>Architecture and Reference Framework (ARF): An informal document that describes the architecture of the EUDI Wallet ecosystem and all of its components, as well as how these components will interact to ensure the security of the ecosystem and data protection of its Users. It also specifies the high-level requirements established in Annex 2 related to the EUDI Wallet ecosystem. While ARF is not a legal document, the Commission uses the ARF specifications for its reference implementation.</li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Overview/Standards%20and%20Protocols/#main-design-options","title":"Main Design Options","text":"<p>The main design options of the mDL target solution backed by the Legal and Compliance Framework are summarised as follows:</p> <ul> <li>Wallet Reference Implementation accepts attestations only via the Attestation Issuance Interface (AII), which complies with the [OpenID4VCI] standard ([ARF] \u201c4.3.3 Wallet Unit interfaces and protocols\u201d). The latest OpenID4VCI is v1.0.</li> <li>mDL can only be issued to EUDI Wallet ([4<sup>th</sup> Driving License Directive] Article 5.2 and Annex I, Part C (2)).</li> <li>mDL shall comply with the ISO/IEC 18013-5 standard ([4<sup>th</sup> Driving License Directive] Annex I, Part C (2), [ARF] ANNEX 3.02 - mDL Rulebook ch2.1).</li> <li>mDL can only be presented using the Presentation Interface (PI), which accommodates both remote and proximity interactions ([ARF] \u201c4.3.3 Wallet Unit interfaces and protocols\u201d).</li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Overview/Standards%20and%20Protocols/#remote-presentation-flows","title":"Remote Presentation Flows","text":"<p>For remote presentation flows for ISO/IEC 18013-5-compliant attestations the Wallet Instance and the Remote verifier web application implement the OpenID for Verifiable Presentation protocol [OpenID4VP] in combination with the [ISO/IEC 18013-7] profile ([ARF] \u201c5.6.2 Secure data exchange using ISO/IEC 18013-5 and ISO/IEC 18013-7\u201d). This flow has the following distinct variations/mechanisms supported by different standards and specifications:</p> <ul> <li>For the remote presentation flow that does not use the user agent (Digital Credentials API) mechanism, the Wallet Instance and the Remote verifier web application shall comply with Annex B (Use of OID4VP to retrieve an mdoc) of ISO/IEC 18013-7.</li> <li>For the remote presentation flow that uses the data retrieval mechanism of the user agent (Digital Credentials API), the Wallet Instance and the Remote verifier web application:<ul> <li>Shall comply with the Annex C (Digital credentials API retrieval) of ISO/IEC 18013-7.</li> <li>Implement OpenID4VP in combination with Digital Credentials API (Appendix A. OpenID4VP over the Digital Credentials API).</li> </ul> </li> </ul>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Overview/Standards%20and%20Protocols/#proximity-presentation-flows","title":"Proximity Presentation Flows","text":"<p>For the proximity presentation flow, the Wallet Instance and the proximity verifier mobile application (mDL Reader) implement the [ISO/IEC 18013-5] standard.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Overview/Standards%20and%20Protocols/#digital-credentials-api-optionality","title":"Digital Credentials API Optionality","text":"<p>It should be noted that ARF in section 5.6.2 states explicitly that \u201cWithin the EUDI Wallet ecosystem, the second option above will be used for requesting and presenting ISO/IEC 18013-5-compliant attestations in remote transaction flows\u201d. This second option referenced in ARF is: \u201cUsing [OpenID4VP], \u2026. [ISO/IEC 18013-7] specifies a profile for this standard,\u201d and it refers to \u201cAnnex B Use of OID4VP to retrieve an mdoc\u201d of ISO 18013-7. ARF also in section 4.4.3.1 states that \u201cThe use of this [Digital Credentials] API by Wallet Units and Relying Parties is optional\". Therefore, the remote presentation flows using the Digital Credentials API is considered as optional for the target solution.</p>"},{"location":"Use%20Cases/Mobile%20Driving%20License/mDL%20Overview/Standards%20and%20Protocols/#transaction-flows-summary","title":"Transaction Flows Summary","text":"<p>The table below provides the summary of the issuance and presentation transaction flows as specified in ARF that apply explicitly to the target mDL Use Case solution:</p> Operation Flow Credential Format Profiles Protocol Optionality Issuance Remote ISO/IEC 18013-5 (CBOR) OpenID4VCI, v1.0 Mandatory Presentation Remote ISO/IEC 18013-5 (CBOR) OpenID4VP v1.0 instead of OpenID4VP Draft 18 as defined in ISO/IEC 18013-7 (Annex B: Use of OID4VP to retrieve an mdoc) Mandatory Presentation Remote ISO/IEC 18013-5 (CBOR) ISO/IEC 18013-7 (Annex C: Digital credentials API retrieval) Optional Presentation Remote ISO/IEC 18013-5 (CBOR) OID4VP in combination with Digital Credentials API (OID4VP Appendix A. OpenID4VP over the Digital Credentials API) Optional Presentation Proximity ISO/IEC 18013-5 (CBOR) ISO/IEC 18013-5 (device retrieval) Mandatory"},{"location":"assets/","title":"Index","text":"<p>Home</p>"},{"location":"assets/#index-of-assets","title":"Index of assets","text":""},{"location":"css/","title":"Index","text":"<p>Home</p>"},{"location":"css/#index-of-css","title":"Index of css","text":""}]}