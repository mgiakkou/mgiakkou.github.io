
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../../assets/normal-reproduction-low-resolution.jpg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.42">
    
    
      
        <title>How to configure the application - DEVELOPERS HUB</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="primary" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-to-configure-the-application" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="DEVELOPERS HUB" class="md-header__button md-logo" aria-label="DEVELOPERS HUB" data-md-component="logo">
      
  <img src="../../../assets/normal-reproduction-low-resolution.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DEVELOPERS HUB
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              How to configure the application
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="primary" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_3" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_3">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../getting-started/" class="md-tabs__link">
          
  
  Getting started

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../arf-intro/" class="md-tabs__link">
          
  
  Specifications

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../how_to_build/" class="md-tabs__link">
          
  
  How TOs

        </a>
      </li>
    
  

    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../tools-lib-android.md" class="md-tabs__link">
          
  
  Test Suite

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../CONTRIBUTIONS/" class="md-tabs__link">
          
  
  About

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="DEVELOPERS HUB" class="md-nav__button md-logo" aria-label="DEVELOPERS HUB" data-md-component="logo">
      
  <img src="../../../assets/normal-reproduction-low-resolution.jpg" alt="logo">

    </a>
    DEVELOPERS HUB
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../getting-started/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../arf-intro/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Specifications
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    
  
  
    <a href="../how_to_build/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    How TOs
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../tools-lib-android.md" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Test Suite
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../CONTRIBUTIONS/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    About
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      General configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deeplink-schemas-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      DeepLink Schemas configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scoped-issuance-document-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Scoped Issuance Document Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-work-with-self-signed-certificates" class="md-nav__link">
    <span class="md-ellipsis">
      How to work with self-signed certificates
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#theme-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Theme configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pin-storage-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Pin Storage configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analytics-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Analytics configuration
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="how-to-configure-the-application">How to configure the application</h1>
<h2 id="table-of-contents">Table of contents</h2>
<ul>
<li><a href="#general-configuration">General configuration</a></li>
<li><a href="#deeplink-schemas-configuration">DeepLink Schemas configuration</a></li>
<li><a href="#scoped-issuance-document-configuration">Scoped Issuance Document Configuration</a></li>
<li><a href="#how-to-work-with-self-signed-certificates">How to work with self-signed certificates</a></li>
<li><a href="#theme-configuration">Theme configuration</a></li>
<li><a href="#pin-storage-configuration">Pin Storage configuration</a></li>
<li><a href="#analytics-configuration">Analytics configuration</a></li>
</ul>
<h2 id="general-configuration">General configuration</h2>
<p>The application allows the configuration of:</p>
<ol>
<li>Issuing API</li>
</ol>
<p>Via the <em>WalletCoreConfig</em> interface inside the business-logic module.</p>
<div class="highlight"><pre><span></span><code>interface WalletCoreConfig {
    val config: EudiWalletConfig
}
</code></pre></div>
<p>You can configure the <em>EudiWalletConfig</em> per flavor. You can find both implementations inside the core-logic module at src/demo/config/WalletCoreConfigImpl and src/dev/config/WalletCoreConfigImpl</p>
<div class="highlight"><pre><span></span><code>    private companion object {
        const val VCI_ISSUER_URL = &quot;https://issuer.eudiw.dev/oidc&quot;
        const val VCI_CLIENT_ID = &quot;wallet-demo&quot;
        const val AUTHENTICATION_REQUIRED = false
    }
</code></pre></div>
<ol>
<li>Trusted certificates</li>
</ol>
<p>Via the <em>WalletCoreConfig</em> interface.</p>
<div class="highlight"><pre><span></span><code>interface WalletCoreConfig {
    val config: EudiWalletConfig
}
</code></pre></div>
<p>Same as the Verifier and Issuing APIs you can configure the Trusted certificates for the <em>EudiWalletConfig</em> per flavor inside the core-logic module at src/demo/config/WalletCoreConfigImpl and src/dev/config/WalletCoreConfigImpl</p>
<div class="highlight"><pre><span></span><code>_config = EudiWalletConfig.Builder(context)
            .trustedReaderCertificates(R.raw.eudi_pid_issuer_ut)
            .build()
</code></pre></div>
<p>The application's IACA certificates are located <a href="https://github.com/eu-digital-identity-wallet/eudi-app-android-wallet-ui/tree/main/resources-logic/src/main/res/raw">here</a></p>
<ol>
<li>Preregistered Client Scheme</li>
</ol>
<p>If you plan to use the <em>ClientIdScheme.Preregistered</em> for OpenId4VP configuration, please add the following to the configuration files.</p>
<div class="highlight"><pre><span></span><code>const val OPENID4VP_VERIFIER_API_URI = &quot;your_verifier_url&quot;
const val OPENID4VP_VERIFIER_LEGAL_NAME = &quot;your_verifier_legal_name&quot;
const val OPENID4VP_VERIFIER_CLIENT_ID = &quot;your_verifier_client_id&quot;

.openId4VpConfig {
    withClientIdSchemes(
        listOf(
            ClientIdScheme.Preregistered(
                listOf(
                    PreregisteredVerifier(
                        clientId = OPENID4VP_VERIFIER_CLIENT_ID,
                        verifierApi = OPENID4VP_VERIFIER_API_URI,
                        legalName = OPENID4VP_VERIFIER_LEGAL_NAME
                    )
                )
            )
        )
    )
}
</code></pre></div>
<ol>
<li>RQES</li>
</ol>
<p>Via the <em>ConfigLogic</em> interface inside the business-logic module.</p>
<div class="highlight"><pre><span></span><code>interface ConfigLogic {
    /**
     * RQES Config.
     */
    val rqesConfig: EudiRQESUiConfig
}
</code></pre></div>
<p>You can configure the <em>RQESConfig</em>, which implements the EudiRQESUiConfig interface from the RQESUi SDK, per flavor. You can find both implementations inside the business-logic module at src/demo/config/RQESConfigImpl and src/dev/config/RQESConfigImpl.</p>
<div class="highlight"><pre><span></span><code>class RQESConfigImpl : EudiRQESUiConfig {

    override val translations: Map&lt;String, Map&lt;LocalizableKey, String&gt;&gt; get()

    override val themeManager: ThemeManager get()

    override val rqesServiceConfig: RqesServiceConfig get()

    override val qtsps: List&lt;QtspData&gt; get()

    override val printLogs: Boolean get()
}
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>class RQESConfigImpl : EudiRQESUiConfig {

    override val rqesServiceConfig: RqesServiceConfig
        get() = RqesServiceConfig(
            clientId = &quot;your_clientid&quot;,
            clientSecret = &quot;your_secret&quot;,
            authFlowRedirectionURI = URI.create(your_uri),
            signingAlgorithm = your_algo,
            hashAlgorithm = your_algo,
        )

    override val qtsps: List&lt;QtspData&gt;
        get() = listOf(
            QtspData(
                name = &quot;your_name&quot;,
                endpoint = &quot;your_endpoint&quot;.toUri(),
                scaUrl = &quot;your_sca&quot;,
            )
        )

    override val printLogs: Boolean get() = BuildConfig.DEBUG
}
</code></pre></div>
<h2 id="deeplink-schemas-configuration">DeepLink Schemas configuration</h2>
<p>According to the specifications issuance and presentation require deep-linking for the same device flows.</p>
<p>If you want to adjust any schema, you can alter the <em>AndroidLibraryConventionPlugin</em> inside the build-logic module.</p>
<div class="highlight"><pre><span></span><code>val eudiOpenId4VpScheme = &quot;eudi-openid4vp&quot;
val eudiOpenid4VpHost = &quot;*&quot;

val mdocOpenId4VpScheme = &quot;mdoc-openid4vp&quot;
val mdocOpenid4VpHost = &quot;*&quot;

val openId4VpScheme = &quot;openid4vp&quot;
val openid4VpHost = &quot;*&quot;

val credentialOfferScheme = &quot;openid-credential-offer&quot;
val credentialOfferHost = &quot;*&quot;
</code></pre></div>
<p>Let's assume you want to change the credential offer schema to custom-my-offer:// the <em>AndroidLibraryConventionPlugin</em> should look like this:</p>
<div class="highlight"><pre><span></span><code>val eudiOpenId4VpScheme = &quot;eudi-openid4vp&quot;
val eudiOpenid4VpHost = &quot;*&quot;

val mdocOpenId4VpScheme = &quot;mdoc-openid4vp&quot;
val mdocOpenid4VpHost = &quot;*&quot;

val openId4VpScheme = &quot;openid4vp&quot;
val openid4VpHost = &quot;*&quot;

val credentialOfferScheme = &quot;custom-my-offer&quot;
val credentialOfferHost = &quot;*&quot;
</code></pre></div>
<p>In case of an additive change, e.g. adding an extra credential offer schema, you must adjust the following.</p>
<p>AndroidLibraryConventionPlugin:</p>
<div class="highlight"><pre><span></span><code>val credentialOfferScheme = &quot;openid-credential-offer&quot;
val credentialOfferHost = &quot;*&quot;

val myOwnCredentialOfferScheme = &quot;custom-my-offer&quot;
val myOwnCredentialOfferHost = &quot;*&quot;
</code></pre></div>
<div class="highlight"><pre><span></span><code>// Manifest placeholders used for OpenId4VCI
manifestPlaceholders[&quot;credentialOfferHost&quot;] = credentialOfferHost
manifestPlaceholders[&quot;credentialOfferScheme&quot;] = credentialOfferScheme
manifestPlaceholders[&quot;myOwnCredentialOfferHost&quot;] = myOwnCredentialOfferHost
manifestPlaceholders[&quot;myOwnCredentialOfferScheme&quot;] = myOwnCredentialOfferScheme
</code></pre></div>
<div class="highlight"><pre><span></span><code>addConfigField(&quot;CREDENTIAL_OFFER_SCHEME&quot;, credentialOfferScheme)
addConfigField(&quot;MY_OWN_CREDENTIAL_OFFER_SCHEME&quot;, myOwnCredentialOfferScheme)
</code></pre></div>
<p>Android Manifest (inside assembly-logic module):</p>
<div class="highlight"><pre><span></span><code>&lt;intent-filter&gt;
    &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt;

    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;
    &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt;

        &lt;data
            android:host=&quot;${credentialOfferHost}&quot;
            android:scheme=&quot;${credentialOfferScheme}&quot; /&gt;

    &lt;/intent-filter&gt;

&lt;intent-filter&gt;
    &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt;

    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;
    &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt;

        &lt;data
            android:host=&quot;${myOwnCredentialOfferHost}&quot;
            android:scheme=&quot;${myOwnCredentialOfferScheme}&quot; /&gt;

&lt;/intent-filter&gt;
</code></pre></div>
<p>DeepLinkType (DeepLinkHelper Object inside ui-logic module):</p>
<div class="highlight"><pre><span></span><code>enum class DeepLinkType(val schemas: List&lt;String&gt;, val host: String? = null) {

    OPENID4VP(
        schemas = listOf(
            BuildConfig.OPENID4VP_SCHEME,
            BuildConfig.EUDI_OPENID4VP_SCHEME,
            BuildConfig.MDOC_OPENID4VP_SCHEME
        )
    ),
    CREDENTIAL_OFFER(
        schemas = listOf(
            BuildConfig.CREDENTIAL_OFFER_SCHEME,
            BuildConfig.MY_OWN_CREDENTIAL_OFFER_SCHEME
        )
    ),
    ISSUANCE(
        schemas = listOf(BuildConfig.ISSUE_AUTHORIZATION_SCHEME),
        host = BuildConfig.ISSUE_AUTHORIZATION_HOST
    ),
    EXTERNAL(listOf(&quot;external&quot;))
}
</code></pre></div>
<p>In the case of an additive change regarding openId4VP, you also need to update the <em>EudiWalletConfig</em> for each flavor inside the core-logic module.</p>
<div class="highlight"><pre><span></span><code>.openId4VpConfig {
    withScheme(
        listOf(
                BuildConfig.OPENID4VP_SCHEME,
                BuildConfig.EUDI_OPENID4VP_SCHEME,
                BuildConfig.MDOC_OPENID4VP_SCHEME,
                BuildConfig.YOUR_OWN_OPENID4VP_SCHEME
            )
    )
}
</code></pre></div>
<h2 id="scoped-issuance-document-configuration">Scoped Issuance Document Configuration</h2>
<p>Currently, the application supports specific docTypes for scoped issuance (On the Add Document screen the pre-configured buttons like <em>National ID</em>, <em>Driving License</em>, and <em>Age verification</em>).</p>
<p>The supported list and user interface are not configurable because, with the credential offer, you can issue any format-supported document.</p>
<p>To extend the supported list and display a new button for your document, please follow the instructions below.</p>
<p>In <em>DocumentIdentifier</em>, inside the core-logic module, you must add a new data object to the sealed interface with your namespace and doctype.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>data object YOUR_OWN : DocumentIdentifier {
    override val nameSpace: String
        get() = &quot;your_own_name_space&quot;
    override val docType: DocType
        get() = &quot;your_own_doc_type&quot;
}
</code></pre></div>
<p>After completing the above change, please address all compilation errors within the <em>DocumentIdentifier</em>. Ensure that all when statements are exhausted, adhering to the established pattern used in the other documents for consistency.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>fun DocumentIdentifier.isSupported(): Boolean {
    return when (this) {
        is DocumentIdentifier.PID, DocumentIdentifier.MDL, DocumentIdentifier.AGE, DocumentIdentifier.YOUR_OWN -&gt; true
        is DocumentIdentifier.SAMPLE, is DocumentIdentifier.OTHER -&gt; false
    }
}
</code></pre></div>
<p>In <em>strings.xml</em>. inside resources-logic module, add a new string for document title localization</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>&lt;!-- Document Types --&gt;
&lt;string name=&quot;pid&quot;&gt;National ID&lt;/string&gt;
&lt;string name=&quot;mdl&quot;&gt;Driving License&lt;/string&gt;
&lt;string name=&quot;age_verification&quot;&gt;Age Verification&lt;/string&gt;
&lt;string name=&quot;load_sample_data&quot;&gt;Load Sample Documents&lt;/string&gt;
&lt;string name=&quot;your_own_document_title&quot;&gt;Your own document title&lt;/string&gt;
</code></pre></div>
<p>In <em>DocumentTypeUi</em>, inside the common-feature module, please adjust the extension function <em>DocumentIdentifier.toUiName</em> to point to a string localization for the document Title.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>fun DocumentIdentifier.toUiName(resourceProvider: ResourceProvider): String {
    return when (this) {
        is DocumentIdentifier.PID -&gt; resourceProvider.getString(R.string.pid)
        is DocumentIdentifier.MDL -&gt; resourceProvider.getString(R.string.mdl)
        is DocumentIdentifier.AGE -&gt; resourceProvider.getString(R.string.age_verification)
        is DocumentIdentifier.SAMPLE -&gt; resourceProvider.getString(R.string.load_sample_data)
        is DocumentIdentifier.YOUR_OWN -&gt; resourceProvider.getString(R.string.your_own_document_title)
        is DocumentIdentifier.OTHER -&gt; docType
    }
}
</code></pre></div>
<p>In <em>TestsData</em>, inside common-feature module, please address all compilation errors. Ensure that all when statements are exhausted, adhering to the established pattern used in the other documents for consistency.</p>
<p>In <em>AddDocumentInteractor</em>, inside issuance-feature module, please adjust the <em>getAddDocumentOption</em> function to add your new document.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>val options = mutableListOf(
     DocumentOptionItemUi(
        text = DocumentIdentifier.PID.toUiName(resourceProvider),
        icon = AppIcons.Id,
        type = DocumentIdentifier.PID,
        available = true
    ),
    DocumentOptionItemUi(
        text = DocumentIdentifier.MDL.toUiName(resourceProvider),
        icon = AppIcons.Id,
        type = DocumentIdentifier.MDL,
        available = canCreateExtraDocument(flowType)
    ),
    DocumentOptionItemUi(
        text = DocumentIdentifier.AGE.toUiName(resourceProvider),
        icon = AppIcons.Id,
        type = DocumentIdentifier.AGE,
        available = canCreateExtraDocument(flowType)
    ),
    DocumentOptionItemUi(
        text = DocumentIdentifier.YOUR_OWN.toUiName(resourceProvider),
        icon = AppIcons.Id,
        type = DocumentIdentifier.YOUR_OWN,
        available = canCreateExtraDocument(flowType)
    )
)
</code></pre></div>
<h2 id="how-to-work-with-self-signed-certificates">How to work with self-signed certificates</h2>
<p>This section describes configuring the application to interact with services utilizing self-signed certificates.</p>
<ol>
<li>Open the build.gradle.kts file of the "core-logic" module.</li>
<li>In the 'dependencies' block add the following two:
    <div class="highlight"><pre><span></span><code>implementation(libs.ktor.android)
implementation(libs.ktor.logging)
</code></pre></div></li>
<li>Now, you need to navigate to the <strong>ConfigWalletCoreImpl.kt</strong> file, either in:
   <em>srcdevjavaeueuropaeccorelogicconfig</em> or
   <em>srcdemojavaeueuropaeccorelogicconfig</em>
   depending on the flavor of your choice.</li>
<li>Here, add these imports:
    <div class="highlight"><pre><span></span><code>import android.annotation.SuppressLint
import io.ktor.client.HttpClient
import io.ktor.client.engine.android.Android
import io.ktor.client.plugins.logging.Logging
import java.security.SecureRandom
import javax.net.ssl.HostnameVerifier
import javax.net.ssl.SSLContext
import javax.net.ssl.TrustManager
import javax.net.ssl.X509TrustManager
import javax.security.cert.CertificateException
</code></pre></div></li>
<li>Add a custom HttpClient that allows self-signed certificates
    <div class="highlight"><pre><span></span><code>object ProvideKtorHttpClient {

    @SuppressLint(&quot;TrustAllX509TrustManager&quot;, &quot;CustomX509TrustManager&quot;)
    fun client(): HttpClient {
        val trustAllCerts = arrayOf&lt;TrustManager&gt;(
            object : X509TrustManager {
                @Throws(CertificateException::class)
                override fun checkClientTrusted(
                    chain: Array&lt;java.security.cert.X509Certificate&gt;,
                    authType: String
                ) {
                }

                @Throws(CertificateException::class)
                override fun checkServerTrusted(
                    chain: Array&lt;java.security.cert.X509Certificate&gt;,
                    authType: String
                ) {
                }

                override fun getAcceptedIssuers(): Array&lt;java.security.cert.X509Certificate&gt; {
                    return arrayOf()
                }
            }
        )

        return HttpClient(Android) {
            install(Logging)
            engine {
                requestConfig
                sslManager = { httpsURLConnection -&gt;
                    httpsURLConnection.sslSocketFactory = SSLContext.getInstance(&quot;TLS&quot;).apply {
                        init(null, trustAllCerts, SecureRandom())
                    }.socketFactory
                    httpsURLConnection.hostnameVerifier = HostnameVerifier { _, _ -&gt; true }
                }
            }
        }
    }

}
</code></pre></div></li>
<li>Finally, add this custom HttpClient to the config, by appending it to the EudiWalletConfig.Builder, with the following lines:
    <code>.ktorHttpClientFactory {
        ProvideKtorHttpClient.client()
   }</code></li>
</ol>
<h2 id="theme-configuration">Theme configuration</h2>
<p>The application allows the configuration of:</p>
<ol>
<li>Colors</li>
<li>Images</li>
<li>Shape</li>
<li>Fonts</li>
<li>Dimension</li>
</ol>
<p>Via <em>ThemeManager.Builder()</em>.</p>
<h2 id="pin-storage-configuration">Pin Storage configuration</h2>
<p>The application allows the configuration of the PIN storage. You can configure the following:</p>
<ol>
<li>Where the pin will be stored</li>
<li>From where the pin will be retrieved</li>
<li>Pin matching and validity</li>
</ol>
<p>Via the <em>StorageConfig</em> inside the authentication-logic module.</p>
<div class="highlight"><pre><span></span><code>interface StorageConfig {
    val pinStorageProvider: PinStorageProvider
    val biometryStorageProvider: BiometryStorageProvider
}
</code></pre></div>
<p>You can provide your storage implementation by implementing the <em>PinStorageProvider</em> interface and then setting it as default to the <em>StorageConfigImpl</em> pinStorageProvider variable.
The project utilizes Koin for Dependency Injection (DI), thus requiring adjustment of the <em>LogicAuthenticationModule</em> graph to provide the configuration.</p>
<p>Implementation Example:
<div class="highlight"><pre><span></span><code>class PrefsPinStorageProvider(
    private val prefsController: PrefsController
) : PinStorageProvider {

    override fun retrievePin(): String {
        return prefsController.getString(&quot;DevicePin&quot;, &quot;&quot;)
    }

    override fun setPin(pin: String) {
        prefsController.setString(&quot;DevicePin&quot;, pin)
    }

    override fun isPinValid(pin: String): Boolean = retrievePin() == pin
}
</code></pre></div></p>
<p>Config Example:
<div class="highlight"><pre><span></span><code>class StorageConfigImpl(
    private val pinImpl: PinStorageProvider,
    private val biometryImpl: BiometryStorageProvider
) : StorageConfig {
    override val pinStorageProvider: PinStorageProvider
        get() = pinImpl
    override val biometryStorageProvider: BiometryStorageProvider
        get() = biometryImpl
}
</code></pre></div></p>
<p>Config Construction via Koin DI Example:
<div class="highlight"><pre><span></span><code>@Single
fun provideStorageConfig(
    prefsController: PrefsController
): StorageConfig = StorageConfigImpl(
    pinImpl = PrefsPinStorageProvider(prefsController),
    biometryImpl = PrefsBiometryStorageProvider(prefsController)
)
</code></pre></div></p>
<h2 id="analytics-configuration">Analytics configuration</h2>
<p>The application allows the configuration of multiple analytics providers. You can configure the following:</p>
<ol>
<li>Initializing the provider (e.g. Firebase, Appcenter, etc...)</li>
<li>Screen logging</li>
<li>Event logging</li>
</ol>
<p>Via the <em>AnalyticsConfig</em> inside the analytics-logic module.</p>
<div class="highlight"><pre><span></span><code>interface AnalyticsConfig {
    val analyticsProviders: Map&lt;String, AnalyticsProvider&gt;
        get() = emptyMap()
}
</code></pre></div>
<p>You can provide your implementation by implementing the <em>AnalyticsProvider</em> interface and then adding it to your <em>AnalyticsConfigImpl</em> analyticsProviders variable.
You will also need the provider's token/key, thus requiring a Map<String, AnalyticsProvider> configuration.
The project utilizes Koin for Dependency Injection (DI), thus requiring adjustment of the <em>LogicAnalyticsModule</em> graph to provide the configuration.</p>
<p>Implementation Example:
<div class="highlight"><pre><span></span><code>object AppCenterAnalyticsProvider : AnalyticsProvider {
    override fun initialize(context: Application, key: String) {
        AppCenter.start(
            context,
            key,
            Analytics::class.java
        )
    }

    override fun logScreen(name: String, arguments: Map&lt;String, String&gt;) {
        logEvent(name, arguments)
    }

    override fun logEvent(event: String, arguments: Map&lt;String, String&gt;) {
        if (Analytics.isEnabled().get()) {
            Analytics.trackEvent(event, arguments)
        }
    }
}
</code></pre></div></p>
<p>Config Example:
<div class="highlight"><pre><span></span><code>class AnalyticsConfigImpl : AnalyticsConfig {
    override val analyticsProviders: Map&lt;String, AnalyticsProvider&gt;
        get() = mapOf(&quot;YOUR_OWN_KEY&quot; to AppCenterAnalyticsProvider)
}
</code></pre></div></p>
<p>Config Construction via Koin DI Example:
<div class="highlight"><pre><span></span><code>@Single
fun provideAnalyticsConfig(): AnalyticsConfig = AnalyticsConfigImpl()
</code></pre></div></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            




  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["search.highlight", "navigation.tabs", "navigation.tabs.sticky", "navigation.path", "navigation.prune", "navigation.top", "navigation.footer"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>